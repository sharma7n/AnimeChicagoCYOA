"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var requirejs,require,define,Woa,UI,VI,$a,_a;!function(d){function h(e,t){return n.call(e,t)}function s(e,t){var n,r,i,o,a,s,c,u,l,f,p,d=t&&t.split("/"),h=S.map,m=h&&h["*"]||{};if(e){for(a=(e=e.split("/")).length-1,S.nodeIdCompat&&j.test(e[a])&&(e[a]=e[a].replace(j,"")),"."===e[0].charAt(0)&&d&&(e=d.slice(0,d.length-1).concat(e)),l=0;l<e.length;l++)if("."===(p=e[l]))e.splice(l,1),l-=1;else if(".."===p){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;0<l&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((d||m)&&h){for(l=(n=e.split("/")).length;0<l;l-=1){if(r=n.slice(0,l).join("/"),d)for(f=d.length;0<f;f-=1)if((i=h[d.slice(0,f).join("/")])&&(i=i[r])){o=i,s=l;break}if(o)break;!c&&m&&m[r]&&(c=m[r],u=l)}!o&&c&&(o=c,s=u),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function m(t,n){return function(){var e=r.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),a.apply(d,e.concat([t,n]))}}function y(t){return function(e){x[t]=e}}function g(e){if(h(T,e)){var t=T[e];delete T[e],O[e]=!0,o.apply(d,t)}if(!h(x,e)&&!h(O,e))throw new Error("No "+e);return x[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function v(e){return e?c(e):[]}var o,a,b,w,x={},T={},S={},O={},n=Object.prototype.hasOwnProperty,r=[].slice,j=/\.js$/;b=function(e,t){var n,r,i=c(e),o=i[0],a=t[1];return e=i[1],o&&(n=g(o=s(o,a))),o?e=n&&n.normalize?n.normalize(e,(r=a,function(e){return s(e,r)})):s(e,a):(o=(i=c(e=s(e,a)))[0],e=i[1],o&&(n=g(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},w={require:function(e){return m(e)},exports:function(e){var t=x[e];return void 0!==t?t:x[e]={}},module:function(e){return{id:e,uri:"",exports:x[e],config:(t=e,function(){return S&&S.config&&S.config[t]||{}})};var t}},o=function(e,t,n,r){var i,o,a,s,c,u,l,f=[],p=void 0===n?"undefined":_typeof(n);if(u=v(r=r||e),"undefined"===p||"function"===p){for(t=!t.length&&n.length?["require","exports","module"]:t,c=0;c<t.length;c+=1)if("require"===(o=(s=b(t[c],u)).f))f[c]=w.require(e);else if("exports"===o)f[c]=w.exports(e),l=!0;else if("module"===o)i=f[c]=w.module(e);else if(h(x,o)||h(T,o)||h(O,o))f[c]=g(o);else{if(!s.p)throw new Error(e+" missing "+o);s.p.load(s.n,m(r,!0),y(o),{}),f[c]=x[o]}a=n?n.apply(x[e],f):void 0,e&&(i&&i.exports!==d&&i.exports!==x[e]?x[e]=i.exports:a===d&&l||(x[e]=a))}else e&&(x[e]=n)},requirejs=require=a=function(e,t,n,r,i){if("string"==typeof e)return w[e]?w[e](t):g(b(e,v(t)).f);if(!e.splice){if((S=e).deps&&a(S.deps,S.callback),!t)return;t.splice?(e=t,t=n,n=null):e=d}return t=t||function(){},"function"==typeof n&&(n=r,r=i),r?o(d,e,t,n):setTimeout(function(){o(d,e,t,n)},4),a},a.config=function(e){return a(e)},requirejs._defined=x,(define=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),h(x,e)||h(T,e)||(T[e]=[e,t,n])}).amd={jQuery:!0}}(),define("almond",function(){}),$a="undefined"!=typeof window?window:this,_a=function(S,e){function m(e,t){var n=(t=t||G).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function s(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"!==n&&!oe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function t(e,n,r){return oe.isFunction(n)?oe.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?oe.grep(e,function(e){return e===n!==r}):"string"!=typeof n?oe.grep(e,function(e){return-1<Q.call(n,e)!==r}):me.test(n)?oe.filter(n,e,r):(n=oe.filter(n,e),oe.grep(e,function(e){return-1<Q.call(n,e)!==r&&1===e.nodeType}))}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){return e}function f(e){throw e}function c(e,t,n){var r;try{e&&oe.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&oe.isFunction(r=e.then)?r.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function r(){G.removeEventListener("DOMContentLoaded",r),S.removeEventListener("load",r),oe.ready()}function i(){this.expando=oe.expando+i.uid++}function u(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ae,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Ce.test(i)?JSON.parse(i):i)}catch(e){}ke.set(e,t,n)}else n=void 0;return n}function p(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return oe.css(e,t,"")},c=s(),u=n&&n[3]||(oe.cssNumber[t]?"":"px"),l=(oe.cssNumber[t]||"px"!==u&&+c)&&Ne.exec(oe.css(e,t));if(l&&l[3]!==u)for(u=u||l[3],n=n||[],l=+c||1;l/=o=o||".5",oe.style(e,t,l+u),o!==(o=s()/c)&&1!==o&&--a;);return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=i)),i}function g(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=je.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Ie(r)&&(i[o]=(f=u=c=void 0,u=(s=r).ownerDocument,l=s.nodeName,(f=Me[l])||(c=u.body.appendChild(u.createElement(l)),f=oe.css(c,"display"),c.parentNode.removeChild(c),"none"===f&&(f="block"),Me[l]=f)))):"none"!==n&&(i[o]="none",je.set(r,"display",n)));var s,c,u,l,f;for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function y(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function v(e,t){for(var n=0,r=e.length;n<r;n++)je.set(e[n],"globalEval",!t||je.get(t[n],"globalEval"))}function b(e,t,n,r,i){for(var o,a,s,c,u,l,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===oe.type(o))oe.merge(p,o.nodeType?[o]:o);else if($e.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(Fe.exec(o)||["",""])[1].toLowerCase(),c=qe[s]||qe._default,a.innerHTML=c[1]+oe.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;oe.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&-1<oe.inArray(o,r))i&&i.push(o);else if(u=oe.contains(o.ownerDocument,o),a=y(f.appendChild(o),"script"),u&&v(a),n)for(l=0;o=a[l++];)De.test(o.type||"")&&n.push(o);return f}function o(){return!0}function d(){return!1}function a(){try{return G.activeElement}catch(e){}}function h(e,t,n,r,i,o){var a,s;if("object"===(void 0===t?"undefined":_typeof(t))){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)h(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=d;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return oe().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,i,r,n)})}function w(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function x(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function T(e){var t=Je.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function O(e,t){var n,r,i,o,a,s,c,u;if(1===t.nodeType){if(je.hasData(e)&&(o=je.access(e),a=je.set(t,o),u=o.events))for(i in delete a.handle,a.events={},u)for(n=0,r=u[i].length;n<r;n++)oe.event.add(t,i,u[i][n]);ke.hasData(e)&&(s=ke.access(e),c=oe.extend({},s),ke.set(t,c))}}function j(n,r,i,o){r=Y.apply([],r);var e,t,a,s,c,u,l=0,f=n.length,p=f-1,d=r[0],h=oe.isFunction(d);if(h||1<f&&"string"==typeof d&&!ie.checkClone&&Xe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),j(t,r,i,o)});if(f&&(t=(e=b(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=oe.map(y(e,"script"),x)).length;l<f;l++)c=e,l!==p&&(c=oe.clone(c,!0,!0),s&&oe.merge(a,y(c,"script"))),i.call(n[l],c,l);if(s)for(u=a[a.length-1].ownerDocument,oe.map(a,T),l=0;l<s;l++)c=a[l],De.test(c.type||"")&&!je.access(c,"globalEval")&&oe.contains(u,c)&&(c.src?oe._evalUrl&&oe._evalUrl(c.src):m(c.textContent.replace(Ye,""),u))}return n}function k(e,t,n){for(var r,i=t?oe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||oe.cleanData(y(r)),r.parentNode&&(n&&oe.contains(r.ownerDocument,r)&&v(y(r,"script")),r.parentNode.removeChild(r));return e}function C(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ke(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe.contains(e.ownerDocument,e)||(a=oe.style(e,t)),!ie.pixelMarginRight()&&Qe.test(a)&&Ze.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function A(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=rt.length;n--;)if((e=rt[n]+t)in it)return e}function N(e,t,n){var r=Ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function _(e,t,n,r,i){var o,a=0;for(o=n===(r?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===n&&(a+=oe.css(e,n+_e[o],!0,i)),r?("content"===n&&(a-=oe.css(e,"padding"+_e[o],!0,i)),"margin"!==n&&(a-=oe.css(e,"border"+_e[o]+"Width",!0,i))):(a+=oe.css(e,"padding"+_e[o],!0,i),"padding"!==n&&(a+=oe.css(e,"border"+_e[o]+"Width",!0,i)));return a}function I(e,t,n){var r,i=!0,o=Ke(e),a="border-box"===oe.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),r<=0||null==r){if(((r=C(e,t,o))<0||null==r)&&(r=e.style[t]),Qe.test(r))return r;i=a&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(a?"border":"content"),i,o)+"px"}function P(e,t,n,r,i){return new P.prototype.init(e,t,n,r,i)}function M(){at&&(S.requestAnimationFrame(M),oe.fx.tick())}function L(){return S.setTimeout(function(){ot=void 0}),ot=oe.now()}function F(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=_e[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function D(e,t,n){for(var r,i=(q.tweeners[t]||[]).concat(q.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function q(o,e,t){var n,a,r=0,i=q.prefilters.length,s=oe.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var e=ot||L(),t=Math.max(0,u.startTime+u.duration-e),n=1-(t/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return s.notifyWith(o,[u,n,t]),n<1&&i?t:(s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},t),originalProperties:e,originalOptions:t,startTime:ot||L(),duration:t.duration,tweens:[],createTween:function(e,t){var n=oe.Tween(o,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)u.tweens[t].run(1);return e?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,e])):s.rejectWith(o,[u,e]),this}}),l=u.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=oe.camelCase(n)],o=e[n],oe.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=oe.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(l,u.opts.specialEasing);r<i;r++)if(n=q.prefilters[r].call(u,o,l,u.opts))return oe.isFunction(n.stop)&&(oe._queueHooks(u.elem,u.opts.queue).stop=oe.proxy(n.stop,n)),n;return oe.map(l,D,u),oe.isFunction(u.opts.start)&&u.opts.start.call(o,u),oe.fx.timer(oe.extend(c,{elem:o,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(e){return(e.match(we)||[]).join(" ")}function H(e){return e.getAttribute&&e.getAttribute("class")||""}function $(n,e,r,i){var t;if(oe.isArray(e))oe.each(e,function(e,t){r||wt.test(n)?i(n,t):$(n+"["+("object"===(void 0===t?"undefined":_typeof(t))&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==oe.type(e))i(n,e);else for(t in e)$(n+"["+t+"]",e[t],r,i)}function W(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(we)||[];if(oe.isFunction(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function V(t,i,o,a){function s(e){var r;return c[e]=!0,oe.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||c[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),s(n),!1)}),r}var c={},u=t===_t;return s(i.dataTypes[0])||!c["*"]&&s("*")}function B(e,t){var n,r,i=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&oe.extend(!0,e,r),e}function z(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],G=S.document,X=Object.getPrototypeOf,J=U.slice,Y=U.concat,Z=U.push,Q=U.indexOf,K={},ee=K.toString,te=K.hasOwnProperty,ne=te.toString,re=ne.call(Object),ie={},oe=function e(t,n){return new e.fn.init(t,n)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ce=/-([a-z])/g,ue=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:"3.1.1",constructor:oe,length:0,toArray:function(){return J.call(this)},get:function(e){return null==e?J.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return oe.each(this,e)},map:function(n){return this.pushStack(oe.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:U.sort,splice:U.splice},oe.extend=oe.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"===(void 0===a?"undefined":_typeof(a))||oe.isFunction(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(oe.isPlainObject(r)||(i=oe.isArray(r)))?(i?(i=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},a[t]=oe.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},oe.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=oe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ee.call(e))&&(!(t=X(e))||"function"==typeof(n=te.call(t,"constructor")&&t.constructor)&&ne.call(n)===re)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?K[ee.call(e)]||"object":void 0===e?"undefined":_typeof(e)},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(se,"ms-").replace(ce,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(s(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?oe.merge(n,"string"==typeof e?[e]:e):Z.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:Q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(s(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return Y.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(r=J.call(arguments,2),i=function(){return e.apply(t||this,r.concat(J.call(arguments)))},i.guid=e.guid=e.guid||oe.guid++,i):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=U[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()});var le=function(n){function w(e,t,n,r){var i,o,a,s,c,u,l,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:R)!==_&&N(t),t=t||_,P)){if(11!==p&&(c=me.exec(e)))if(i=c[1]){if(9===p){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&D(t,a)&&a.id===i)return n.push(a),n}else{if(c[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&g.getElementsByClassName&&t.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(i)),n}if(!(!g.qsa||B[e+" "]||M&&M.test(e))){if(1!==p)f=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,we):t.setAttribute("id",s=q),o=(u=O(e)).length;o--;)u[o]="#"+s+" "+h(u[o]);l=u.join(","),f=ye.test(e)&&d(t.parentNode)||t}if(l)try{return Y.apply(n,f.querySelectorAll(l)),n}catch(e){}finally{s===q&&t.removeAttribute("id")}}}return k(e.replace(oe,"$1"),t,n,r)}function e(){var r=[];return function e(t,n){return r.push(t+" ")>T.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function c(e){return e[q]=!0,e}function i(e){var t=_.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var n=e.split("|"),r=n.length;r--;)T.attrHandle[n[r]]=t}function u(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function o(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Te(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function s(a){return c(function(o){return o=+o,c(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(s,e,t){var c=e.dir,u=e.next,l=u||c,f=t&&"parentNode"===l,p=$++;return e.first?function(e,t,n){for(;e=e[c];)if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[H,p];if(n){for(;e=e[c];)if((1===e.nodeType||f)&&s(e,t,n))return!0}else for(;e=e[c];)if(1===e.nodeType||f)if(i=(o=e[q]||(e[q]={}))[e.uniqueID]||(o[e.uniqueID]={}),u&&u===e.nodeName.toLowerCase())e=e[c]||e;else{if((r=i[l])&&r[0]===H&&r[1]===p)return a[2]=r[2];if((i[l]=a)[2]=s(e,t,n))return!0}return!1}}function p(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function x(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function v(d,h,m,y,g,e){return y&&!y[q]&&(y=v(y)),g&&!g[q]&&(g=v(g,e)),c(function(e,t,n,r){var i,o,a,s=[],c=[],u=t.length,l=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)w(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?l:x(l,s,d,n,r),p=m?g||(e?d:u||y)?[]:t:f;if(m&&m(f,p,n,r),y)for(i=x(p,c),y(i,[],n,r),o=i.length;o--;)(a=i[o])&&(p[c[o]]=!(f[c[o]]=a));if(e){if(g||d){if(g){for(i=[],o=p.length;o--;)(a=p[o])&&i.push(f[o]=a);g(null,p=[],i,r)}for(o=p.length;o--;)(a=p[o])&&-1<(i=g?Q(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=x(p===t?p.splice(u,p.length):p),g?g(null,t,p,r):Y.apply(t,p)})}function m(e){for(var i,t,n,r=e.length,o=T.relative[e[0].type],a=o||T.relative[" "],s=o?1:0,c=f(function(e){return e===i},a,!0),u=f(function(e){return-1<Q(i,e)},a,!0),l=[function(e,t,n){var r=!o&&(n||t!==C)||((i=t).nodeType?c(e,t,n):u(e,t,n));return i=null,r}];s<r;s++)if(t=T.relative[e[s].type])l=[f(p(l),t)];else{if((t=T.filter[e[s].type].apply(null,e[s].matches))[q]){for(n=++s;n<r&&!T.relative[e[n].type];n++);return v(1<s&&p(l),1<s&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),t,s<n&&m(e.slice(s,n)),n<r&&m(e=e.slice(n)),n<r&&h(e))}l.push(t)}return p(l)}var y,g,T,b,S,O,j,k,C,A,E,N,_,I,P,M,L,F,D,q="sizzle"+1*new Date,R=n.document,H=0,$=0,W=e(),V=e(),B=e(),z=function(e,t){return e===t&&(E=!0),0},U={}.hasOwnProperty,G=[],X=G.pop,J=G.push,Y=G.push,Z=G.slice,Q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ce=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),le=new RegExp("^"+te+"$"),fe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,de=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,ge=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ve=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},xe=function(){N()},Te=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Y.apply(G=Z.call(R.childNodes),R.childNodes),G[R.childNodes.length].nodeType}catch(n){Y={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}for(y in g=w.support={},S=w.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},N=w.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:R;return r!==_&&9===r.nodeType&&r.documentElement&&(I=(_=r).documentElement,P=!S(_),R!==_&&(n=_.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),g.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),g.getElementsByTagName=i(function(e){return e.appendChild(_.createComment("")),!e.getElementsByTagName("*").length}),g.getElementsByClassName=he.test(_.getElementsByClassName),g.getById=i(function(e){return I.appendChild(e).id=q,!_.getElementsByName||!_.getElementsByName(q).length}),g.getById?(T.filter.ID=function(e){var t=e.replace(ge,ve);return function(e){return e.getAttribute("id")===t}},T.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}}):(T.filter.ID=function(e){var n=e.replace(ge,ve);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},T.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),T.find.TAG=g.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):g.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=g.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&P?t.getElementsByClassName(e):void 0},L=[],M=[],(g.qsa=he.test(_.querySelectorAll))&&(i(function(e){I.appendChild(e).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ee+"*(?:value|"+K+")"),e.querySelectorAll("[id~="+q+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+q+"+*").length||M.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=_.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),I.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(g.matchesSelector=he.test(F=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&i(function(e){g.disconnectedMatch=F.call(e,"*"),F.call(e,"[s!='']:x"),L.push("!=",re)}),M=M.length&&new RegExp(M.join("|")),L=L.length&&new RegExp(L.join("|")),t=he.test(I.compareDocumentPosition),D=t||he.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e===_||e.ownerDocument===R&&D(R,e)?-1:t===_||t.ownerDocument===R&&D(R,t)?1:A?Q(A,e)-Q(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===_?-1:t===_?1:i?-1:o?1:A?Q(A,e)-Q(A,t):0;if(i===o)return u(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?u(a[r],s[r]):a[r]===R?-1:s[r]===R?1:0}),_},w.matches=function(e,t){return w(e,null,null,t)},w.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&N(e),t=t.replace(ce,"='$1']"),!(!g.matchesSelector||!P||B[t+" "]||L&&L.test(t)||M&&M.test(t)))try{var n=F.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<w(t,_,null,[e]).length},w.contains=function(e,t){return(e.ownerDocument||e)!==_&&N(e),D(e,t)},w.attr=function(e,t){(e.ownerDocument||e)!==_&&N(e);var n=T.attrHandle[t.toLowerCase()],r=n&&U.call(T.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:g.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},w.escape=function(e){return(e+"").replace(be,we)},w.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,n=[],r=0,i=0;if(E=!g.detectDuplicates,A=!g.sortStable&&e.slice(0),e.sort(z),E){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return A=null,e},b=w.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=b(t);return n},(T=w.selectors={cacheLength:50,createPseudo:c,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ge,ve),e[3]=(e[3]||e[4]||e[5]||"").replace(ge,ve),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||w.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&w.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=O(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ge,ve).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=w.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(ie," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,m,y){var g="nth"!==h.slice(0,3),v="last"!==h.slice(-4),b="of-type"===e;return 1===m&&0===y?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,c,u=g!==v?"nextSibling":"previousSibling",l=e.parentNode,f=b&&e.nodeName.toLowerCase(),p=!n&&!b,d=!1;if(l){if(g){for(;u;){for(a=e;a=a[u];)if(b?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;c=u="only"===h&&!c&&"nextSibling"}return!0}if(c=[v?l.firstChild:l.lastChild],v&&p){for(d=(s=(r=(i=(o=(a=l)[q]||(a[q]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===H&&r[1])&&r[2],a=s&&l.childNodes[s];a=++s&&a&&a[u]||(d=s=0)||c.pop();)if(1===a.nodeType&&++d&&a===e){i[h]=[H,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[q]||(a[q]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===H&&r[1]),!1===d)for(;(a=++s&&a&&a[u]||(d=s=0)||c.pop())&&((b?a.nodeName.toLowerCase()!==f:1!==a.nodeType)||!++d||(p&&((i=(o=a[q]||(a[q]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[H,d]),a!==e)););return(d-=y)===m||d%m==0&&0<=d/m}}},PSEUDO:function(e,o){var t,a=T.pseudos[e]||T.setFilters[e.toLowerCase()]||w.error("unsupported pseudo: "+e);return a[q]?a(o):1<a.length?(t=[e,e,"",o],T.setFilters.hasOwnProperty(e.toLowerCase())?c(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=Q(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:c(function(e){var r=[],i=[],s=j(e.replace(oe,"$1"));return s[q]?c(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:c(function(t){return function(e){return 0<w(t,e).length}}),contains:c(function(t){return t=t.replace(ge,ve),function(e){return-1<(e.textContent||e.innerText||b(e)).indexOf(t)}}),lang:c(function(n){return le.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(ge,ve).toLowerCase(),function(e){var t;do{if(t=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===I},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return de.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=T.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[y]=r(y);for(y in{submit:!0,reset:!0})T.pseudos[y]=o(y);return l.prototype=T.filters=T.pseudos,T.setFilters=new l,O=w.tokenize=function(e,t){var n,r,i,o,a,s,c,u=V[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],c=T.preFilter;a;){for(o in(!n||(r=ae.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=se.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(oe," ")}),a=a.slice(n.length)),T.filter)!(r=fe[o].exec(a))||c[o]&&!(r=c[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?w.error(e):V(e,s).slice(0)},j=w.compile=function(e,t){var n,y,g,v,b,r,i=[],o=[],a=B[e+" "];if(!a){for(t||(t=O(e)),n=t.length;n--;)(a=m(t[n]))[q]?i.push(a):o.push(a);(a=B(e,(y=o,v=0<(g=i).length,b=0<y.length,r=function(e,t,n,r,i){var o,a,s,c=0,u="0",l=e&&[],f=[],p=C,d=e||b&&T.find.TAG("*",i),h=H+=null==p?1:Math.random()||.1,m=d.length;for(i&&(C=t===_||t||i);u!==m&&null!=(o=d[u]);u++){if(b&&o){for(a=0,t||o.ownerDocument===_||(N(o),n=!P);s=y[a++];)if(s(o,t||_,n)){r.push(o);break}i&&(H=h)}v&&((o=!s&&o)&&c--,e&&l.push(o))}if(c+=u,v&&u!==c){for(a=0;s=g[a++];)s(l,f,t,n);if(e){if(0<c)for(;u--;)l[u]||f[u]||(f[u]=X.call(r));f=x(f)}Y.apply(r,f),i&&!e&&0<f.length&&1<c+g.length&&w.uniqueSort(r)}return i&&(H=h,C=p),l},v?c(r):r))).selector=e}return a},k=w.select=function(e,t,n,r){var i,o,a,s,c,u="function"==typeof e&&e,l=!r&&O(e=u.selector||e);if(n=n||[],1===l.length){if(2<(o=l[0]=l[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&P&&T.relative[o[1].type]){if(!(t=(T.find.ID(a.matches[0].replace(ge,ve),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=fe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!T.relative[s=a.type]);)if((c=T.find[s])&&(r=c(a.matches[0].replace(ge,ve),ye.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&h(o)))return Y.apply(n,r),n;break}}return(u||j(e,l))(r,t,!P,n,!t||ye.test(e)&&d(t.parentNode)||t),n},g.sortStable=q.split("").sort(z).join("")===q,g.detectDuplicates=!!E,N(),g.sortDetached=i(function(e){return 1&e.compareDocumentPosition(_.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),g.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||t(K,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),w}(S);oe.find=le,oe.expr=le.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=le.uniqueSort,oe.text=le.getText,oe.isXMLDoc=le.isXML,oe.contains=le.contains,oe.escapeSelector=le.escape;var fe=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&oe(e).is(n))break;r.push(e)}return r},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},de=oe.expr.match.needsContext,he=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?oe.find.matchesSelector(r,e)?[r]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;t<r;t++)if(oe.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)oe.find(e,i[t],n);return 1<r?oe.uniqueSort(n):n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&de.test(e)?oe(e):e||[],!1).length}});var ye,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(oe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||ye,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ge.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:G,!0)),he.test(r[1])&&oe.isPlainObject(t))for(r in t)oe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=G.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):oe.makeArray(e,this)}).prototype=oe.fn,ye=oe(G);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&oe(e);if(!de.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Q.call(oe(e),this[0]):Q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return fe(e,"parentNode")},parentsUntil:function(e,t,n){return fe(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return fe(e,"nextSibling")},prevAll:function(e){return fe(e,"previousSibling")},nextUntil:function(e,t,n){return fe(e,"nextSibling",n)},prevUntil:function(e,t,n){return fe(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(r,i){oe.fn[r]=function(e,t){var n=oe.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=oe.filter(t,n)),1<this.length&&(be[r]||oe.uniqueSort(n),ve.test(r)&&n.reverse()),this.pushStack(n)}});var we=/[^\x20\t\r\n\f]+/g;oe.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},oe.each(e.match(we)||[],function(e,t){n[t]=!0}),n):oe.extend({},r);var i,t,o,a,s=[],c=[],u=-1,l=function(){for(a=r.once,o=i=!0;c.length;u=-1)for(t=c.shift();++u<s.length;)!1===s[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=s.length,t=!1);r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(u=s.length-1,c.push(t)),function n(e){oe.each(e,function(e,t){oe.isFunction(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==oe.type(t)&&n(t)})}(arguments),t&&!i&&l()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;-1<(n=oe.inArray(t,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<oe.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=c=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=c=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),i||l()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},oe.extend({Deferred:function(e){var o=[["notify","progress",oe.Callbacks("memory"),oe.Callbacks("memory"),2],["resolve","done",oe.Callbacks("once memory"),oe.Callbacks("once memory"),0,"resolved"],["reject","fail",oe.Callbacks("once memory"),oe.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var i=arguments;return oe.Deferred(function(r){oe.each(o,function(e,t){var n=oe.isFunction(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){function c(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,oe.isFunction(t)?s?t.call(e,c(u,o,l,s),c(u,o,f,s)):(u++,t.call(e,c(u,o,l,s),c(u,o,f,s),c(u,o,l,o.notifyWith))):(a!==l&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){oe.Deferred.exceptionHook&&oe.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==f&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(oe.Deferred.getStackHook&&(t.stackTrace=oe.Deferred.getStackHook()),S.setTimeout(t))}}var u=0;return oe.Deferred(function(e){o[0][3].add(c(0,e,oe.isFunction(r)?r:l,e.notifyWith)),o[1][3].add(c(0,e,oe.isFunction(t)?t:l)),o[2][3].add(c(0,e,oe.isFunction(n)?n:f))}).promise()},promise:function(e){return null!=e?oe.extend(e,a):a}},s={};return oe.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[0][2].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=J.call(arguments),o=oe.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?J.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(c(e,o.done(a(t)).resolve,o.reject),"pending"===o.state()||oe.isFunction(i[t]&&i[t].then)))return o.then();for(;t--;)c(i[t],a(t),o.reject);return o.promise()}});var xe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;oe.Deferred.exceptionHook=function(e,t){S.console&&S.console.warn&&e&&xe.test(e.name)&&S.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},oe.readyException=function(e){S.setTimeout(function(){throw e})};var Te=oe.Deferred();oe.fn.ready=function(e){return Te.then(e).catch(function(e){oe.readyException(e)}),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(!0===e?--oe.readyWait:oe.isReady)||((oe.isReady=!0)!==e&&0<--oe.readyWait||Te.resolveWith(G,[oe]))}}),oe.ready.then=Te.then,"complete"===G.readyState||"loading"!==G.readyState&&!G.documentElement.doScroll?S.setTimeout(oe.ready):(G.addEventListener("DOMContentLoaded",r),S.addEventListener("load",r));var Se=function e(t,n,r,i,o,a,s){var c=0,u=t.length,l=null==r;if("object"===oe.type(r))for(c in o=!0,r)e(t,n,c,r[c],!0,a,s);else if(void 0!==i&&(o=!0,oe.isFunction(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(oe(e),n)})),n))for(;c<u;c++)n(t[c],r,s?i:i.call(t[c],c,n(t[c],r)));return o?t:l?n.call(t):u?n(t[0],r):a},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};i.uid=1,i.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[oe.camelCase(t)]=n;else for(r in t)i[oe.camelCase(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][oe.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){oe.isArray(t)?t=t.map(oe.camelCase):t=(t=oe.camelCase(t))in r?[t]:t.match(we)||[],n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||oe.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var je=new i,ke=new i,Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ae=/[A-Z]/g;oe.extend({hasData:function(e){return ke.hasData(e)||je.hasData(e)},data:function(e,t,n){return ke.access(e,t,n)},removeData:function(e,t){ke.remove(e,t)},_data:function(e,t,n){return je.access(e,t,n)},_removeData:function(e,t){je.remove(e,t)}}),oe.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=ke.get(o),1===o.nodeType&&!je.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(0===(r=a[t].name).indexOf("data-")&&(r=oe.camelCase(r.slice(5)),u(o,r,i[r])));je.set(o,"hasDataAttrs",!0)}return i}return"object"===(void 0===n?"undefined":_typeof(n))?this.each(function(){ke.set(this,n)}):Se(this,function(e){var t;if(o&&void 0===e){if(void 0!==(t=ke.get(o,n)))return t;if(void 0!==(t=u(o,n)))return t}else this.each(function(){ke.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){ke.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=je.get(e,t),n&&(!r||oe.isArray(n)?r=je.access(e,t,oe.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),r=n.length,i=n.shift(),o=oe._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){oe.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return je.get(e,n)||je.access(e,n,{empty:oe.Callbacks("once memory").add(function(){je.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?oe.queue(this[0],t):void 0===n?this:this.each(function(){var e=oe.queue(this,t,n);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&oe.dequeue(this,t)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=oe.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=je.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ne=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),_e=["Top","Right","Bottom","Left"],Ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe.contains(e.ownerDocument,e)&&"none"===oe.css(e,"display")},Pe=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i},Me={};oe.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ie(this)?oe(this).show():oe(this).hide()})}});var Le=/^(?:checkbox|radio)$/i,Fe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,De=/^$|\/(?:java|ecma)script/i,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td;var Re,He,$e=/<|&#?\w+;/;Re=G.createDocumentFragment().appendChild(G.createElement("div")),(He=G.createElement("input")).setAttribute("type","radio"),He.setAttribute("checked","checked"),He.setAttribute("name","t"),Re.appendChild(He),ie.checkClone=Re.cloneNode(!0).cloneNode(!0).lastChild.checked,Re.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!Re.cloneNode(!0).lastChild.defaultValue;var We=G.documentElement,Ve=/^key/,Be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ze=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(t,e,n,r,i){var o,a,s,c,u,l,f,p,d,h,m,y=je.get(t);if(y)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&oe.find.matchesSelector(We,i),n.guid||(n.guid=oe.guid++),(c=y.events)||(c=y.events={}),(a=y.handle)||(a=y.handle=function(e){return void 0!==oe&&oe.event.triggered!==e.type?oe.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(we)||[""]).length;u--;)d=m=(s=ze.exec(e[u])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=oe.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=oe.event.special[d]||{},l=oe.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&oe.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=c[d])||((p=c[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),oe.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,c,u,l,f,p,d,h,m,y=je.hasData(e)&&je.get(e);if(y&&(c=y.events)){for(u=(t=(t||"").match(we)||[""]).length;u--;)if(d=m=(s=ze.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=oe.event.special[d]||{},p=c[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!i&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(e,l));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||oe.removeEvent(e,d,y.handle),delete c[d])}else for(d in c)oe.event.remove(e,d+t[u],n,r,!0);oe.isEmptyObject(c)&&je.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=oe.event.fix(e),c=new Array(arguments.length),u=(je.get(this,"events")||{})[s.type]||[],l=oe.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=oe.event.handlers.call(this,s,u),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)(!s.rnamespace||s.rnamespace.test(o.namespace))&&(s.handleObj=o,s.data=o.data,void 0!==(r=((oe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<c;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<oe(i,this).index(u):oe.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(t,e){Object.defineProperty(oe.Event.prototype,t,{enumerable:!0,configurable:!0,get:oe.isFunction(e)?function(){return this.originalEvent?e(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[t]:void 0},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[oe.expando]?e:new oe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==a()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===a()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?o:d,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=o,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=o,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=o,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},oe.event.addProp),oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){oe.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return(!n||n!==this&&!oe.contains(this,n))&&(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),oe.fn.extend({on:function(e,t,n,r){return h(this,e,t,n,r)},one:function(e,t,n,r){return h(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,oe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":_typeof(e))){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=d),this.each(function(){oe.event.remove(this,e,n,t)})}});var Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ge=/<script|<style|<link/i,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Je=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(Ue,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,c,u,l=e.cloneNode(!0),f=oe.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(a=y(l),r=0,i=(o=y(e)).length;r<i;r++)s=o[r],c=a[r],void 0,"input"===(u=c.nodeName.toLowerCase())&&Le.test(s.type)?c.checked=s.checked:("input"===u||"textarea"===u)&&(c.defaultValue=s.defaultValue);if(t)if(n)for(o=o||y(e),a=a||y(l),r=0,i=o.length;r<i;r++)O(o[r],a[r]);else O(e,l);return 0<(a=y(l,"script")).length&&v(a,!f&&y(e,"script")),l},cleanData:function(e){for(var t,n,r,i=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(Oe(n)){if(t=n[je.expando]){if(t.events)for(r in t.events)i[r]?oe.event.remove(n,r):oe.removeEvent(n,r,t.handle);n[je.expando]=void 0}n[ke.expando]&&(n[ke.expando]=void 0)}}}),oe.fn.extend({detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return Se(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return j(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,e).appendChild(e)})},prepend:function(){return j(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return j(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return j(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ge.test(e)&&!qe[(Fe.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(oe.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return j(this,arguments,function(e){var t=this.parentNode;oe.inArray(this,n)<0&&(oe.cleanData(y(this)),t&&t.replaceChild(e,this))},n)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){oe.fn[e]=function(e){for(var t,n=[],r=oe(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),oe(r[o])[a](t),Z.apply(n,t.get());return this.pushStack(n)}});var Ze=/^margin/,Qe=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),Ke=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=S),t.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",We.appendChild(o);var e=S.getComputedStyle(a);t="1%"!==e.top,i="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,We.removeChild(o),a=null}}var t,n,r,i,o=G.createElement("div"),a=G.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),oe.extend(ie,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),i}}))}();var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"},rt=["Webkit","Moz","ms"],it=G.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=C(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=oe.camelCase(t),c=e.style;return t=oe.cssProps[s]||(oe.cssProps[s]=E(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t]:("string"===(o=void 0===n?"undefined":_typeof(n))&&(i=Ne.exec(n))&&i[1]&&(n=p(e,t,i),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(oe.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(c[t]=n))))}},css:function(e,t,n,r){var i,o,a,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=E(s)||s),(a=oe.cssHooks[t]||oe.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=C(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),oe.each(["height","width"],function(e,a){oe.cssHooks[a]={get:function(e,t,n){return t?!et.test(oe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?I(e,a,n):Pe(e,tt,function(){return I(e,a,n)}):void 0},set:function(e,t,n){var r,i=n&&Ke(e),o=n&&_(e,a,n,"border-box"===oe.css(e,"boxSizing",!1,i),i);return o&&(r=Ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[a]=t,t=oe.css(e,a)),N(0,t,o)}}}),oe.cssHooks.marginLeft=A(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(C(e,"marginLeft"))||e.getBoundingClientRect().left-Pe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),oe.each({margin:"",padding:"",border:"Width"},function(i,o){oe.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+_e[t]+o]=r[t]||r[t-2]||r[0];return n}},Ze.test(i)||(oe.cssHooks[i+o].set=N)}),oe.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var r,i,o={},a=0;if(oe.isArray(t)){for(r=Ke(e),i=t.length;a<i;a++)o[t[a]]=oe.css(e,t[a],!1,r);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,1<arguments.length)}}),((oe.Tween=P).prototype={constructor:P,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=P.propHooks[this.prop];return e&&e.get?e.get(this):P.propHooks._default.get(this)},run:function(e){var t,n=P.propHooks[this.prop];return this.pos=t=this.options.duration?oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):P.propHooks._default.set(this),this}}).init.prototype=P.prototype,(P.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=P.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=P.prototype.init,oe.fx.step={};var ot,at,st,ct,ut=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;oe.Animation=oe.extend(q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return p(n.elem,e,Ne.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,r=0,i=e.length;r<i;r++)n=e[r],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,c,u,l,f="width"in t||"height"in t,p=this,d={},h=e.style,m=e.nodeType&&Ie(e),y=je.get(e,"fxshow");for(r in n.queue||(null==(a=oe._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,oe.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ut.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;m=!0}d[r]=y&&y[r]||oe.style(e,r)}if((c=!oe.isEmptyObject(t))||!oe.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=y&&y.display)&&(u=je.get(e,"display")),"none"===(l=oe.css(e,"display"))&&(u?l=u:(g([e],!0),u=e.style.display||u,l=oe.css(e,"display"),g([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===oe.css(e,"float")&&(c||(p.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,d)c||(y?"hidden"in y&&(m=y.hidden):y=je.access(e,"fxshow",{display:u}),o&&(y.hidden=!m),m&&g([e],!0),p.done(function(){for(r in m||g([e]),je.remove(e,"fxshow"),d)oe.style(e,r,d[r])})),c=D(m?y[r]:0,r,p),r in y||(y[r]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),oe.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":_typeof(e))?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return oe.fx.off||G.hidden?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default),(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ie).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=oe.isEmptyObject(t),o=oe.speed(e,n,r),a=function(){var e=q(this,oe.extend({},t),o);(i||je.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=oe.timers,r=je.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&lt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));(e||!o)&&oe.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=je.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=oe.timers,o=n?n.length:0;for(t.finish=!0,oe.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),oe.each(["toggle","show","hide"],function(e,r){var i=oe.fn[r];oe.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(F(r,!0),e,t,n)}}),oe.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){oe.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(ot=oe.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),ot=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){at||(at=S.requestAnimationFrame?S.requestAnimationFrame(M):S.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){S.cancelAnimationFrame?S.cancelAnimationFrame(at):S.clearInterval(at),at=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(r,e){return r=oe.fx&&oe.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=S.setTimeout(e,r);t.stop=function(){S.clearTimeout(n)}})},st=G.createElement("input"),ct=G.createElement("select").appendChild(G.createElement("option")),st.type="checkbox",ie.checkOn=""!==st.value,ie.optSelected=ct.selected,(st=G.createElement("input")).value="t",st.type="radio",ie.radioValue="t"===st.value;var ft,pt=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Se(this,oe.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(i=oe.attrHooks[t.toLowerCase()]||(oe.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=oe.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(we);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var a=pt[t]||oe.find.attr;pt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=pt[o],pt[o]=r,r=null!=a(e,t,n)?o:null,pt[o]=i),r}});var dt=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Se(this,oe.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,i=oe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),oe.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,c=0;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,H(this)))});if("string"==typeof t&&t)for(e=t.match(we)||[];n=this[c++];)if(i=H(n),r=1===n.nodeType&&" "+R(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=R(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,c=0;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(we)||[];n=this[c++];)if(i=H(n),r=1===n.nodeType&&" "+R(i)+" "){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=R(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=void 0===i?"undefined":_typeof(i);return"boolean"==typeof t&&"string"===o?t?this.addClass(i):this.removeClass(i):this.each(oe.isFunction(i)?function(e){oe(this).toggleClass(i.call(this,e,H(this),t),t)}:function(){var e,t,n,r;if("string"===o)for(t=0,n=oe(this),r=i.match(we)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else(void 0===i||"boolean"===o)&&((e=H(this))&&je.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":je.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+R(H(n))+" ").indexOf(t))return!0;return!1}});var mt=/\r/g;oe.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=oe.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,oe(this).val()):n)?t="":"number"==typeof t?t+="":oe.isArray(t)&&(t=oe.map(t,function(e){return null==e?"":e+""})),(r=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=oe.valHooks[t.type]||oe.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(mt,""):null==e?"":e:void 0}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:R(oe.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],c=a?o+1:i.length;for(r=o<0?c:a?o:0;r<c;r++)if(!(!(n=i[r]).selected&&r!==o||n.disabled||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=oe.makeArray(t),a=i.length;a--;)((r=i[a]).selected=-1<oe.inArray(oe.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=-1<oe.inArray(oe(e).val(),t):void 0}},ie.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var yt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(e,t,n,r){var i,o,a,s,c,u,l,f=[n||G],p=te.call(e,"type")?e.type:e,d=te.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||G,3!==n.nodeType&&8!==n.nodeType&&!yt.test(p+oe.event.triggered)&&(-1<p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,(e=e[oe.expando]?e:new oe.Event(p,"object"===(void 0===e?"undefined":_typeof(e))&&e)).isTrigger=r?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:oe.makeArray(t,[e]),l=oe.event.special[p]||{},r||!l.trigger||!1!==l.trigger.apply(n,t))){if(!r&&!l.noBubble&&!oe.isWindow(n)){for(s=l.delegateType||p,yt.test(s+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(n.ownerDocument||G)&&f.push(a.defaultView||a.parentWindow||S)}for(i=0;(o=f[i++])&&!e.isPropagationStopped();)e.type=1<i?s:l.bindType||p,(u=(je.get(o,"events")||{})[e.type]&&je.get(o,"handle"))&&u.apply(o,t),(u=c&&o[c])&&u.apply&&Oe(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(f.pop(),t)||!Oe(n)||c&&oe.isFunction(n[p])&&!oe.isWindow(n)&&((a=n[c])&&(n[c]=null),n[oe.event.triggered=p](),oe.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var r=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(r,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}}),oe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){oe.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in S,ie.focusin||oe.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){oe.event.simulate(r,e.target,oe.event.fix(e))};oe.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=je.access(e,r);t||e.addEventListener(n,i,!0),je.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=je.access(e,r)-1;t?je.access(e,r,t):(e.removeEventListener(n,i,!0),je.remove(e,r))}}});var gt=S.location,vt=oe.now(),bt=/\?/;oe.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new S.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+e),t};var wt=/\[\]$/,xt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,r=[],i=function(e,t){var n=oe.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&St.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:n.replace(xt,"\r\n")}}).get()}});var Ot=/%20/g,jt=/#.*$/,kt=/([?&])_=[^&]*/,Ct=/^(.*?):[ \t]*([^\r\n]*)$/gm,At=/^(?:GET|HEAD)$/,Et=/^\/\//,Nt={},_t={},It="*/".concat("*"),Pt=G.createElement("a");Pt.href=gt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,oe.ajaxSettings),t):B(oe.ajaxSettings,e)},ajaxPrefilter:W(Nt),ajaxTransport:W(_t),ajax:function(e,t){function n(e,t,n,r){var i,o,a,s,c,u=t;h||(h=!0,d&&S.clearTimeout(d),l=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var r,i,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}(y,T,n)),s=function(e,t,n,r){var i,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=u[c+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(y,s,T,i),i?(y.ifModified&&((c=T.getResponseHeader("Last-Modified"))&&(oe.lastModified[f]=c),(c=T.getResponseHeader("etag"))&&(oe.etag[f]=c)),204===e||"HEAD"===y.type?u="nocontent":304===e?u="notmodified":(u=s.state,o=s.data,i=!(a=s.error))):(a=u,(e||!u)&&(u="error",e<0&&(e=0))),T.status=e,T.statusText=(t||u)+"",i?b.resolveWith(g,[o,u,T]):b.rejectWith(g,[T,u,a]),T.statusCode(x),x=void 0,m&&v.trigger(i?"ajaxSuccess":"ajaxError",[T,y,i?o:a]),w.fireWith(g,[T,u]),m&&(v.trigger("ajaxComplete",[T,y]),--oe.active||oe.event.trigger("ajaxStop")))}"object"===(void 0===e?"undefined":_typeof(e))&&(t=e,e=void 0),t=t||{};var l,f,p,r,d,i,h,m,o,a,y=oe.ajaxSetup({},t),g=y.context||y,v=y.context&&(g.nodeType||g.jquery)?oe(g):oe.event,b=oe.Deferred(),w=oe.Callbacks("once memory"),x=y.statusCode||{},s={},c={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!r)for(r={};t=Ct.exec(p);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=c[e.toLowerCase()]=c[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==h&&(y.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||u;return l&&l.abort(t),n(0,t),this}};if(b.promise(T),y.url=((e||y.url||gt.href)+"").replace(Et,gt.protocol+"//"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=(y.dataType||"*").toLowerCase().match(we)||[""],null==y.crossDomain){i=G.createElement("a");try{i.href=y.url,i.href=i.href,y.crossDomain=Pt.protocol+"//"+Pt.host!=i.protocol+"//"+i.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&"string"!=typeof y.data&&(y.data=oe.param(y.data,y.traditional)),V(Nt,y,t,T),h)return T;for(o in(m=oe.event&&y.global)&&0==oe.active++&&oe.event.trigger("ajaxStart"),y.type=y.type.toUpperCase(),y.hasContent=!At.test(y.type),f=y.url.replace(jt,""),y.hasContent?y.data&&y.processData&&0===(y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(y.data=y.data.replace(Ot,"+")):(a=y.url.slice(f.length),y.data&&(f+=(bt.test(f)?"&":"?")+y.data,delete y.data),!1===y.cache&&(f=f.replace(kt,"$1"),a=(bt.test(f)?"&":"?")+"_="+vt+++a),y.url=f+a),y.ifModified&&(oe.lastModified[f]&&T.setRequestHeader("If-Modified-Since",oe.lastModified[f]),oe.etag[f]&&T.setRequestHeader("If-None-Match",oe.etag[f])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&T.setRequestHeader("Content-Type",y.contentType),T.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+("*"!==y.dataTypes[0]?", "+It+"; q=0.01":""):y.accepts["*"]),y.headers)T.setRequestHeader(o,y.headers[o]);if(y.beforeSend&&(!1===y.beforeSend.call(g,T,y)||h))return T.abort();if(u="abort",w.add(y.complete),T.done(y.success),T.fail(y.error),l=V(_t,y,t,T)){if(T.readyState=1,m&&v.trigger("ajaxSend",[T,y]),h)return T;y.async&&0<y.timeout&&(d=S.setTimeout(function(){T.abort("timeout")},y.timeout));try{h=!1,l.send(s,n)}catch(e){if(h)throw e;n(-1,e)}}else n(-1,"No Transport");return T},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,i){oe[i]=function(e,t,n,r){return oe.isFunction(t)&&(r=r||n,n=t,t=void 0),oe.ajax(oe.extend({url:e,type:i,dataType:r,data:t,success:n},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},oe.fn.extend({wrapAll:function(e){var t;return this[0]&&(oe.isFunction(e)&&(e=e.call(this[0])),t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return this.each(oe.isFunction(n)?function(e){oe(this).wrapInner(n.call(this,e))}:function(){var e=oe(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=oe.isFunction(t);return this.each(function(e){oe(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){oe(this).replaceWith(this.childNodes)}),this}}),oe.expr.pseudos.hidden=function(e){return!oe.expr.pseudos.visible(e)},oe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},oe.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},Lt=oe.ajaxSettings.xhr();ie.cors=!!Lt&&"withCredentials"in Lt,ie.ajax=Lt=!!Lt,oe.ajaxTransport(function(i){var o,a;return ie.cors||Lt&&!i.crossDomain?{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Mt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&S.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}:void 0}),oe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=oe("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),G.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ft,Dt=[],qt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||oe.expando+"_"+vt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(qt,"$1"+r):!1!==e.jsonp&&(e.url+=(bt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||oe.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=S[r],S[r]=function(){o=arguments},n.always(function(){void 0===i?oe(S).removeProp(r):S[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Dt.push(r)),o&&oe.isFunction(i)&&i(o[0]),o=i=void 0}),"script"):void 0}),ie.createHTMLDocument=((Ft=G.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ft.childNodes.length),oe.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(ie.createHTMLDocument?((r=(t=G.implementation.createHTMLDocument("")).createElement("base")).href=G.location.href,t.head.appendChild(r)):t=G),o=!n&&[],(i=he.exec(e))?[t.createElement(i[1])]:(i=b([e],t,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes)));var r,i,o},oe.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=R(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":_typeof(t))&&(i="POST"),0<a.length&&oe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?oe("<div>").append(oe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.pseudos.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length},oe.offset={setOffset:function(e,t,n){var r,i,o,a,s,c,u=oe.css(e,"position"),l=oe(e),f={};"static"===u&&(e.style.position="relative"),s=l.offset(),o=oe.css(e,"top"),c=oe.css(e,"left"),("absolute"===u||"fixed"===u)&&-1<(o+c).indexOf("auto")?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(c)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):l.css(f)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,r,i,o=this[0];return o?o.getClientRects().length?(r=o.getBoundingClientRect()).width||r.height?(n=z(i=o.ownerDocument),e=i.documentElement,{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+oe.css(e[0],"borderTopWidth",!0),left:r.left+oe.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-oe.css(n,"marginTop",!0),left:t.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||We})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;oe.fn[t]=function(e){return Se(this,function(e,t,n){var r=z(e);return void 0===n?r?r[i]:e[t]:void(r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),oe.each(["top","left"],function(e,n){oe.cssHooks[n]=A(ie.pixelPosition,function(e,t){return t?(t=C(e,n),Qe.test(t)?oe(e).position()[n]+"px":t):void 0})}),oe.each({Height:"height",Width:"width"},function(a,s){oe.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){oe.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return Se(this,function(e,t,n){var r;return oe.isWindow(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?oe.css(e,t,i):oe.style(e,t,n,i)},s,n?e:void 0,n)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),oe.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Rt=S.jQuery,Ht=S.$;return oe.noConflict=function(e){return S.$===oe&&(S.$=Ht),e&&S.jQuery===oe&&(S.jQuery=Rt),oe},e||(S.jQuery=S.$=oe),oe},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=$a.document?_a($a,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return _a(e)}:_a($a),UI=this,VI=function(){var o,e,r=Function.call.bind(Function.apply),x=Function.call.bind(Function.call),s=Array.isArray,a=Object.keys,t=function(e){try{return e(),!1}catch(e){return!0}},i=function(e){try{return e()}catch(e){return!1}},n=(e=t,function(){return!r(e,this,arguments)}),c=!!Object.defineProperty&&!t(function(){Object.defineProperty({},"x",{get:function(){}})}),u="foo"===function(){}.name,l=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),p=Function.call.bind(Array.prototype.filter),d=Function.call.bind(Array.prototype.some),h=function(e,t,n,r){!r&&t in e||(c?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},T=function(n,r,i){l(a(r),function(e){var t=r[e];h(n,e,t,!!i)})},m=Function.call.bind(Object.prototype.toString),y="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===m(e)}:function(e){return"function"==typeof e},g=function(e,t,n){if(!c)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},v=function(t,n,e){if(!c)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return t[n]},set:function(e){t[n]=e}})},b=function(e,t,n){if(c){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},w=function(e,t,n){c?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},S=function(e,t){t&&y(t.toString)&&h(e,"toString",t.toString.bind(t),!0)},O=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&a(t).forEach(function(e){w(r,e,t[e])}),r},j=function(r,t){return!!Object.setPrototypeOf&&i(function(){var e=function e(t){var n=new r(t);return Object.setPrototypeOf(n,e.prototype),n};return Object.setPrototypeOf(e,r),e.prototype=O(r.prototype,{constructor:{value:e}}),t(e)})},k=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),C=k.isFinite,A=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),N=Function.call.bind(Array.prototype.concat),_=Function.call.bind(String.prototype.slice),I=Function.call.bind(Array.prototype.push),P=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),L=Math.max,F=Math.min,D=Math.floor,q=Math.abs,R=Math.exp,H=Math.log,$=Math.sqrt,W=Function.call.bind(Object.prototype.hasOwnProperty),V=function(){},B=k.Symbol||{},z=B.species||"@@species",U=Number.isNaN||function(e){return e!=e},G=Number.isFinite||function(e){return"number"==typeof e&&C(e)},X=y(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:U(t)?t:t<0?-1:1},J=function(e){return"[object Arguments]"===m(e)},Y=J(arguments)?J:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==m(e)&&"[object Function]"===m(e.callee)},Z=function(e){return null===e||"function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e))},Q=function(e){return"[object String]"===m(e)},K=function(e){return"[object RegExp]"===m(e)},ee=function(e){return"function"==typeof k.Symbol&&"symbol"===(void 0===e?"undefined":_typeof(e))},te=function(e,t,n){var r=e[t];h(e,t,n,!0),S(e[t],r)},ne="function"==typeof B&&"function"==typeof B.for&&ee(B()),re=ee(B.iterator)?B.iterator:"_es6-shim iterator_";k.Set&&"function"==typeof(new k.Set)["@@iterator"]&&(re="@@iterator"),k.Reflect||h(k,"Reflect",{},!0);var ie,oe=k.Reflect,ae=String,se={Call:function(e,t){var n=2<arguments.length?arguments[2]:[];if(!se.IsCallable(e))throw new TypeError(e+" is not a function");return r(e,t,n)},RequireObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e)))},ToObject:function(e,t){return Object(se.RequireObjectCoercible(e,t))},IsCallable:y,IsConstructor:function(e){return se.IsCallable(e)},ToInt32:function(e){return se.ToNumber(e)>>0},ToUint32:function(e){return se.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===m(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=se.ToNumber(e);return U(t)?0:0!==t&&G(t)?(0<t?1:-1)*D(q(t)):t},ToLength:function(e){var t=se.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:U(e)&&U(t)},SameValueZero:function(e,t){return e===t||U(e)&&U(t)},IsIterable:function(e){return se.TypeIsObject(e)&&(void 0!==e[re]||Y(e))},GetIterator:function(e){if(Y(e))return new o(e,"value");var t=se.GetMethod(e,re);if(!se.IsCallable(t))throw new TypeError("value is not an iterable");var n=se.Call(t,e);if(!se.TypeIsObject(n))throw new TypeError("bad iterator");return n},GetMethod:function(e,t){var n=se.ToObject(e)[t];if(null!=n){if(!se.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=se.GetMethod(e,"return");if(void 0!==n){var r,i;try{r=se.Call(n,e)}catch(e){i=e}if(!t){if(i)throw i;if(!se.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=1<arguments.length?e.next(arguments[1]):e.next();if(!se.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=se.IteratorNext(e);return!se.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var i=void 0===n?e:n;if(!r&&oe.construct)return oe.construct(e,t,i);var o=i.prototype;se.TypeIsObject(o)||(o=Object.prototype);var a=O(o),s=se.Call(e,a,t);return se.TypeIsObject(s)?s:a},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!se.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[z];if(null==r)return t;if(!se.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var i=se.ToString(e),o="<"+t;""!==n&&(o+=" "+n+'="'+se.ToString(r).replace(/"/g,"&quot;")+'"');return o+">"+i+"</"+t+">"},IsRegExp:function(e){if(!se.TypeIsObject(e))return!1;var t=e[B.match];return void 0!==t?!!t:K(e)},ToString:function(e){return ae(e)}};if(c&&ne){var ce=function(e){if(ee(B[e]))return B[e];var t=B.for("Symbol."+e);return Object.defineProperty(B,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!ee(B.search)){var ue=ce("search"),le=String.prototype.search;h(RegExp.prototype,ue,function(e){return se.Call(le,e,[this])});te(String.prototype,"search",function(e){var t=se.RequireObjectCoercible(this);if(null!=e){var n=se.GetMethod(e,ue);if(void 0!==n)return se.Call(n,e,[t])}return se.Call(le,t,[se.ToString(e)])})}if(!ee(B.replace)){var fe=ce("replace"),pe=String.prototype.replace;h(RegExp.prototype,fe,function(e,t){return se.Call(pe,e,[this,t])});te(String.prototype,"replace",function(e,t){var n=se.RequireObjectCoercible(this);if(null!=e){var r=se.GetMethod(e,fe);if(void 0!==r)return se.Call(r,e,[n,t])}return se.Call(pe,n,[se.ToString(e),t])})}if(!ee(B.split)){var de=ce("split"),he=String.prototype.split;h(RegExp.prototype,de,function(e,t){return se.Call(he,e,[this,t])});te(String.prototype,"split",function(e,t){var n=se.RequireObjectCoercible(this);if(null!=e){var r=se.GetMethod(e,de);if(void 0!==r)return se.Call(r,e,[n,t])}return se.Call(he,n,[se.ToString(e),t])})}var me=ee(B.match),ye=me&&((ie={})[B.match]=function(){return 42},42!=="a".match(ie));if(!me||ye){var ge=ce("match"),ve=String.prototype.match;h(RegExp.prototype,ge,function(e){return se.Call(ve,e,[this])});te(String.prototype,"match",function(e){var t=se.RequireObjectCoercible(this);if(null!=e){var n=se.GetMethod(e,ge);if(void 0!==n)return se.Call(n,e,[t])}return se.Call(ve,t,[se.ToString(e)])})}}var be=function(t,n,r){S(n,t),Object.setPrototypeOf&&Object.setPrototypeOf(t,n),c?l(Object.getOwnPropertyNames(t),function(e){e in V||r[e]||v(t,e,n)}):l(Object.keys(t),function(e){e in V||r[e]||(n[e]=t[e])}),n.prototype=t.prototype,b(t.prototype,"constructor",n)},we=function(){return this},xe=function(e){c&&!W(e,z)&&g(e,z,we)},Te=function(e,t){var n=t||function(){return this};h(e,re,n),!e[re]&&ee(re)&&(e[re]=n)},Se=function(e,t,n){if(r=e,i=t,o=n,c?Object.defineProperty(r,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):r[i]=o,!se.SameValue(e[t],n))throw new TypeError("property is nonconfigurable");var r,i,o},Oe=function(e,t,n,r){if(!se.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var i=t.prototype;se.TypeIsObject(i)||(i=n);var o=O(i);for(var a in r)if(W(r,a)){var s=r[a];h(o,a,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var je=String.fromCodePoint;te(String,"fromCodePoint",function(){return se.Call(je,this,arguments)})}var ke={fromCodePoint:function(){for(var e,t=[],n=0,r=arguments.length;n<r;n++){if(e=Number(arguments[n]),!se.SameValue(e,se.ToInteger(e))||e<0||1114111<e)throw new RangeError("Invalid code point "+e);e<65536?I(t,String.fromCharCode(e)):(e-=65536,I(t,String.fromCharCode(55296+(e>>10))),I(t,String.fromCharCode(e%1024+56320)))}return t.join("")},raw:function(e){var t=se.ToObject(e,"bad callSite"),n=se.ToObject(t.raw,"bad raw value"),r=n.length,i=se.ToLength(r);if(i<=0)return"";for(var o,a,s,c,u=[],l=0;l<i&&(o=se.ToString(l),s=se.ToString(n[o]),I(u,s),!(i<=l+1));)a=l+1<arguments.length?arguments[l+1]:"",c=se.ToString(a),I(u,c),l+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&te(String,"raw",ke.raw),T(String,ke);var Ce={repeat:function(e){var t=se.ToString(se.RequireObjectCoercible(this)),n=se.ToInteger(e);if(n<0||1/0<=n)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r}(t,n)},startsWith:function(e){var t=se.ToString(se.RequireObjectCoercible(this));if(se.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=se.ToString(e);1<arguments.length&&(n=arguments[1]);var i=L(se.ToInteger(n),0);return _(t,i,i+r.length)===r},endsWith:function(e){var t=se.ToString(se.RequireObjectCoercible(this));if(se.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=se.ToString(e),i=t.length;1<arguments.length&&(n=arguments[1]);var o=void 0===n?i:se.ToInteger(n),a=F(L(o,0),i);return _(t,a-r.length,a)===r},includes:function(e){if(se.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=se.ToString(e);return 1<arguments.length&&(t=arguments[1]),-1!==A(this,n,t)},codePointAt:function(e){var t=se.ToString(se.RequireObjectCoercible(this)),n=se.ToInteger(e),r=t.length;if(0<=n&&n<r){var i=t.charCodeAt(n);if(i<55296||56319<i||n+1===r)return i;var o=t.charCodeAt(n+1);return o<56320||57343<o?i:1024*(i-55296)+(o-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&te(String.prototype,"includes",Ce.includes),String.prototype.startsWith&&String.prototype.endsWith){var Ae=t(function(){"/a/".startsWith(/a/)}),Ee=i(function(){return!1==="abc".startsWith("a",1/0)});Ae&&Ee||(te(String.prototype,"startsWith",Ce.startsWith),te(String.prototype,"endsWith",Ce.endsWith))}ne&&(i(function(){var e=/a/;return e[B.match]=!1,"/a/".startsWith(e)})||te(String.prototype,"startsWith",Ce.startsWith),i(function(){var e=/a/;return e[B.match]=!1,"/a/".endsWith(e)})||te(String.prototype,"endsWith",Ce.endsWith),i(function(){var e=/a/;return e[B.match]=!1,"/a/".includes(e)})||te(String.prototype,"includes",Ce.includes));T(String.prototype,Ce);var Ne=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),_e=new RegExp("(^["+Ne+"]+)|(["+Ne+"]+$)","g"),Ie=function(){return se.ToString(se.RequireObjectCoercible(this)).replace(_e,"")},Pe=["","​","￾"].join(""),Me=new RegExp("["+Pe+"]","g"),Le=/^[\-+]0x[0-9a-f]+$/i,Fe=Pe.trim().length!==Pe.length;h(String.prototype,"trim",Ie,Fe);var De=function(e){return{value:e,done:0===arguments.length}},qe=function(e){se.RequireObjectCoercible(e),this._s=se.ToString(e),this._i=0};qe.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,De();var n,r,i=e.charCodeAt(t);return i<55296||56319<i||t+1===e.length?r=1:r=(n=e.charCodeAt(t+1))<56320||57343<n?1:2,this._i=t+r,De(e.substr(t,r))},Te(qe.prototype),Te(String.prototype,function(){return new qe(this)});var Re={from:function(e){var t,n,r,i,o,a;if(1<arguments.length&&(t=arguments[1]),void 0===t)n=!1;else{if(!se.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2]),n=!0}if(void 0!==(Y(e)||se.GetMethod(e,re))){o=se.IsConstructor(this)?Object(new this):[];var s,c,u=se.GetIterator(e);for(a=0;!1!==(s=se.IteratorStep(u));){c=s.value;try{n&&(c=void 0===r?t(c,a):x(t,r,c,a)),o[a]=c}catch(e){throw se.IteratorClose(u,!0),e}a+=1}i=a}else{var l,f=se.ToObject(e);for(i=se.ToLength(f.length),o=se.IsConstructor(this)?Object(new this(i)):new Array(i),a=0;a<i;++a)l=f[a],n&&(l=void 0===r?t(l,a):x(t,r,l,a)),Se(o,a,l)}return o.length=i,o},of:function(){for(var e=arguments.length,t=s(this)||!se.IsCallable(this)?new Array(e):se.Construct(this,[e]),n=0;n<e;++n)Se(t,n,arguments[n]);return t.length=e,t}};T(Array,Re),xe(Array),T((o=function(e,t){this.i=0,this.array=e,this.kind=t}).prototype,{next:function(){var e=this.i,t=this.array;if(!(this instanceof o))throw new TypeError("Not an ArrayIterator");if(void 0!==t)for(var n=se.ToLength(t.length);e<n;e++){var r,i=this.kind;return"key"===i?r=e:"value"===i?r=t[e]:"entry"===i&&(r=[e,t[e]]),this.i=e+1,De(r)}return this.array=void 0,De()}}),Te(o.prototype),Array.of===Re.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}()||te(Array,"of",Re.of);var He={copyWithin:function(e,t){var n,r=se.ToObject(this),i=se.ToLength(r.length),o=se.ToInteger(e),a=se.ToInteger(t),s=o<0?L(i+o,0):F(o,i),c=a<0?L(i+a,0):F(a,i);2<arguments.length&&(n=arguments[2]);var u=void 0===n?i:se.ToInteger(n),l=u<0?L(i+u,0):F(u,i),f=F(l-c,i-s),p=1;for(c<s&&s<c+f&&(p=-1,c+=f-1,s+=f-1);0<f;)c in r?r[s]=r[c]:delete r[s],c+=p,s+=p,f-=1;return r},fill:function(e){var t,n;1<arguments.length&&(t=arguments[1]),2<arguments.length&&(n=arguments[2]);var r=se.ToObject(this),i=se.ToLength(r.length);t=se.ToInteger(void 0===t?0:t);for(var o=(n=se.ToInteger(void 0===n?i:n))<0?i+n:n,a=t<0?L(i+t,0):F(t,i);a<i&&a<o;++a)r[a]=e;return r},find:function(e){var t=se.ToObject(this),n=se.ToLength(t.length);if(!se.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var r,i=1<arguments.length?arguments[1]:null,o=0;o<n;o++)if(r=t[o],i){if(x(e,i,r,o,t))return r}else if(e(r,o,t))return r},findIndex:function(e){var t=se.ToObject(this),n=se.ToLength(t.length);if(!se.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var r=1<arguments.length?arguments[1]:null,i=0;i<n;i++)if(r){if(x(e,r,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new o(this,"key")},values:function(){return new o(this,"value")},entries:function(){return new o(this,"entry")}};if(Array.prototype.keys&&!se.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!se.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[re]&&(T(Array.prototype,{values:Array.prototype[re]}),ee(B.unscopables)&&(Array.prototype[B.unscopables].values=!0)),u&&Array.prototype.values&&"values"!==Array.prototype.values.name){var $e=Array.prototype.values;te(Array.prototype,"values",function(){return se.Call($e,this,arguments)}),h(Array.prototype,re,Array.prototype.values,!0)}T(Array.prototype,He),1/[!0].indexOf(!0,-0)<0&&h(Array.prototype,"indexOf",function(){var e=E(this,arguments);return 0===e&&1/e<0?0:e},!0),Te(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&Te(Object.getPrototypeOf([].values()));var We,Ve=i(function(){return 0===Array.from({length:-1}).length}),Be=1===(We=Array.from([0].entries())).length&&s(We[0])&&0===We[0][0]&&0===We[0][1];if(Ve&&Be||te(Array,"from",Re.from),!i(function(){return Array.from([0],void 0)})){var ze=Array.from;te(Array,"from",function(e){return 1<arguments.length&&void 0!==arguments[1]?se.Call(ze,this,arguments):x(ze,this,e)})}var Ue=-(Math.pow(2,32)-1),Ge=function(e,t){var n={length:Ue};return n[t?(n.length>>>0)-1:0]=!0,i(function(){return x(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!Ge(Array.prototype.forEach)){var Xe=Array.prototype.forEach;te(Array.prototype,"forEach",function(){return se.Call(Xe,0<=this.length?this:[],arguments)})}if(!Ge(Array.prototype.map)){var Je=Array.prototype.map;te(Array.prototype,"map",function(){return se.Call(Je,0<=this.length?this:[],arguments)})}if(!Ge(Array.prototype.filter)){var Ye=Array.prototype.filter;te(Array.prototype,"filter",function(){return se.Call(Ye,0<=this.length?this:[],arguments)})}if(!Ge(Array.prototype.some)){var Ze=Array.prototype.some;te(Array.prototype,"some",function(){return se.Call(Ze,0<=this.length?this:[],arguments)})}if(!Ge(Array.prototype.every)){var Qe=Array.prototype.every;te(Array.prototype,"every",function(){return se.Call(Qe,0<=this.length?this:[],arguments)})}if(!Ge(Array.prototype.reduce)){var Ke=Array.prototype.reduce;te(Array.prototype,"reduce",function(){return se.Call(Ke,0<=this.length?this:[],arguments)})}if(!Ge(Array.prototype.reduceRight,!0)){var et=Array.prototype.reduceRight;te(Array.prototype,"reduceRight",function(){return se.Call(et,0<=this.length?this:[],arguments)})}var tt,nt=8!==Number("0o10"),rt=2!==Number("0b10"),it=d(Pe,function(e){return 0===Number(e+0+e)});if(nt||rt||it){var ot=Number,at=/^0b[01]+$/i,st=/^0o[0-7]+$/i,ct=at.test.bind(at),ut=st.test.bind(st),lt=Me.test.bind(Me),ft=Le.test.bind(Le),pt=tt=function(e){var t;"string"==typeof(t=0<arguments.length?Z(e)?e:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),Z(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),Z(t)))return t;throw new TypeError("No default value")}(e):0)&&(t=se.Call(Ie,t),ct(t)?t=parseInt(_(t,2),2):ut(t)?t=parseInt(_(t,2),8):(lt(t)||ft(t))&&(t=NaN));var n=this,r=i(function(){return ot.prototype.valueOf.call(n),!0});return n instanceof tt&&!r?new ot(t):ot(t)};be(ot,pt,{}),T(pt,{NaN:ot.NaN,MAX_VALUE:ot.MAX_VALUE,MIN_VALUE:ot.MIN_VALUE,NEGATIVE_INFINITY:ot.NEGATIVE_INFINITY,POSITIVE_INFINITY:ot.POSITIVE_INFINITY}),Number=pt,b(k,"Number",pt)}var dt=Math.pow(2,53)-1;T(Number,{MAX_SAFE_INTEGER:dt,MIN_SAFE_INTEGER:-dt,EPSILON:2220446049250313e-31,parseInt:k.parseInt,parseFloat:k.parseFloat,isFinite:G,isInteger:function(e){return G(e)&&se.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&q(e)<=Number.MAX_SAFE_INTEGER},isNaN:U}),h(Number,"parseInt",k.parseInt,Number.parseInt!==k.parseInt),[,1].find(function(e,t){return 0===t})||te(Array.prototype,"find",He.find),0!==[,1].findIndex(function(e,t){return 0===t})&&te(Array.prototype,"findIndex",He.findIndex);var ht,mt,yt,gt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),vt=function(e,t){c&&gt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},bt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),i=e;i<t;++i)r[i-e]=arguments[i];return r},wt=function(n){return function(e,t){return e[t]=n[t],e}},xt=function(e,t){var n,r=a(Object(t));return se.IsCallable(Object.getOwnPropertySymbols)&&(n=p(Object.getOwnPropertySymbols(Object(t)),gt(t))),f(N(r,n||[]),wt(t),e)},Tt={assign:function(e){var t=se.ToObject(e,"Cannot convert undefined or null to object");return f(se.Call(bt,1,arguments),xt,t)},is:function(e,t){return se.SameValue(e,t)}};if(Object.assign&&Object.preventExtensions&&function(){var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}}()&&te(Object,"assign",Tt.assign),T(Object,Tt),c){var St={setPrototypeOf:function(t,n){var r,i=function(e,t){return function(e,t){if(!se.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!se.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),x(r,e,t),e};try{r=t.getOwnPropertyDescriptor(t.prototype,n).set,x(r,{},null)}catch(e){if(t.prototype!=={}[n])return;r=function(e){this[n]=e},i.polyfill=i(i({},null),t.prototype)instanceof t}return i}(Object,"__proto__")};T(Object,St)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(ht=Object.create(null),mt=Object.getPrototypeOf,yt=Object.setPrototypeOf,Object.getPrototypeOf=function(e){var t=mt(e);return t===ht?null:t},Object.setPrototypeOf=function(e,t){return yt(e,null===t?ht:t)},Object.setPrototypeOf.polyfill=!1),!!t(function(){Object.keys("foo")})){var Ot=Object.keys;te(Object,"keys",function(e){return Ot(se.ToObject(e))}),a=Object.keys}if(t(function(){Object.keys(/a/g)})){var jt=Object.keys;te(Object,"keys",function(e){if(K(e)){var t=[];for(var n in e)W(e,n)&&I(t,n);return t}return jt(e)}),a=Object.keys}if(Object.getOwnPropertyNames&&!!t(function(){Object.getOwnPropertyNames("foo")})){var kt="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Ct=Object.getOwnPropertyNames;te(Object,"getOwnPropertyNames",function(e){var t=se.ToObject(e);if("[object Window]"===m(t))try{return Ct(t)}catch(e){return N([],kt)}return Ct(t)})}if(Object.getOwnPropertyDescriptor&&!!t(function(){Object.getOwnPropertyDescriptor("foo","bar")})){var At=Object.getOwnPropertyDescriptor;te(Object,"getOwnPropertyDescriptor",function(e,t){return At(se.ToObject(e),t)})}if(Object.seal&&!!t(function(){Object.seal("foo")})){var Et=Object.seal;te(Object,"seal",function(e){return se.TypeIsObject(e)?Et(e):e})}if(Object.isSealed&&!!t(function(){Object.isSealed("foo")})){var Nt=Object.isSealed;te(Object,"isSealed",function(e){return!se.TypeIsObject(e)||Nt(e)})}if(Object.freeze&&!!t(function(){Object.freeze("foo")})){var _t=Object.freeze;te(Object,"freeze",function(e){return se.TypeIsObject(e)?_t(e):e})}if(Object.isFrozen&&!!t(function(){Object.isFrozen("foo")})){var It=Object.isFrozen;te(Object,"isFrozen",function(e){return!se.TypeIsObject(e)||It(e)})}if(Object.preventExtensions&&!!t(function(){Object.preventExtensions("foo")})){var Pt=Object.preventExtensions;te(Object,"preventExtensions",function(e){return se.TypeIsObject(e)?Pt(e):e})}if(Object.isExtensible&&!!t(function(){Object.isExtensible("foo")})){var Mt=Object.isExtensible;te(Object,"isExtensible",function(e){return!!se.TypeIsObject(e)&&Mt(e)})}if(Object.getPrototypeOf&&!!t(function(){Object.getPrototypeOf("foo")})){var Lt=Object.getPrototypeOf;te(Object,"getPrototypeOf",function(e){return Lt(se.ToObject(e))})}var Ft,Dt=c&&((Ft=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&se.IsCallable(Ft.get));if(c&&!Dt){g(RegExp.prototype,"flags",function(){if(!se.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var qt,Rt=c&&i(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Ht=ne&&c&&((qt=/./)[B.match]=!1,RegExp(qt)===qt),$t=i(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Wt=$t&&i(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!$t||!Wt){var Vt=RegExp.prototype.toString;h(RegExp.prototype,"toString",function(){var e=se.RequireObjectCoercible(this);return K(e)?x(Vt,e):"/"+ae(e.source)+"/"+ae(e.flags)},!0),S(RegExp.prototype.toString,Vt)}if(c&&(!Rt||Ht)){var Bt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Ut=se.IsCallable(zt.get)?zt.get:function(){return this.source},Gt=RegExp,Xt=function e(t,n){var r=se.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?K(t)?new e(se.Call(Ut,t),void 0===n?se.Call(Bt,t):n):(r&&(t.source,void 0===n&&t.flags),new Gt(t,n)):t};be(Gt,Xt,{$input:!0}),RegExp=Xt,b(k,"RegExp",Xt)}if(c){var Jt={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(a(Jt),function(e){e in RegExp&&!(Jt[e]in RegExp)&&g(RegExp,Jt[e],function(){return RegExp[e]})})}xe(RegExp);var Yt=1/Number.EPSILON,Zt=Math.pow(2,-23),Qt=Math.pow(2,127)*(2-Zt),Kt=Math.pow(2,-126),en=Math.E,tn=Math.LOG2E,nn=Math.LOG10E,rn=Number.prototype.clz;delete Number.prototype.clz;var on={acosh:function(e){var t=Number(e);return U(t)||e<1?NaN:1===t?0:t===1/0?t:H(t/en+$(t+1)*$(t-1)/en)+1},asinh:function e(t){var n=Number(t);return 0!==n&&C(n)?n<0?-e(-n):H(n+$(n*n+1)):n},atanh:function(e){var t=Number(e);return U(t)||t<-1||1<t?NaN:-1===t?-1/0:1===t?1/0:0===t?t:.5*H((1+t)/(1-t))},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),t===1/0?n=1/0:n=(t/((n=R(H(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=se.ToUint32(t);return 0===n?32:rn?se.Call(rn,n):31-D(H(n+.5)*tn)},cosh:function(e){var t=Number(e);return 0===t?1:U(t)?NaN:C(t)?(t<0&&(t=-t),21<t?R(t)/2:(R(t)+R(-t))/2):1/0},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!C(t)||0===t)return t;if(.5<q(t))return R(t)-1;for(var n=t,r=0,i=1;r+n!==r;)r+=n,n*=t/(i+=1);return r},hypot:function(){for(var e=0,t=0,n=0;n<arguments.length;++n){var r=q(Number(arguments[n]));t<r?(e*=t/r*(t/r),e+=1,t=r):e+=0<r?r/t*(r/t):r}return t===1/0?1/0:t*$(e)},log2:function(e){return H(e)*tn},log10:function(e){return H(e)*nn},log1p:function(e){var t=Number(e);return t<-1||U(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(H(1+t)/(1+t-1))},sign:X,sinh:function(e){var t=Number(e);return C(t)&&0!==t?q(t)<1?(Math.expm1(t)-Math.expm1(-t))/2:(R(t-1)-R(-t-1))*en/2:t},tanh:function(e){var t=Number(e);return U(t)||0===t?t:20<=t?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(R(t)+R(-t))},trunc:function(e){var t=Number(e);return t<0?-D(-t):D(t)},imul:function(e,t){var n=se.ToUint32(e),r=se.ToUint32(t),i=65535&n,o=65535&r;return i*o+((n>>>16&65535)*o+i*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||U(t))return t;var n=X(t),r=q(t);if(r<Kt)return n*(r/Kt/Zt+Yt-Yt)*Kt*Zt;var i=(1+Zt/Number.EPSILON)*r,o=i-(i-r);return Qt<o||U(o)?n*(1/0):n*o}};T(Math,on),h(Math,"log1p",on.log1p,-1e-17!==Math.log1p(-1e-17)),h(Math,"asinh",on.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),h(Math,"tanh",on.tanh,-2e-17!==Math.tanh(-2e-17)),h(Math,"acosh",on.acosh,Math.acosh(Number.MAX_VALUE)===1/0),h(Math,"cbrt",on.cbrt,8<Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON),h(Math,"sinh",on.sinh,-2e-17!==Math.sinh(-2e-17));var an=Math.expm1(10);h(Math,"expm1",on.expm1,22025.465794806718<an||an<22025.465794806718);var sn=Math.round,cn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),un=[Yt+1,2*Yt-1].every(function(e){return Math.round(e)===e});h(Math,"round",function(e){var t=D(e);return e-t<.5?t:-1===t?-0:t+1},!cn||!un),S(Math.round,sn);var ln=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=on.imul,S(Math.imul,ln)),2!==Math.imul.length&&te(Math,"imul",function(){return se.Call(ln,Math,arguments)});var fn,pn,dn=function(){var i,e,t,n=k.setTimeout;if("function"==typeof n||"object"===(void 0===n?"undefined":_typeof(n))){se.IsPromise=function(e){return!!se.TypeIsObject(e)&&void 0!==e._promise};var r,u=function(e){if(!se.IsConstructor(e))throw new TypeError("Bad promise constructor");var n=this;if(n.resolve=void 0,n.reject=void 0,n.promise=new e(function(e,t){if(void 0!==n.resolve||void 0!==n.reject)throw new TypeError("Bad Promise implementation!");n.resolve=e,n.reject=t}),!se.IsCallable(n.resolve)||!se.IsCallable(n.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&se.IsCallable(window.postMessage)&&(r=function(){var t=[],n="zero-timeout-message";return window.addEventListener("message",function(e){if(e.source===window&&e.data===n){if(e.stopPropagation(),0===t.length)return;M(t)()}},!0),function(e){I(t,e),window.postMessage(n,"*")}});var o,a,s=se.IsCallable(k.setImmediate)?k.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:(e=k.Promise,(t=e&&e.resolve&&e.resolve())&&function(e){return t.then(e)}||(se.IsCallable(r)?r():function(e){n(e,0)})),l=function(e){return e},f=function(e){throw e},p={},d=function(e,t,n){s(function(){c(e,t,n)})},c=function(e,t,n){var r,i;if(t===p)return e(n);try{r=e(n),i=t.resolve}catch(e){r=e,i=t.reject}i(r)},h=function(e,t){var n=e._promise,r=n.reactionLength;if(0<r&&(d(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,1<r))for(var i=1,o=0;i<r;i++,o+=3)d(n[o+0],n[o+2],t),e[o+0]=void 0,e[o+1]=void 0,e[o+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},m=function(e,t){var n=e._promise,r=n.reactionLength;if(0<r&&(d(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,1<r))for(var i=1,o=0;i<r;i++,o+=3)d(n[o+1],n[o+2],t),e[o+0]=void 0,e[o+1]=void 0,e[o+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},y=function(n){var r=!1;return{resolve:function(e){var t;if(!r){if(r=!0,e===n)return m(n,new TypeError("Self resolution"));if(!se.TypeIsObject(e))return h(n,e);try{t=e.then}catch(e){return m(n,e)}return se.IsCallable(t)?void s(function(){v(n,e,t)}):h(n,e)}},reject:function(e){return r?void 0:(r=!0,m(n,e))}}},g=function(e,t,n,r){e===a?x(e,t,n,r,p):x(e,t,n,r)},v=function(e,t,n){var r=y(e),i=r.resolve,o=r.reject;try{g(n,t,i,o)}catch(e){o(e)}},b=i=function(e){if(!(this instanceof i))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!se.IsCallable(e))throw new TypeError("not a valid resolver");var t=Oe(this,i,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=y(t),r=n.reject;try{e(n.resolve,r)}catch(e){r(e)}return t};o=b.prototype;var w=function(t,n,r,i){var o=!1;return function(e){o||(o=!0,n[t]=e,0!=--i.count)||(0,r.resolve)(n)}};return T(b,{all:function(e){if(!se.TypeIsObject(this))throw new TypeError("Promise is not object");var t,n,r=new u(this);try{return function(e,t,n){for(var r,i,o=e.iterator,a=[],s={count:1},c=0;;){try{if(!1===(r=se.IteratorStep(o))){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}a[c]=void 0;var u=t.resolve(i),l=w(c,a,n,s);s.count+=1,g(u.then,u,l,n.reject),c+=1}0==--s.count&&(0,n.resolve)(a);return n.promise}(n={iterator:t=se.GetIterator(e),done:!1},this,r)}catch(e){var i=e;if(n&&!n.done)try{se.IteratorClose(t,!0)}catch(e){i=e}return(0,r.reject)(i),r.promise}},race:function(e){if(!se.TypeIsObject(this))throw new TypeError("Promise is not object");var t,n,r=new u(this);try{return function(e,t,n){for(var r,i,o,a=e.iterator;;){try{if(!1===(r=se.IteratorStep(a))){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}o=t.resolve(i),g(o.then,o,n.resolve,n.reject)}return n.promise}(n={iterator:t=se.GetIterator(e),done:!1},this,r)}catch(e){var i=e;if(n&&!n.done)try{se.IteratorClose(t,!0)}catch(e){i=e}return(0,r.reject)(i),r.promise}},reject:function(e){if(!se.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new u(this);return(0,t.reject)(e),t.promise},resolve:function(e){if(!se.TypeIsObject(this))throw new TypeError("Bad promise constructor");if(se.IsPromise(e)&&e.constructor===this)return e;var t=new u(this);return(0,t.resolve)(e),t.promise}}),T(o,{catch:function(e){return this.then(null,e)},then:function(e,t){if(!se.IsPromise(this))throw new TypeError("not a promise");var n,r=se.SpeciesConstructor(this,b);n=2<arguments.length&&arguments[2]===p&&r===b?p:new u(r);var i,o=se.IsCallable(e)?e:l,a=se.IsCallable(t)?t:f,s=this._promise;if(0===s.state){if(0===s.reactionLength)s.fulfillReactionHandler0=o,s.rejectReactionHandler0=a,s.reactionCapability0=n;else{var c=3*(s.reactionLength-1);s[c+0]=o,s[c+1]=a,s[c+2]=n}s.reactionLength+=1}else if(1===s.state)i=s.result,d(o,n,i);else{if(2!==s.state)throw new TypeError("unexpected Promise state");i=s.result,d(a,n,i)}return n.promise}}),p=new u(b),a=o.then,b}}();if(k.Promise&&(delete k.Promise.accept,delete k.Promise.defer,delete k.Promise.prototype.chain),"function"==typeof dn){T(k,{Promise:dn});var hn=j(k.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),mn=!t(function(){k.Promise.reject(42).then(null,5).then(null,V)}),yn=t(function(){k.Promise.call(3,V)}),gn=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,V).then(null,V)}catch(e){return!0}return t===n}(k.Promise),vn=c&&(fn=0,pn=Object.defineProperty({},"then",{get:function(){fn+=1}}),Promise.resolve(pn),1===fn),bn=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};bn.prototype=Promise.prototype,bn.all=Promise.all;var wn=i(function(){return!!bn.all([1,2])});if(hn&&mn&&yn&&!gn&&vn&&!wn||(Promise=dn,te(k,"Promise",dn)),1!==Promise.all.length){var xn=Promise.all;te(Promise,"all",function(){return se.Call(xn,this,arguments)})}if(1!==Promise.race.length){var Tn=Promise.race;te(Promise,"race",function(){return se.Call(Tn,this,arguments)})}if(1!==Promise.resolve.length){var Sn=Promise.resolve;te(Promise,"resolve",function(){return se.Call(Sn,this,arguments)})}if(1!==Promise.reject.length){var On=Promise.reject;te(Promise,"reject",function(){return se.Call(On,this,arguments)})}vt(Promise,"all"),vt(Promise,"race"),vt(Promise,"resolve"),vt(Promise,"reject"),xe(Promise)}var jn,kn,Cn,An,En,Nn,_n=function(e){var t=a(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},In=_n(["z","a","bb"]),Pn=_n(["z",1,"a","3",2]);if(c){var Mn=function(e){return In?null==e?"^"+se.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Pn?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},Ln=function(){return Object.create?Object.create(null):{}},Fn=function(e,n,t){if(s(t)||Q(t))l(t,function(e){if(!se.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");n.set(e[0],e[1])});else if(t instanceof e)x(e.prototype.forEach,t,function(e,t){n.set(t,e)});else{var r,i;if(null!=t){if(i=n.set,!se.IsCallable(i))throw new TypeError("bad map");r=se.GetIterator(t)}if(void 0!==r)for(;;){var o=se.IteratorStep(r);if(!1===o)break;var a=o.value;try{if(!se.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");x(i,n,a[0],a[1])}catch(e){throw se.IteratorClose(r,!0),e}}}},Dn=function(e,t,n){if(s(n)||Q(n))l(n,function(e){t.add(e)});else if(n instanceof e)x(e.prototype.forEach,n,function(e){t.add(e)});else{var r,i;if(null!=n){if(i=t.add,!se.IsCallable(i))throw new TypeError("bad set");r=se.GetIterator(n)}if(void 0!==r)for(;;){var o=se.IteratorStep(r);if(!1===o)break;var a=o.value;try{x(i,t,a)}catch(e){throw se.IteratorClose(r,!0),e}}}},qn={Map:function(){var i={},a=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};a.prototype.isRemoved=function(){return this.key===i};var s=function(e,t){if(!se.TypeIsObject(e)||!e._es6map)throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+se.ToString(e))},e=function(e,t){s(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};Te(e.prototype={next:function(){var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return De();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,De(e);return this.i=void 0,De()}});var r,t=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var t=Oe(this,e,r,{_es6map:!0,_head:null,_storage:Ln(),_size:0}),n=new a(null,null);return n.next=n.prev=n,t._head=n,0<arguments.length&&Fn(e,t,arguments[0]),t};return g(r=t.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),T(r,{get:function(e){s(this,"get");var t=Mn(e);if(null!==t){var n=this._storage[t];return n?n.value:void 0}for(var r=this._head,i=r;(i=i.next)!==r;)if(se.SameValueZero(i.key,e))return i.value},has:function(e){s(this,"has");var t=Mn(e);if(null!==t)return void 0!==this._storage[t];for(var n=this._head,r=n;(r=r.next)!==n;)if(se.SameValueZero(r.key,e))return!0;return!1},set:function(e,t){s(this,"set");var n,r=this._head,i=r,o=Mn(e);if(null!==o){if(void 0!==this._storage[o])return this._storage[o].value=t,this;n=this._storage[o]=new a(e,t),i=r.prev}for(;(i=i.next)!==r;)if(se.SameValueZero(i.key,e))return i.value=t,this;return n=n||new a(e,t),se.SameValue(-0,e)&&(n.key=0),n.next=this._head,n.prev=this._head.prev,(n.prev.next=n).next.prev=n,this._size+=1,this},delete:function(e){s(this,"delete");var t=this._head,n=t,r=Mn(e);if(null!==r){if(void 0===this._storage[r])return!1;n=this._storage[r].prev,delete this._storage[r]}for(;(n=n.next)!==t;)if(se.SameValueZero(n.key,e))return n.key=n.value=i,n.prev.next=n.next,n.next.prev=n.prev,this._size-=1,!0;return!1},clear:function(){s(this,"clear"),this._size=0,this._storage=Ln();for(var e=this._head,t=e,n=t.next;(t=n)!==e;)t.key=t.value=i,n=t.next,t.next=t.prev=e;e.next=e.prev=e},keys:function(){return s(this,"keys"),new e(this,"key")},values:function(){return s(this,"values"),new e(this,"value")},entries:function(){return s(this,"entries"),new e(this,"key+value")},forEach:function(e){s(this,"forEach");for(var t=1<arguments.length?arguments[1]:null,n=this.entries(),r=n.next();!r.done;r=n.next())t?x(e,t,r.value[1],r.value[0],this):e(r.value[1],r.value[0],this)}}),Te(r,r.entries),t}(),Set:(An=function(e,t){if(!se.TypeIsObject(e)||(!(n=e)._es6set||void 0===n._storage))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+se.ToString(e));var n},En=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var t=Oe(this,e,Cn,{_es6set:!0,"[[SetData]]":null,_storage:Ln()});if(!t._es6set)throw new TypeError("bad set");return 0<arguments.length&&Dn(e,t,arguments[0]),t},Nn=function(e){if(!e["[[SetData]]"]){var n=e["[[SetData]]"]=new qn.Map;l(a(e._storage),function(e){var t=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?_(t,1):"n"===n?+_(t,1):"b"===n?"btrue"===t:+t}}(e);n.set(t,t)}),e["[[SetData]]"]=n}e._storage=null},g(Cn=En.prototype,"size",function(){return An(this,"size"),this._storage?a(this._storage).length:(Nn(this),this["[[SetData]]"].size)}),T(En.prototype,{has:function(e){var t;return An(this,"has"),this._storage&&null!==(t=Mn(e))?!!this._storage[t]:(Nn(this),this["[[SetData]]"].has(e))},add:function(e){var t;return An(this,"add"),this._storage&&null!==(t=Mn(e))?this._storage[t]=!0:(Nn(this),this["[[SetData]]"].set(e,e)),this},delete:function(e){var t;if(An(this,"delete"),this._storage&&null!==(t=Mn(e))){var n=W(this._storage,t);return delete this._storage[t]&&n}return Nn(this),this["[[SetData]]"].delete(e)},clear:function(){An(this,"clear"),this._storage&&(this._storage=Ln()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return An(this,"values"),Nn(this),this["[[SetData]]"].values()},entries:function(){return An(this,"entries"),Nn(this),this["[[SetData]]"].entries()},forEach:function(n){An(this,"forEach");var r=1<arguments.length?arguments[1]:null,i=this;Nn(i),this["[[SetData]]"].forEach(function(e,t){r?x(n,r,t,t,i):n(t,t,i)})}}),h(En.prototype,"keys",En.prototype.values,!0),Te(En.prototype,En.prototype.values),En)};if(k.Map||k.Set){if(!i(function(){return 2===new Map([[1,2]]).get(1)})){var Rn=k.Map;k.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new Rn;return 0<arguments.length&&Fn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,k.Map.prototype),t},k.Map.prototype=O(Rn.prototype),h(k.Map.prototype,"constructor",k.Map,!0),S(k.Map,Rn)}var Hn=new Map,$n=((kn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,kn),kn.get(0)===kn&&kn.get(-0)===kn&&kn.has(0)&&kn.has(-0)),Wn=Hn.set(1,2)===Hn;if(!$n||!Wn){var Vn=Map.prototype.set;te(Map.prototype,"set",function(e,t){return x(Vn,this,0===e?0:e,t),this})}if(!$n){var Bn=Map.prototype.get,zn=Map.prototype.has;T(Map.prototype,{get:function(e){return x(Bn,this,0===e?0:e)},has:function(e){return x(zn,this,0===e?0:e)}},!0),S(Map.prototype.get,Bn),S(Map.prototype.has,zn)}var Un=new Set,Gn=((jn=Un).delete(0),jn.add(-0),!jn.has(0)),Xn=Un.add(1)===Un;if(!Gn||!Xn){var Jn=Set.prototype.add;Set.prototype.add=function(e){return x(Jn,this,0===e?0:e),this},S(Set.prototype.add,Jn)}if(!Gn){var Yn=Set.prototype.has;Set.prototype.has=function(e){return x(Yn,this,0===e?0:e)},S(Set.prototype.has,Yn);var Zn=Set.prototype.delete;Set.prototype.delete=function(e){return x(Zn,this,0===e?0:e)},S(Set.prototype.delete,Zn)}var Qn=j(k.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Kn=Object.setPrototypeOf&&!Qn,er=function(){try{return!(k.Map()instanceof k.Map)}catch(e){return e instanceof TypeError}}();if(0!==k.Map.length||Kn||!er){var tr=k.Map;k.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new tr;return 0<arguments.length&&Fn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},k.Map.prototype=tr.prototype,h(k.Map.prototype,"constructor",k.Map,!0),S(k.Map,tr)}var nr=j(k.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),rr=Object.setPrototypeOf&&!nr,ir=function(){try{return!(k.Set()instanceof k.Set)}catch(e){return e instanceof TypeError}}();if(0!==k.Set.length||rr||!ir){var or=k.Set;k.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new or;return 0<arguments.length&&Dn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},k.Set.prototype=or.prototype,h(k.Set.prototype,"constructor",k.Set,!0),S(k.Set,or)}var ar=new k.Map,sr=!i(function(){return ar.keys().next().done});if(("function"!=typeof k.Map.prototype.clear||0!==(new k.Set).size||0!==ar.size||"function"!=typeof k.Map.prototype.keys||"function"!=typeof k.Set.prototype.keys||"function"!=typeof k.Map.prototype.forEach||"function"!=typeof k.Set.prototype.forEach||n(k.Map)||n(k.Set)||"function"!=typeof ar.keys().next||sr||!Qn)&&T(k,{Map:qn.Map,Set:qn.Set},!0),k.Set.prototype.keys!==k.Set.prototype.values&&h(k.Set.prototype,"keys",k.Set.prototype.values,!0),Te(Object.getPrototypeOf((new k.Map).keys())),Te(Object.getPrototypeOf((new k.Set).keys())),u&&"has"!==k.Set.prototype.has.name){var cr=k.Set.prototype.has;te(k.Set.prototype,"has",function(e){return x(cr,this,e)})}}T(k,qn),xe(k.Map),xe(k.Set)}var ur=function(e){if(!se.TypeIsObject(e))throw new TypeError("target must be an object")},lr={apply:function(){return se.Call(se.Call,null,arguments)},construct:function(e,t){if(!se.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=2<arguments.length?arguments[2]:e;if(!se.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return se.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(ur(e),c){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return ur(e),t in e}};Object.getOwnPropertyNames&&Object.assign(lr,{ownKeys:function(e){ur(e);var t=Object.getOwnPropertyNames(e);return se.IsCallable(Object.getOwnPropertySymbols)&&P(t,Object.getOwnPropertySymbols(e)),t}});var fr=function(e){return!t(e)};if(Object.preventExtensions&&Object.assign(lr,{isExtensible:function(e){return ur(e),Object.isExtensible(e)},preventExtensions:function(e){return ur(e),fr(function(){Object.preventExtensions(e)})}}),c){var pr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var i=Object.getPrototypeOf(e);return null===i?void 0:pr(i,t,n)}return"value"in r?r.value:r.get?se.Call(r.get,n):void 0},dr=function(e,t,n,r){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){var o=Object.getPrototypeOf(e);if(null!==o)return dr(o,t,n,r);i={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in i?!!i.writable&&(!!se.TypeIsObject(r)&&(Object.getOwnPropertyDescriptor(r,t)?oe.defineProperty(r,t,{value:n}):oe.defineProperty(r,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))):!!i.set&&(x(i.set,r,n),!0)};Object.assign(lr,{defineProperty:function(e,t,n){return ur(e),fr(function(){Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return ur(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){ur(e);var n=2<arguments.length?arguments[2]:e;return pr(e,t,n)},set:function(e,t,n){ur(e);var r=3<arguments.length?arguments[3]:e;return dr(e,t,n,r)}})}if(Object.getPrototypeOf){var hr=Object.getPrototypeOf;lr.getPrototypeOf=function(e){return ur(e),hr(e)}}if(Object.setPrototypeOf&&lr.getPrototypeOf){Object.assign(lr,{setPrototypeOf:function(e,t){if(ur(e),null!==t&&!se.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===oe.getPrototypeOf(e)||!(oe.isExtensible&&!oe.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=lr.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(lr).forEach(function(e){var t,n;n=lr[t=e],se.IsCallable(k.Reflect[t])?i(function(){return k.Reflect[t](1),k.Reflect[t](NaN),k.Reflect[t](!0),!0})&&te(k.Reflect,t,n):h(k.Reflect,t,n)});var mr=k.Reflect.getPrototypeOf;if(u&&mr&&"getPrototypeOf"!==mr.name&&te(k.Reflect,"getPrototypeOf",function(e){return x(mr,k.Reflect,e)}),k.Reflect.setPrototypeOf&&i(function(){return k.Reflect.setPrototypeOf(1,{}),!0})&&te(k.Reflect,"setPrototypeOf",lr.setPrototypeOf),k.Reflect.defineProperty&&(i(function(){var e=!k.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!k.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||te(k.Reflect,"defineProperty",lr.defineProperty)),k.Reflect.construct&&(i(function(){var e=function(){};return k.Reflect.construct(function(){},[],e)instanceof e})||te(k.Reflect,"construct",lr.construct)),"Invalid Date"!==String(new Date(NaN))){var yr=Date.prototype.toString;te(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":se.Call(yr,this)})}var gr={anchor:function(e){return se.CreateHTML(this,"a","name",e)},big:function(){return se.CreateHTML(this,"big","","")},blink:function(){return se.CreateHTML(this,"blink","","")},bold:function(){return se.CreateHTML(this,"b","","")},fixed:function(){return se.CreateHTML(this,"tt","","")},fontcolor:function(e){return se.CreateHTML(this,"font","color",e)},fontsize:function(e){return se.CreateHTML(this,"font","size",e)},italics:function(){return se.CreateHTML(this,"i","","")},link:function(e){return se.CreateHTML(this,"a","href",e)},small:function(){return se.CreateHTML(this,"small","","")},strike:function(){return se.CreateHTML(this,"strike","","")},sub:function(){return se.CreateHTML(this,"sub","","")},sup:function(){return se.CreateHTML(this,"sup","","")}};l(Object.keys(gr),function(e){var t=String.prototype[e],n=!1;if(se.IsCallable(t)){var r=x(t,"",' " '),i=N([],r.match(/"/g)).length;n=r!==r.toLowerCase()||2<i}else n=!0;n&&te(String.prototype,e,gr[e])});var vr=function(){if(!ne)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(B()))return!0;if("[null]"!==e([B()]))return!0;var t={a:B()};return t[B()]=!0,"{}"!==e(t)}(),br=i(function(){return!ne||"{}"===JSON.stringify(Object(B()))&&"[{}]"===JSON.stringify([Object(B())])});if(vr||!br){var wr=JSON.stringify;te(JSON,"stringify",function(e){if("symbol"!==(void 0===e?"undefined":_typeof(e))){var t;1<arguments.length&&(t=arguments[1]);var n=[e];if(s(t))n.push(t);else{var r=se.IsCallable(t)?t:null;n.push(function(e,t){var n=r?x(r,this,e,t):t;return"symbol"!==(void 0===n?"undefined":_typeof(n))?ee(n)?wt({})(n):n:void 0})}return 2<arguments.length&&n.push(arguments[2]),wr.apply(this,n)}})}return k},"function"==typeof define&&define.amd?define("es6-shim",VI):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=VI():UI.returnExports=VI(),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){return 1===this.length&&this[0]instanceof Text?[this[0]]:Array.from(this.add(this.contents().add(this.find("*").contents())).filter(function(){return this instanceof Text})).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){function r(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function s(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function i(e){for(var t=e.innerText,n=[],r=0,i=r,o=t.length,a=null;r<o;){for(var s=t.slice(r),c=(n.length?n[0]:e).innerMode,u=0,l=c.length;u<l;u+=1){var f=T[c[u]];if(v=s,b=a,w=i<r,!((g=f).canFollow&&!(-1<g.canFollow.indexOf(b&&b.type))||g.cannotFollow&&(-1!==g.cannotFollow.indexOf(b&&b.type)||-1<g.cannotFollow.indexOf("text")&&w)||g.peek&&g.peek.toLowerCase()!==v.slice(0,g.peek.length).toLowerCase())&&f.pattern.test(s)){var p=f.pattern.exec(s),d=f.fn(p),h=!1,m=0;if(d.matches){for(;m<n.length;m+=1){var y=n[m].type;if(y in d.matches){h=!0;break}0===y.indexOf("verbatim")&&(y="verbatimOpener"),d.cannotCross&&-1<d.cannotCross.indexOf(y)&&(m=n.length-1)}if(m>=n.length&&!d.isFront)continue}i<r&&e.addChild({type:"text",text:t.slice(i,r),innerMode:c}),i=r+=(a=e.addChild(d)).text.length,h&&(x(e,a,n[m]),n=n.slice(m+1)),a.isFrontToken()&&n.unshift(a);break}}u===l&&(r+=1,null===a&&(a={type:"text"}))}var g,v,b,w;for(i<r&&e.addChild({type:"text",text:t.slice(i,r),innerMode:(n.length?n[0]:e).innerMode});0<n.length;)n.shift().demote();return e}function x(e,t,n){var r=e.children.indexOf(t),i=e.children.indexOf(n);t.children=e.children.splice(i+1,r-(i+1)),t.children.forEach(function(e){s(t,e)}),t.type=t.matches[n.type],t.innerText="";for(var o=0,a=t.children.length;o<a;o++)t.innerText+=t.children[o].text;t.start=n.start,t.text=n.text+t.innerText+t.text,Object.keys(n).forEach(function(e){Object.hasOwnProperty.call(t,e)||(t[e]=n[e])}),t.isFront&&(t.isFront=!1),e.children.splice(i,1),s(e,t)}var n=void 0,T={};r.prototype={constructor:r,addChild:function(e){var t=this.lastChildEnd(),n=new r({start:t,end:e.text&&t+e.text.length,children:[]},e);return n.innerText&&i(n),this.children.push(n),s(this,n),n},lastChild:function(){return this.children&&this.children[this.children.length-1]||null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(n){return n<this.start||n>=this.end?null:this.children?this.children.reduce(function(e,t){return e||(n>=t.start&&n<t.end?t:null)},null):this},everyLeaf:function(n){return this.children&&0!==this.children.length?this.children.reduce(function(e,t){return t.everyLeaf(n)&&e},!0):!!n(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"→"+this.end+")";return this.children&&0<this.children.length&&(e+="["+this.children+"]"),e}},n={lex:function(e,t){return i(new r({type:"root",start:t||0,end:e.length,text:e,innerText:e,children:[],childAt:{},innerMode:n.modes.start}))},rules:T,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=n:"function"==typeof define&&define.amd?define("lexer",[],function(){return n}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=n):this.TwineLexer=n}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){function n(t){return t&&"object"===(void 0===t?"undefined":_typeof(t))?(Object.keys(t).forEach(function(e){t[e]=n(t[e])}),t):(t+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function e(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var t,r=e("?:"),i=e("?!"),o=e("?="),a="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=a.replace("*","+"),c="\\b",u="\\\\\\n\\\\?|\\n\\\\",l="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",f=l.replace("\\-",""),p=r("\\n","$"),d="("+r(u,"[^\\n]")+"+)",h=a+"(\\*+)"+s+d+p,m=a+"((?:0\\.)+)"+s+d+p,y=a+"-{3,}"+a+p,g=a+"(#{1,6})"+a+d+p,v=a+"(==+>|<=+|=+><=+|<==+>)"+a+p,b=a+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+a+p,w={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(n).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+i("\\]"))+"+)"},x=f+"*"+f.replace("\\w","a-zA-Z")+f+"*",T="\\$("+x+")",S="'s"+s+"("+x+")",O="("+x+")"+s+"of"+c+i("it\\b"),j="'s"+s,k=r("it","time")+c,C="its"+s+"("+x+")",A="its"+s,E="("+x+")"+s+"of"+s+"it"+c,N="of\\b"+s+"it"+c,_={opener:"\\(",name:"("+r(l+"+",T)+"):"+i("\\/"),closer:"\\)"},I=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b"),P="[a-zA-Z][\\w\\-]*",M="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",L="(<|\\()("+l+"+)\\|",F="_("+x+")"+c,D="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+i("m?s")+c;w.main=w.opener+r(w.text+w.rightSeparator,w.text.replace("*","*?")+w.leftSeparator)+w.text,t={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:l,anyLetterStrict:f,whitespace:s,escapedLine:u,br:"\\n(?!\\\\)",commentFront:"\x3c!--",commentBack:"--\x3e",tag:"<\\/?"+P+M+">",tagPeek:"<",scriptStyleTag:"<("+r("script","style")+")"+M+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:y,heading:g,align:v,column:b,bulleted:h,numbered:m,strikeOpener:n("~~"),italicOpener:n("//"),boldOpener:n("''"),supOpener:n("^^"),strongFront:n("**"),strongBack:n("**"),emFront:n("*"),emBack:n("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\[",hookPrependedFront:"\\|([\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]+)(>|\\))\\[",hookFront:"\\[",hookBack:"\\]"+i(L),hookAppendedBack:"\\]"+L,passageLink:w.main+w.closer,passageLinkPeek:"[[",legacyLink:w.opener+w.legacyText+w.legacySeparator+w.legacyText+w.closer,legacyLinkPeek:"[[",simpleLink:w.opener+w.legacyText+w.closer,simpleLinkPeek:"[[",macroFront:_.opener+o(_.name),macroFrontPeek:"(",macroName:_.name,groupingFront:"\\("+i(_.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",twine1MacroPeek:"<<",property:S,propertyPeek:"'s",belongingProperty:O,possessiveOperator:j,belongingOperator:"of\\b",belongingOperatorPeek:"of",itsOperator:A,itsOperatorPeek:"its",belongingItOperator:N,belongingItOperatorPeek:"of",variable:T,variablePeek:"$",tempVariable:F,tempVariablePeek:"_",hookRef:"\\?("+l+"+)\\b",hookRefPeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),number:D,boolean:r("true","false")+c,identifier:k,itsProperty:C,itsPropertyPeek:"its",belongingItProperty:E,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',is:"is"+i(s+"not",s+"in",s+"<",s+">")+c,isNot:"is"+s+"not"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+a+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",addition:n("+")+i("="),subtraction:n("-")+i("="),multiplication:n("*")+i("="),division:r("/","%")+i("="),comma:",",spread:"\\.\\.\\."+i("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",via:"via\\b",with:"with\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",incorrectOperator:I},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t:"function"==typeof define&&define.amd?define("patterns",[],function(){return t}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=t):this.Patterns=t}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){function n(e){return Object.freeze({lex:function(e){function t(r){return r=r||"innerText",function(e){var t=e.reduceRight(function(e,t,n){return e||(n?t:"")},""),n={};return n[r]=t,n}}function n(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}function r(i,e){return Object.keys(e).forEach(function(n){var r=e[n].fn;e[n].fn=function(e){var t=r(e);return t.text||(t.text=e[0]),t.type||(t.type=n),t.innerMode||(t.innerMode=i),t}}),e}var i=Object.bind(0,null),o=[],a=[],s=r(o,{hr:{fn:i},bulleted:{fn:function(e){return{depth:e[1].length,innerText:e[2]}}},numbered:{fn:function(e){return{depth:e[1].length/2,innerText:e[2]}}},heading:{fn:function(e){return{depth:e[1].length,innerText:e[2]}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?25===(t=Math.round(r/(n.length-2)*50))&&(t="center"):"<"===n[0]&&">"===n.slice(-1)?t="justify":-1<n.indexOf(">")?t="right":-1<n.indexOf("<")&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});Object.keys(s).forEach(function(e){s[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align"],s[e].cannotFollow=["text"]});var c=r(o,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1 and SugarCube macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:n("boldOpener","bold")},italicOpener:{fn:n("italicOpener","italic")},strikeOpener:{fn:n("strikeOpener","strike")},supOpener:{fn:n("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:i},tag:{fn:i},url:{fn:i},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return{type:(n["verbatim"+t]="verbatim")+t,isFront:!0,matches:n}}},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:i},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2]}}},br:{fn:i}}),u=r(a,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1],n=e[2],r=e[3];return{type:"twineLink",innerText:n?r:t,passage:t?r:n}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[1]}}},variable:{fn:t("name")},tempVariable:{fn:t("name")}}),l=r(a,Object.assign({macroName:{canFollow:["macroFront"],fn:function(e){return e[2]?{isMethodCall:!0,innerText:e[2]}:{isMethodCall:!1}}},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:t("name"),canFollow:["variable","hookRef","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","boolean","number"]},possessiveOperator:{fn:i},itsProperty:{cannotFollow:["text"],fn:t("name")},itsOperator:{cannotFollow:["text"],fn:i},belongingItProperty:{cannotFollow:["text"],fn:t("name")},belongingItOperator:{cannotFollow:["text"],fn:i},belongingProperty:{cannotFollow:["text"],fn:t("name")},belongingOperator:{cannotFollow:["text"],fn:i},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"}}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"}}}},hookRef:{fn:t("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},colour:{cannotFollow:["text"],fn:function(e){var t=e[0].toLowerCase(),n={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return{colour:Object.hasOwnProperty.call(n,t)?"#"+n[t]:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},addition:{fn:i},subtraction:{fn:i},multiplication:{fn:i},division:{fn:i},inequality:{fn:function(e){return{operator:e[2],negate:-1<e[1].indexOf("not")}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:t("name"),cannotFollow:["text"]},whitespace:{fn:i,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",are:"is",x:"*"}[e[0].toLowerCase()];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'."}},cannotFollow:"text"}},["boolean","is","to","into","where","via","with","making","each","and","or","not","isNot","contains","isIn"].reduce(function(e,t){return e[t]={fn:i,cannotFollow:["text"]},e},{}),["comma","spread","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:i},e},{})));o.push.apply(o,_toConsumableArray(Object.keys(s)).concat(_toConsumableArray(Object.keys(u)),_toConsumableArray(Object.keys(c)))),a.push.apply(a,_toConsumableArray(Object.keys(u)).concat(_toConsumableArray(Object.keys(l))));var f=Object.assign({},s,c,u,l);return Object.keys(f).forEach(function(e){var t=p[e];f[e].pattern="string"!=typeof t?t:new RegExp("^(?:"+t+")","i"),p[e+"Peek"]&&(f[e].peek=p[e+"Peek"])}),Object.assign(e.rules,f),e.modes.start=e.modes.markup=o,e.modes.macro=a,e}(e).lex,Patterns:p})}var p=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},"object"===("undefined"==typeof module?"undefined":_typeof(module))?(p=require("./patterns"),module.exports=n(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(e,t){return p=t,n(e)}):this&&this.loaded&&this.modules?(p=this.modules.Patterns,this.modules.Markup=n(this.modules.Lexer)):(p=this.Patterns,this.TwineMarkup=n(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/selectors",[],function(){return Object.freeze({passage:"tw-passage",story:"tw-story",sidebar:"tw-sidebar",internalLink:"tw-link",brokenLink:"tw-broken-link",hook:"tw-hook",enchantment:"tw-enchantment",expression:"tw-expression",script:"[role=script]",stylesheet:"[role=stylesheet]",storyData:"tw-storydata",passageData:"tw-passagedata",collapsed:"tw-collapsed"})}),define("utils/polyfills",[],function(){var o=Array.prototype;"function"!=typeof o.includes&&(o.includes=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(e)&&Number.isFinite(t)&&void 0!==e)return-1<o.indexOf.call(this,e,t);var n=Object(this),r=parseInt(n.length);if(r<=0)return!1;for(var i=0<=t?t:Math.max(0,r+t);i<r;){if(Object.is(e,n[i]))return!0;i+=1}return!1})}),define("utils",["jquery","markup","utils/selectors","utils/polyfills"],function(s,e,c){function u(e,t){var n=o[t];if(!n[e]){var r=s("<p>").appendTo(document.body).attr("data-t8n",e).addClass(t);n[e]=f.cssTimeUnit(r.css("animation-duration"))+f.cssTimeUnit(r.css("animation-delay")),r.remove()}return n[e]}var i={configurable:0,writable:0},o={"transition-in":Object.create(null),"transition-out":Object.create(null)},n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage".split(","),r="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error".split(","),l=["audio"],f=void 0,t=void 0;return f={lockProperty:function(e,t,n){var r=Object.create(i);return n&&(r.value=n),Object.defineProperty(e,t,r),e},toJSLiteral:function(e){return e instanceof Map?"(new Map("+f.toJSLiteral([].concat(_toConsumableArray(e.entries())))+"))":e instanceof Set?"(new Set("+f.toJSLiteral([].concat(_toConsumableArray(e.values())))+"))":JSON.stringify(e)},cssTimeUnit:function(e){return"ms"===(e=e.toLowerCase()).slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)&&1e3*+e.slice(0,-1)||0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(1<e?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},childrenProbablyInline:function(e){var t=[];return Array.prototype.every.call(e.find("*"),function(e){return!(!e.hidden&&!/none|inline/.test(e.style.display))||!n.includes(e.tagName.toLowerCase())&&!/none|inline/.test(e.style.display)&&(r.includes(e.tagName.toLowerCase())||t.push(e),!0)})&&t.every(function(e){return/none|inline/.test(e.style.display)})},transitionReplace:function(e,t,n){var r=e.closest(c.hook);0<r.length&&(e=r);var i=s("<tw-transition-container>").css("position","relative");i.insertBefore(e.first());var o=void 0;t&&(o=s("<tw-transition-container>").appendTo(i),t.appendTo(o));var a=s("<tw-transition-container>").css("position","absolute").prependTo(i);e.detach().appendTo(a),f.transitionOut(a,n),t&&f.transitionIn(o,n,function(){o.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){function r(){e.remove()}var i=f.childrenProbablyInline(e);(1<e.length||!i||!["tw-hook","tw-passage"].includes(e.tag()))&&(e=e.wrapAll("<tw-transition-container>").parent()),e.attr("data-t8n",t).addClass("transition-out"),f.childrenProbablyInline(e)&&e.css("display","inline-block"),"number"==typeof n&&e.css("animation-duration",n+"ms");var o=n||u(t,"transition-out");o?window.setTimeout(r,o):r()},transitionIn:function(t,e,n){function r(){var e=0===t.findAndFilter(l.join(",")).length;o&&e?t.contents().unwrap():t.removeClass("transition-in").removeAttr("data-t8n")}var i=f.childrenProbablyInline(t),o=1<t.length||!i||!["tw-hook","tw-passage"].includes(t.tag());o&&(t=t.wrapAll("<tw-transition-container>").parent()),t.attr("data-t8n",e).addClass("transition-in"),"number"==typeof n&&t.css("animation-duration",n+"ms"),f.childrenProbablyInline(t)&&t.css("display","inline-block");var a=n||u(e,"transition-in");a?window.setTimeout(r,a):r()},$:function(e,t){return s(e,t||f.storyElement).not(".transition-out, .transition-out *")},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},get storyElement(){return t}},s(function(){return t=s(c.story)}),Object.freeze(f)}),define("passages",["jquery","utils","utils/selectors"],function(t,e,n){function r(e){return Object.assign(new Map([["source",i(e.html())],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"passage datamap",TwineScript_ObjectName:"a passage datamap"})}var i=e.unescape,o=Object.assign(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(n){var r=[];return this.forEach(function(e){var t=e instanceof Map&&e.get("tags");Array.isArray(t)&&t.includes(n)&&r.push(e)}),r.sort(function(e,t){return e.get("name")>t.get("name")})},create:r});return t(function(){Array.from(t(n.storyData+" > "+n.passageData)).forEach(function(e){e=t(e),o.set(e.attr("name"),new r(e))})}),o}),define("datatypes/hookset",["jquery","utils","utils/selectors","markup"],function(a,s,c,e){function f(e,t,n){var r=e.textContent.length;if(!(r<=t)){var i=void 0,o=[i=0===t?e:e.splitText(t)];return n&&(n<=0&&(n=r-n),n<r&&o.push(i.splitText(n-t))),o}}function u(e,t,n){var r=function e(t,n){var r=[],i="",o=[];if(!t.length||!n)return o;for(;0<t.length;){r.push(t[0]),i+=t[0].textContent,t.shift();var a=i.indexOf(n);if(-1<a){for(var s,c=i.length-(a+n.length);a>=r[0].textContent.length;)a-=r[0].textContent.length,r.shift();if(1===r.length){var u=f(r[0],a,a+n.length);o.push(u[0]),u[1]&&t.unshift(u[1]);break}o.push(f(r[0],a,r[0].length)[0]),(s=o).push.apply(s,_toConsumableArray(r.slice(1,-1)));var l=f(r[r.length-1],0,r[r.length-1].textContent.length-c);o.push(l[0]),l[1]&&t.unshift(l[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))}(t.textNodes(),e),i=a();return r.forEach(function(e){i=i.add(a(e).wrapAll(n))}),i.parent()}function l(e){var t=e.dom,n=a();this.prev&&(n=n.add(l.call(this.prev,{dom:t})));var r,i=function(n,e){return Array.isArray(e)?e.reduce(function(e,t){return e.add(n.get(t))},a()):a(n.get(e))};if(this.selector){var o;o=this.selector.match("^"+p.hookRef+"$")?t.add(t.parentsUntil(s.storyElement.parent())).findAndFilter((r=this.selector,r=s.insensitiveName(r).replace(/\?/g,"").replace(/"/g,"&quot;"),c.hook+'[name="'+r+'"]'+({page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[r]||""))):u(this.selector,t,"<tw-pseudo-hook>"),n=n.add(this.properties.length?this.properties.reduce(i,o):o)}return this.base&&(n=n.add(this.properties.reduce(i,l.call(this.base,{dom:t})))),n}function o(e){if(!e)return[];var t=e.selector,n=e.base,r=e.properties,i=e.prev;return[JSON.stringify([s.insensitiveName(t)||"",o(n),[].concat(_toConsumableArray(r)).sort()])].concat(_toConsumableArray(o(i))).sort()}var p=e.Patterns,i=Object.freeze({forEach:function(e,t){var n=l.call(this,e).each(function(e){t(a(this),e)});return function(e){var t=e.dom;s.$("tw-pseudo-hook",t).contents().unwrap().parent().each(function(){this.normalize()})}.call(this,e),n},get TwineScript_ObjectName(){return 0<this.properties.length||this.prev?"a complex hook name":this.selector+" (a hook name)"},TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,"TwineScript_+":function(e){var t=e.TwineScript_Clone();return t.prev=this,t},TwineScript_is:function(e){return o(this)+""==o(e)+""},TwineScript_GetElement:function(e){return i.create(void 0,this,[e],void 0)},TwineScript_Clone:function(){return i.create(this.selector,this.base,this.properties,this.prev)},create:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;return Object.assign(Object.create(this||i),{selector:e,base:t,properties:n,prev:r})},from:function(e){return i.isPrototypeOf(e)?e:i.create(e)}});return i}),define("internaltypes/twineerror",["jquery","utils"],function(i,e){var r=e.impossible,o=e.escape,a={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",keyword:"I was given a keyword in a way that I didn't understand.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written."},s={create:function(e,t,n){return t||r("TwineError.create","called with only 1 string."),n||e in a||r("TwineError.create","no error explanation given"),Object.assign(Object.create(this),{type:e,message:t,explanation:n})},fromError:function(e){return s.create("javascript","☕ "+e.message)},containsError:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e||(t instanceof Error?t:s.isPrototypeOf(t)?t:!!Array.isArray(t)&&s.containsError.apply(s,_toConsumableArray(t)))},!1)},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(e){e=e||"";var t=i("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+o(e)+"'>"+o(this.message)+"</tw-error>"),n=i("<tw-error-explanation>").text(this.explanation||a[this.type]).hide(),r=i("<tw-error-explanation-button tabindex=0>").html("<span class='folddown-arrowhead'>&#9658;</span>");return r.on("click",function(){n.toggle(),r.children(".folddown-arrowhead").css("transform","rotate("+(n.is(":visible")?"90deg":"0deg")+")")}),t.append(r).append(n),t}};return s}),define("utils/operationutils",["utils","datatypes/hookset","internaltypes/twineerror"],function(e,t,a){function r(e){return!!e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)}function s(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":"string"==typeof e?"string":e&&"object"===(void 0===e?"undefined":_typeof(e))?"object":""}function c(e){if(!r(e))return e;if("function"==typeof e.TwineScript_Clone)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if("function"==typeof e)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return u("OperationUtils.clone","The value "+(e.toSource?e.toSource():e)+" cannot be cloned!"),e}function i(e){return r(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":"boolean"==typeof e?"the boolean value '"+e+"'":"string"==typeof e||"number"==typeof e?"the "+(void 0===e?"undefined":_typeof(e))+" "+n(e):void 0===e?"an empty variable":"...whatever this is"}function o(t,n){return"object"!==(void 0===t?"undefined":_typeof(t))&&"object"!==(void 0===n?"undefined":_typeof(n))?t===n:Array.isArray(t)&&Array.isArray(n)?t.length===n.length&&t.every(function(e,t){return o(n[t],e)}):t instanceof Map&&n instanceof Map?o(Array.from(t.entries()).sort(),Array.from(n.entries()).sort()):t instanceof Set&&n instanceof Set?o([].concat(_toConsumableArray(t)),[].concat(_toConsumableArray(n))):t&&"function"==typeof t.TwineScript_is?t.TwineScript_is(n):t&&"object"===(void 0===t?"undefined":_typeof(t))&&n&&"object"===(void 0===n?"undefined":_typeof(n))&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(n)===Object.prototype?o(Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]}),Object.getOwnPropertyNames(n).map(function(e){return[e,n[e]]})):Object.is(t,n)}var u=e.impossible,n=e.toJSLiteral;return Object.freeze({isObject:r,singleTypeCheck:function t(n,e){if(null===e)return void 0===n;if(e.innerType){if("optional"===e.pattern||"zero or more"===e.pattern)return void 0===n||t(n,e.innerType);if("either"===e.pattern)return e.innerType.some(function(e){return t(n,e)});if("lambda"===e.pattern&&t(n,e.innerType))return"string"!=typeof e.clauses&&u("singleTypeCheck","lambda signature had non-string clauses"),e.clauses.includes("where")==="where"in n&&e.clauses.includes("making")==="making"in n&&e.clauses.includes("via")==="via"in n&&e.clauses.includes("with")==="with"in n;if("wrapped"===e.pattern)return t(n,e.innerType)}return(void 0===e||void 0!==n)&&("anything"===e.TwineScript_TypeName&&void 0!==n&&!n.TwineScript_Unstorable||(e===String?"string"==typeof n:e===Boolean?"boolean"==typeof n:e===parseInt?"number"==typeof n&&!Number.isNaN(n)&&!(n+"").includes("."):e===Number?"number"==typeof n&&!Number.isNaN(n):e===Array?Array.isArray(n):e===Map||e===Set?n instanceof e:Object.isPrototypeOf.call(e,n)))},isValidDatamapName:function(e,t){if(e instanceof Map||u("isValidDatamapName","called with non-Map"),"string"!=typeof t&&"number"!=typeof t)return a.create("property","Only strings and numbers can be used as data names for "+i(e)+", not "+i(t)+".");var n="string"==typeof t?+t:""+t;return!(!Number.isNaN(n)&&e.has(n))||a.create("property","You mustn't use both "+i(t)+" and "+i(n)+" as data names in the same datamap.")},collectionType:s,isSequential:function(e){return"string"==typeof e||Array.isArray(e)||t.isPrototypeOf(e)},clone:c,coerceToString:function(e,t,n){return"string"==typeof t&&r(n)&&"TwineScript_ToString"in n?e(t,n.TwineScript_ToString()):!!("string"==typeof n&&r(t)&&"TwineScript_ToString"in t)&&e(t.TwineScript_ToString(),n)},objectName:i,typeName:function e(t){return t.innerType?"either"===t.pattern?(Array.isArray(t.innerType)||u("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(an optional) "+e(t.innerType):e(t.innerType):t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a non-fractional number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":r(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:i(t)},is:o,contains:function(e,t){if(e){if("string"==typeof e)return e.includes(t);if(Array.isArray(e))return e.some(function(e){return o(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return o(e,t)})}return a.create("operation",i(e)+" cannot contain any values, let alone "+i(t))},subset:function e(t,n,r){if(!n||!r)return a.create("macrocall","The sub"+s(t)+" index values must not be 0 or NaN.");if(n<0&&(n=t.length+n+1),r<0&&(r=t.length+r+1),r<n)return e(t,r,n);var i="string"==typeof t;i&&(t=Array.from(t));var o=t.slice(0<n?n-1:n,r).map(c);return i?o.join(""):o},printBuiltinValue:function o(e){return a.containsError(e)?e:e&&"function"==typeof e.TwineScript_Print?e.TwineScript_Print():e instanceof Map?(e=Array.from(e.entries()),a.containsError(e)?e:e.reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1];return e+"<tr><td>`"+o(r)+"`</td><td>`"+o(i)+"`</td></tr>"},"<table class=datamap>")+"</table>"):e instanceof Set?Array.from(e.values()).map(o)+"":Array.isArray(e)?e.map(o)+"":r(e)?a.create("unimplemented","I don't know how to print this value yet."):e+""},numericIndex:/^(?:[1-9]\d*|0)$/,unique:function(t,e,n){return!n.slice(e+1).some(function(e){return o(t,e)})}})}),define("twinescript/compiler",["utils"],function(e){function a(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return NaN}function O(i,e){var o=[];return i.length&&[["error"],["comma"],["spread"],["to"],["into"],{rightAssociative:["where","via"]},{rightAssociative:["with","making","each"]},["augmentedAssign"],["and","or"],["is","isNot"],["contains","isIn"],["inequality"],["addition","subtraction"],["multiplication","division"],["not"],["belongingProperty"],["belongingOperator","belongingItOperator"],{rightAssociative:["property"]},{rightAssociative:["itsProperty"]},["belongingItProperty"],{rightAssociative:["possessiveOperator","itsOperator"]},["twineLink"],["macro"],["grouping"]]["most"===e?"reverse":"valueOf"]().some(function(e){var t,n,r;return t=e.rightAssociative?(n=i,r=e.rightAssociative,n.length-1-a.apply(void 0,[[].concat(_toConsumableArray(n)).reverse(),r])):a(i,e),!Number.isNaN(t)&&-1<t?(o=[i[t],t],!0):void 0}),o}function j(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function k(e){return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",isIn:"contains",is:"isNot",isNot:"is"}[j(e)]}var C=e.toJSLiteral,A=e.impossible;return function l(f){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},p=e.isVarRef,t=e.whitespaceError,d=e.elidedComparison;if(!(f=[].concat(f)).length)return p&&t?"TwineError.create('operation',"+C(t)+")":"";var h=f[0];if(1===f.length){if("identifier"===h.type)return p?"VarRef.create(Operations.Identifiers,"+C(h.text)+")":" Operations.Identifiers."+h.text.toLowerCase()+" ";if("variable"===h.type)return"VarRef.create(State.variables,"+C(h.name)+")"+(p?"":".get()");if("tempVariable"===h.type)return"VarRef.create(section.stack[0].tempVariables,"+C(h.name)+")"+(p?"":".get()");if("hookRef"===h.type)return" HookSet.create('?"+h.name+"') ";if("string"===h.type)return h.text.replace(/\n/g,"\\n");if("colour"===h.type)return"Colour.create("+C(h.colour)+")";if("root"===h.type)return l(h.children);if("whitespace"===h.type&&p&&t)return"TwineError.create('operation',"+C(t)+")"}var m,n=O(f,"least"),r=_slicedToArray(n,2);h=r[0],m=r[1];var y=(h||{}).type,i=function(e){return{isVarRef:!0,whitespaceError:"I need usable data to be on the "+e+' of "'+h.text+'".'}},g=void 0,v=void 0,b=void 0,w=void 0,o=void 0,a=void 0,s=!0,c=!0,u=!1;if(y){if("error"===y)return"TwineError.create('syntax',"+C(h.message)+")";if("comma"===y)c=!(b=",");else if("spread"===y)b="Operations.makeSpreader(",v=l(f.slice(m+1))+")",s=!1;else if("to"===y)o="to",v=l(f.slice(m+1),i("right")),g="Operations.setIt("+l(f.slice(0,m),i("left"))+")";else if("into"===y)o="into",v=l(f.slice(0,m),i("left")),g="Operations.setIt("+l(f.slice(m+1),i("right"))+")";else if("where"===y||"via"===y)g="Lambda.create("+(l(f.slice(0,m),{isVarRef:!0,whitespaceError:null}).trim()||"undefined")+",",b=C(h.type)+",",v=C(l(f.slice(m+1)))+")";else if("with"===y||"making"===y||"each"===y){var x=f.slice(m+1);![2,3].includes(x.length)||"whitespace"!==x[0].type||"tempVariable"!==x[1].type||x[2]&&"whitespace"!==x[2].type?(g="TwineError.create('operation','I need a temporary variable to the right of \\'",b=h.type,v="\\'.')"):"each"===y?(g="Lambda.create(",b=l(x,i("right")).trim(),v=",'where','true')"):(g="Lambda.create("+(l(f.slice(0,m),{isVarRef:!0,whitespaceError:null}).trim()||"undefined")+",",b=C(h.type)+",",v=C(x[1].name)+")")}else if("augmentedAssign"===y)o=h.operator,g=l(f.slice(0,m),i("left")),v="Operations['"+o+"']("+l(f.slice(0,m))+","+l(f.slice(m+1))+")";else if("and"===y||"or"===y){var T=function(){var e=function e(t){var n=O(t,"least"),r=_slicedToArray(n,2),i=r[0],o=r[1];if(i)return["inequality","is","isNot","isIn","contains"].includes(i.type)?i:["and","or"].includes(i.type)?e(t.slice(0,o))||e(t.slice(o+1)):void 0},t=e(f.slice(0,m)),n=e(f.slice(m+1)),r="TwineError.create('operation', 'This use of \"is not\" and \""+y+"\" is grammatically ambiguous','Maybe try rewriting this as \"__ is not __ "+y+" __ is not __\"') ";if(w=h.type,d===h.type)w="",g=l(f.slice(0,m),{isVarRef:p,elidedComparison:d}).trim(),b=",",v=l(f.slice(m+1),{elidedComparison:d}).trim();else if(t&&!n){var i=O(f.slice(0,m),"least"),o=_slicedToArray(i,1)[0],a=C(j(o));if("isNot"===o.type)return{v:r};v="Operations.elidedComparisonOperator("+C(h.type)+","+a+","+l(f.slice(m+1),{elidedComparison:y})+")"}else if(!t&&n){var s=n,c=f.indexOf(s),u=C(k(s));if("isNot"===s.type)return{v:r};v="Operations.elidedComparisonOperator("+C(h.type)+","+u+","+l(f.slice(0,m),{elidedComparison:y})+")",g=l([].concat(_toConsumableArray(f.slice(c+1)),[Object.assign(Object.create(s),_defineProperty({},"inequality"===s.type?"operator":"type",k(s)))],_toConsumableArray(f.slice(m+1,c))))}}();if("object"===(void 0===T?"undefined":_typeof(T)))return T.v}else if("is"===y||"isNot"===y||"contains"===y||"isIn"===y||"inequality"===y)u=!0,w=j(h);else if("addition"===y||"subtraction"===y)w=h.text,(g=l(f.slice(0,m))).trim()||(g="0");else if("multiplication"===y||"division"===y)w=h.text;else if("not"===y)b=" ",v="Operations.not("+l(f.slice(m+1))+")",s=!1;else if("belongingProperty"===y)v="VarRef.create("+l(f.slice(m+1),i("right"))+","+C(h.name)+")"+(p?"":".get()"),s=c=!(b=" ");else if("belongingOperator"===y||"belongingItOperator"===y)h.type.includes("It")?c=!(v="Operations.Identifiers.it"):v=l(f.slice(m+1),i("right")),a="belonging";else if("property"===y)g="VarRef.create("+l(f.slice(0,m),i("left"))+","+C(h.name)+")"+(p?"":".get()"),s=c=!(b=" ");else if("itsProperty"===y||"belongingItProperty"===y)g="VarRef.create(Operations.Identifiers.it,"+C(h.name)+").get()",s=c=!(b=" ");else if("possessiveOperator"===y||"itsOperator"===y)h.type.includes("it")&&(s=!(g="Operations.Identifiers.it")),a="possessive";else if("twineLink"===y)b='Macros.run("link-goto", [section,'+C(h.innerText)+","+C(h.passage)+"])",s=c=!1;else if("macro"===y){var S=h.children[0];"macroName"!==S.type&&A("Compiler.compile","macro token had no macroName child token"),b="Macros.run("+(S.isMethodCall?l(S.children):'"'+h.name+'"')+", [section,"+l(h.children.slice(1))+"])",s=c=!1}else"grouping"===y&&(b="("+l(h.children,{isVarRef:p})+")",s=c=!1)}return-1<m?(w&&(p=!1),g=g||l(f.slice(0,m),{isVarRef:p}).trim(),v=v||l(f.slice(m+1)).trim(),u&&!g&&(g=" Operations.Identifiers.it "),s&&!g||c&&!v?"TwineError.create('operation','I need some code to be "+(s?"left ":"")+(s&&c?"and ":"")+(c?"right ":"")+'of "'+h.text+"\"')":b?g+b+v:o?"Operations.makeAssignmentRequest("+[g,v,C(o)]+")":a?"VarRef.create("+("belonging"===a?v:g)+",{computed:true,value:"+("belonging"===a?g:v)+"})"+(p?"":".get()"):w?" Operations["+C(w)+"]("+g+","+v+") ":""):1===f.length?(("value"in f[0]?f[0].value:f[0].text)+"").trim()||" ":f.reduce(function(e,t){return e+l(t,{isVarRef:p})},"")}}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,v,b,w){function x(e,t){return"<"+t+">"+e+"</"+t+">"}function T(e,t){var n=k.render(e.children);return n&&x(n,t)}var t,n,S=e.escape,r=e.impossible,O=e.toJSLiteral,j=e.insensitiveName,k=void 0,C="text-align: center; max-width:50%; ";return k={options:{},exec:(t=void 0,n=void 0,function(e){return"string"!=typeof e?(r("Renderer.exec","source was not a string, but "+(void 0===e?"undefined":_typeof(e))),""):e===t?n:(t=e,n=k.render(v.lex(e).children))}),render:function e(t){var n="",r=[];if(!t)return n;for(var i=t.length,o=0;o<i;o+=1){var a=t[o];switch(a.type){case"error":n+=w.create("syntax",a.message).render(S(a.text))[0].outerHTML;break;case"numbered":case"bulleted":var s="numbered"===a.type?"ol":"ul";n+="<"+s+">";for(var c=1;o<i&&t[o]&&t[o].type===a.type;)n+=("<"+s+">").repeat(Math.max(0,t[o].depth-c)),n+=("</"+s+">").repeat(Math.max(0,c-t[o].depth)),c=t[o].depth,n+=T(t[o],"li"),o+=1;o-=1,n+=("</"+s+">").repeat(c+1);break;case"align":for(;a&&"align"===a.type;){var u=a.align,l=o+=1;if("left"===u){o-=1;break}for(;o<i&&t[o]&&"align"!==t[o].type;)o+=1;var f=e(t.slice(l,o)),p="";switch(u){case"center":p+=C+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":p+="text-align: "+u+";";break;default:+u&&(p+=C+"margin-left: "+u+"%;")}n+="<tw-align "+(p?'style="'+p+'"':"")+(k.options.debug?' title="'+a.text+'"':"")+">"+f+"</tw-align>\n",a=t[o]}break;case"column":for(var d=[];a&&"column"===a.type;){var h=a.column,m=o+=1;if("none"===h){o-=1;break}for(;o<i&&t[o]&&"column"!==t[o].type;)o+=1;d.push({text:a.text,type:h,body:e(t.slice(m,o)),width:a.width,marginLeft:a.marginLeft,marginRight:a.marginRight}),a=t[o]}d.length&&function(){var t=d.reduce(function(e,t){return e+t.width},0);n+="<tw-columns>"+d.map(function(e){return"<tw-column type="+e.type+'  style="width:'+e.width/t*100+"%; margin-left: "+e.marginLeft+"em; margin-right: "+e.marginRight+'em;" '+(k.options.debug?' title="'+e.text+'"':"")+">"+e.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":n+=T(a,"h"+a.depth);break;case"br":(!r.length||/td|th/.test(r[0]))&&(n+="<br>");break;case"hr":n+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":n+='<a class="link" href="'+S(a.text)+'">'+a.text+"</a>";break;case"scriptStyleTag":case"tag":var y=a.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(y)&&r[a.text.startsWith("</")?"shift":"unshift"](y),n+=a.text.startsWith("</")?a.text:a.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":n+=T(a,a.type);break;case"strike":n+=T(a,"s");break;case"bold":n+=T(a,"b");break;case"italic":n+=T(a,"i");break;case"twineLink":var g=v.lex("(link-goto:"+O(a.innerText)+","+O(a.passage)+")");n+=e(g.children);break;case"hook":n+="<tw-hook "+(a.hidden?"hidden ":"")+(a.name?'name="'+j(a.name)+'"':"")+(k.options.debug&&a.name?' title="Hook: ?'+a.name+'"':"")+' source="'+S(a.innerText)+'"></tw-hook>';break;case"verbatim":n+=x(S(a.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":n+=T(a,"tw-collapsed");break;case"variable":case"tempVariable":case"macro":n+='<tw-expression type="'+a.type+'" name="'+S(a.name||a.text)+'"'+(k.options.debug?' title="'+S(a.text)+'"':"")+' js="'+S(b(a))+'"></tw-expression>';break;default:n+=a.children&&a.children.length?e(a.children):a.text}}return n}},Object.freeze(k)}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(f,e,t,p){var d=e.assertOnlyHas,h=e.impossible,m=e.transitionIn,y=t.exec,g=void 0,v={source:"",innerSource:"",enabled:!0,target:null,append:"append",newTargets:null,transition:"instant",transitionTime:null,loopVars:null,styles:null,attr:null,data:null,section:null,summary:function(){var t=this;return["source","innerSource","enabled","target","append","newTargets","transition","transitionTime"].filter(function(e){return t.hasOwnProperty(e)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",Object.keys(this.loopVars).length&&"loopVars",Object.keys(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=Object.assign(Object.create(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,r=this.target,i=function(t){Array.isArray(e.styles)&&0<e.styles.length&&setTimeout(function(){return t.css(Object.assign.apply(Object,_toConsumableArray([{}].concat(e.styles))))}),e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};Array.isArray(n)&&n.length&&(r=n.map(function(e){return e.target})),[].concat(r).forEach(function(e){p.isPrototypeOf(e)?e.forEach(t,i):i(e)})},render:function(){var n=this,e=this.source,t=this.transition,r=this.transitionTime,i=this.enabled,o=this.section,a=this.newTargets,s=this.target,c=this.append;if(d(this,g),!i||void 0!==s.popAttr("hidden"))return v.create({target:s,data:{hiddenSource:e}}).update(),f();if(Array.isArray(a)&&a.length&&(s=a),!s)return h("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),f();var u=f(),l=function(t){return function(e){u=u.add(n.create({target:e,append:t,newTargets:null}).render())}};if([].concat(s).forEach(function e(t,n,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:c;p.isPrototypeOf(t)?t.forEach(o,l(i)):t.jquery&&1<t.length?Array.from(t).map(f).forEach(l(i)):t.target&&t.append&&e(t.target,n,r,t.append)}),u.length||Array.isArray(s)||p.isPrototypeOf(s))return u;if(!(c in s)){if("replace"!==c)return h("Section.render","The target doesn't have a '"+c+"' method."),f();s.empty(),c="append"}return u=f(e&&f.parseHTML(y(e),document,!0)),s[c](u.length?u:void 0),this.update(),t&&m("replace"===c?s:u,t,r),u}};return g=Object.keys(v),Object.seal(v)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor"],function(e,t,n){var r=e.impossible,i=t.is,o={},a={changer:!0,TwineScript_TypeName:"a changer command",TwineScript_Print:function(){return"`[A '"+this.macroName+"' command]`"},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||r("ChangerCommand.create","params was not an array"),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) command"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return a.isPrototypeOf(e)?this.macroName===e.macroName&&i(this.params,e.params)&&i(this.next,e.next):void 0},TwineScript_Clone:function(){return this.create(this.macroName,this.params,this.next)},run:function(e){o[this.macroName].apply(o,[e].concat(_toConsumableArray(this.params))),this.next&&this.next.run(e)},register:function(e,t){o[e]=t}};return Object.freeze(a)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils"],function(e,r,c,u,t){function i(e){a=(p[d]||f).create(e)}var n=e.impossible,l=t.objectName,o={TwineScript_ObjectName:"this story's variables",TwineScript_VariableStore:!0},f={passage:"",variables:o,create:function(e,t){var n=Object.create(f);return n.passage=e||"",n.variables=Object.assign(Object.create(this.variables),t),n}},p=[],d=-1,a=f.create(),h=void 0,m={forward:[],back:[],load:[]},s=Object.assign({get passage(){return a.passage},get variables(){return a.variables},get pastLength(){return d},get futureLength(){return p.length-1-d},passageNameVisited:function(e){var t=0;if(!r.get(e))return 0;for(var n=0;n<=d;n++)t+=+(e===p[n].passage);return t},passageNameLastVisited:function(e){if(!r.get(e))return 1/0;if(e===a.passage)return 0;for(var t=d;0<t;t--)if(p[t].passage===e)return d-t+1;return 1/0},pastPassageNames:function(){for(var e=[],t=d-1;0<=t;t--)e.unshift(p[t].passage);return e},play:function(t){a||n("State.play","present is undefined!"),a.passage=t,p=p.slice(0,d+1).concat(a),d+=1,i(t),m.forward.forEach(function(e){return e(t)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if((t=this.passageNameLastVisited(e))===1/0)return}else"number"==typeof e&&(t=e);for(;0<t&&0<d;t--)n=!0,d-=1;return n&&(i(p[d].passage),m.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);0<t&&0<p.length;t--)n=!0,d+=1;return n&&(i(p[d].passage),m.forward.forEach(function(e){return e(p[d].passage,"fastForward")})),n},on:function(e,t){return e in m?("function"!=typeof t||m[e].includes(t)||m[e].push(t),s):void n("State.on","invalid event name")},reset:function(){window.jasmine&&(p=[],d=-1,a=f.create(),h=void 0,m.load.forEach(function(e){return e(p)}))}},function(){function a(e){return"number"==typeof e||"boolean"==typeof e||"string"==typeof e||null===e||Array.isArray(e)&&e.every(a)||e instanceof Set&&Array.from(e).every(a)||e instanceof Map&&Array.from(e.values()).every(a)||c.isPrototypeOf(e)}function s(e,t){return t instanceof Set?{"(dataset:)":Array.from(t)}:t instanceof Map?{"(datamap:)":Array.from(t)}:c.isPrototypeOf(t)?{changer:{name:t.macroName,params:t.params,next:t.next}}:t}function r(e,t){if(t&&"object"===(void 0===t?"undefined":_typeof(t))){if(Array.isArray(t["(dataset:)"]))return new Set(t["(dataset:)"]);if(Array.isArray(t["(datamap:)"]))return new Map(t["(datamap:)"]);if(t.changer&&"object"===_typeof(t.changer)){var n=t.changer,r=n.name,i=n.params,o=n.next;return c.create(r,i,o)}}return t}return{serialise:function(){var e=p.slice(0,d+1),t=e.map(function(t){return Object.keys(t.variables).filter(function(e){return t.variables[e]&&!a(t.variables[e])}).map(function(e){return[e,t.variables[e]]})});if(h||(h=t.reduce(function(e,t,n){var r=_slicedToArray(t,2),i=r[0],o=r[1];return e||i&&[i,o,n+1]},void 0)),h){var n=_slicedToArray(h,3),r=n[0],i=n[1],o=n[2];return u.create("saving","The variable $"+r+" holds "+l(i)+" (which is, or contains, a complex data value) on turn "+o+"; the game can no longer be saved.")}try{return JSON.stringify(e,s)}catch(e){return!1}},deserialise:function(e){var t=void 0,n=o;try{t=JSON.parse(e,r)}catch(e){return!1}return!!Array.isArray(t)&&!(t=t.map(function(e){return!("object"!==(void 0===e?"undefined":_typeof(e))||!e.hasOwnProperty("passage")||!e.hasOwnProperty("variables"))&&(e.variables=Object.assign(Object.create(n),e.variables),n=e.variables,Object.assign(Object.create(f),e))})).includes(!1)&&(p=t,m.load.forEach(function(e){return e(p)}),d=p.length-1,void i(p[d].passage))}}}());return Object.seal(f),Object.freeze(s)}),define("datatypes/colour",["jquery"],function(n){function e(e){var t=e.r,n=e.g,r=e.b,i=e.a;t/=255,n/=255,r/=255;var o=Math.max(t,n,r),a=Math.min(t,n,r),s=(o+a)/2,c=o-a;if(o===a)return{h:0,s:0,l:s};var u=void 0;switch(o){case t:u=(n-r)/c+(n<r?6:0);break;case n:u=(r-t)/c+2;break;case r:u=(t-n)/c+4}return{h:u=Math.round(60*u),s:.5<s?c/(2-o-a):c/(o+a),l:s,a:i}}var r=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,t=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,i=Object.create(null),o=Object.freeze({TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour","TwineScript_+":function(e){var t=e;return o.create({r:Math.min(Math.round(.6*(this.r+t.r)),255),g:Math.min(Math.round(.6*(this.g+t.g)),255),b:Math.min(Math.round(.6*(this.b+t.b)),255),a:(this.a+t.a)/2})},TwineScript_Print:function(){return"<tw-colour style='background-color:rgba("+[this.r,this.g,this.b,this.a].join(",")+");'></span>"},TwineScript_is:function(e){return o.isPrototypeOf(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a},TwineScript_Clone:function(){return o.create(this)},toRGBAString:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},get h(){return e(this).h},get s(){return e(this).s},get l(){return e(this).l},create:function(e){return"string"==typeof e?this.create(o.isHexString(e)?"string"!=typeof(t=e)?t:(t=(t=t.replace("#","")).replace(r,"$1$1$2$2$3$3"),{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16)}):function(e){if(e in i)return i[e];var t=n("<p>").css("background-color",e).css("background-color");return t=t.startsWith("rgb")?t.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},i[e]=t}(e)):!("h"in e&&"s"in e&&"l"in e)||"r"in e||"g"in e||"b"in e?("a"in e&&"number"==typeof e.a||(e.a=1),Object.assign(Object.create(this),e)):this.create(function(e){function t(e){return e<0&&(e+=1),1<e&&(e-=1),e<1/6?c+6*(s-c)*e:e<.5?s:e<2/3?c+(s-c)*(2/3-e)*6:c}var n=e.h,r=e.s,i=e.l,o=e.a;if(0===r){var a=Math.floor(255*i);return{r:a,g:a,b:a}}n/=360;var s=i<.5?i*(1+r):i+r-i*r,c=2*i-s;return{r:Math.floor(255*t(n+1/3)),g:Math.floor(255*t(n)),b:Math.floor(255*t(n-1/3)),a:o}}(e));var t},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(r)||e.slice(1).match(t))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return o}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset","datatypes/colour"],function(i,c,e,t,o,n){function u(e,t){var n=void 0;if(e instanceof Map&&(n=c.containsError(S(e,t))))return n;if(v(e)){var r=void 0;if("number"==typeof t){if(0===t)return c.create("property","You can't access elements at position 0 of "+b(e)+".","Only positive and negative position values exist.");0<t&&(t-=1)}else if("string"==typeof t&&(r=/(\d+)(?:st|[nr]d|th)last/i.exec(t)))t=-r[1]+"";else if("string"==typeof t&&(r=/(\d+)(?:st|[nr]d|th)/i.exec(t)))t=r[1]-1+"";else if("last"===t)t=-1;else if(!["length","any","all"].includes(t)||o.isPrototypeOf(e))return c.create("property","You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.)"+(o.isPrototypeOf(e)?"":", 'length', 'any' and 'all'")+" of "+b(e)+", not "+b(t)+".")}else if(e instanceof Set){if(!["length","any","all"].includes(t))return c.create("property","You can only get the 'length', 'any' and 'all' of a "+b(e)+".","To check contained values, use the 'contains' operator.");"length"===t&&(t="size")}else if("number"==typeof e||"boolean"==typeof e)return c.create("property","You can't get data values from "+b(e)+".");return t}function l(e,t){return t-0<0&&Math.abs(t)<=e.length?e.length+(t-0):t}function a(e,t){if(void 0===e)return e;if(e instanceof Map)return e.get(t);if(v(e)&&(t=l(e,t)),"any"===t||"all"===t)return i={any:"'any' value of ",all:"'all' values of "}[r=t],{determiner:r,array:[].concat(_toConsumableArray(n=e)),TwineScript_ObjectName:i+b(n),TwineScript_TypeName:i+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}};var n,r,i;if(e.TwineScript_GetElement&&Number.isFinite(+t))return e.TwineScript_GetElement(t);var o=e[t];return"function"!=typeof o?o:void 0}function s(e){return e.computed?"string"==typeof e.value?"('"+e.value+"')":"("+e.value+")":"'"+e+"'"}function f(t,e){if(Array.isArray(e))return e.map(function(e){return f(t,e)});if(o.isPrototypeOf(t))return c.create("operation","I can't modify "+b(t),"You should alter hooks indirectly using macros like (replace:) or (enchant:).");if(t instanceof Set)return c.create("operation","I can't modify "+b(t),"You should use an (array:) if you need to modify the data inside this dataset.");if(n.isPrototypeOf(t))return c.create("operation","I can't modify the components of "+b(t));if(t instanceof Map)return!0;if(v(t)){if(["length","any","all"].includes(e))return c.create("operation","I can't forcibly alter the '"+e+"' of "+b(t)+".");if(+e!=(0|e))return c.create("property",b(t)+" can only have position keys ('3rd', '1st', (5), etc.), not "+s(e)+".")}return t.TwineScript_Identifiers&&e in t?c.create("keyword","I can't alter the value of the '"+e+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):"number"!=typeof t&&"boolean"!=typeof t||c.create("operation","You can't alter the data values of "+b(t)+".")}function p(t,e,n){var r=e;t instanceof Map?t.set(e,n):(v(t)&&(e=l(t,e)),t.TwineScript_Set?t.TwineScript_Set(e):t[e]=n),k.set.forEach(function(e){return e(t,r,n)})}function d(t,e){var n=e;v(t)&&(e=l(t,e)),Array.isArray(t)&&T.exec(e)?t.splice(e,1):t instanceof Map||t instanceof Set?t.delete(e):delete t[e],k.delete.forEach(function(e){return e(t,n)})}function h(e){function t(){return e}return{get:t,set:t,delete:t,varref:!0}}function m(t,e,n){if(Array.isArray(e))return o.isPrototypeOf(t)?t.TwineScript_GetElement(e):e.map(function(e){return m(t,e,e)})["string"==typeof t?"join":"valueOf"]("");"string"==typeof t&&(t=[].concat(_toConsumableArray(t)));var r=a(t,e);return void 0===r?t===i.variables?j:t.TwineScript_VariableStore?c.create("property","There isn't a temp variable named _"+n+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:)."):c.create("property","I can't find a "+s(n)+" data name in "+b(t)):r}function r(e,t){var r=this,n=this.compiledPropertyChain.reduce(function(e,t){var n;return n=0===e.length?r.object:m.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,t);return c.containsError(n)?n:void 0}var y=e.impossible,g=t.isObject,v=t.isSequential,b=t.objectName,w=t.typeName,x=t.clone,T=t.numericIndex,S=t.isValidDatamapName,O=void 0,j=0,k={set:[],delete:[]};return O=Object.freeze({varref:!0,get:function(){return m(this.deepestObject,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(e){return!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?r.call(this,function(n,e,t){var r,i=_slicedToArray(e,2),o=i[0],a=i[1];if(r=c.containsError(n,o,a)||c.containsError(f(o,a)))return r;if(n&&n.TwineScript_Unstorable)return c.create("operation",w(n)+" can't be stored.");if(0<t&&(o=x(o)),"string"==typeof o){var s=function(){if("string"!=typeof n||n.length!==(Array.isArray(a)?a.length:1))return{v:c.create("datatype","I can't put this non-string value, "+b(n)+", in a string.")};o=[].concat(_toConsumableArray(o));var t=[].concat(_toConsumableArray(n));[].concat(a).forEach(function(e){0+e<0&&(e=o.length+(0+e)),o=[].concat(_toConsumableArray(o.slice(0,e)),[t.shift()],_toConsumableArray(o.slice(e+1)))}),o=o.join("")}();if("object"===(void 0===s?"undefined":_typeof(s)))return s.v}else g(o)&&(Array.isArray(a)&&v(n)?("string"==typeof n&&(n=[].concat(_toConsumableArray(n))),a.map(function(e,t){return[e,n[t]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return p(o,n,r)})):p(o,a,n));return o},e):c.create("macrocall","I can't (set:) "+b(this)+", if the "+(b(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return r.call(this,function(e,t,n){var r,i=_slicedToArray(t,2),o=i[0],a=i[1];if(r=c.containsError(e,o,a)||c.containsError(f(o,a)))return r;if(0<n&&(o=x(o)),null===e){var s="string"==typeof o;s&&(o=[].concat(_toConsumableArray(o))),Array.isArray(a)?(v(o)&&(a=[].concat(_toConsumableArray(new Set(a)))).sort(function(e,t){return l(o,t)-l(o,e)}),a.forEach(function(e){return d(o,e)})):d(o,a),s&&(o=o.join(""))}else p(o,a,e);return o},null)},create:function(e,t){var n=void 0;if(n=c.containsError(e))return h(n);t=[].concat(t),O.isPrototypeOf(e)&&(t=e.propertyChain.concat(t),e=e.object);var i,o,r=(i=e,{compiledPropertyChain:(o=t).reduce(function(e,t,n){var r;return t.computed&&(t=t.value),O.isPrototypeOf(t)&&(t=t.get()),t=Array.isArray(t)?t.map(function(e){return u(i,e)}):u(i,t),(r=c.containsError(e,t))?r:(n<o.length-1&&(i=m(i,t)),e.push(t),e)},[]),deepestObject:i}),a=r.compiledPropertyChain,s=r.deepestObject;return(n=c.containsError(a,s))?h(n):Object.assign(Object.create(O),{object:e,propertyChain:t,compiledPropertyChain:a,deepestObject:s})},get TwineScript_ObjectName(){var n=this,r=function(e,t){return t||n.object!==i.variables&&!n.object.TwineScript_VariableStore?s(e):e};return(this.object===i.variables?"$":this.object.TwineScript_VariableStore?"_":b(this.object)+"'s ")+(1===this.propertyChain.length?r(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,n){return e+"'s "+r(t,n)}))+(this.object.TwineScript_VariableStore?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){return e in k?("function"!=typeof t||k[e].includes(t)||k[e].push(t),O):void y("VarRef.on","invalid event name")}})}),define("utils/naturalsort",[],function(){return function(x){return function t(e,n){var r,i,o,a,s=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,c=/(^[ ]*|[ ]*$)/g,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,f=/^0/,p=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},d=p(e).replace(c,"")||"",h=p(n).replace(c,"")||"",m=d.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=h.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(d.match(l))||1!==m.length&&d.match(u)&&Date.parse(d),v=parseInt(h.match(l))||g&&h.match(u)&&Date.parse(h)||null;if(x&&window.Intl&&window.Intl.Collator&&(o=window.Intl.Collator(x)),v){if(g<v)return-1;if(v<g)return 1}for(var b=0,w=Math.max(m.length,y.length);b<w;b++){if(r=!(m[b]||"").match(f)&&parseFloat(m[b])||m[b]||0,i=!(y[b]||"").match(f)&&parseFloat(y[b])||y[b]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if((void 0===r?"undefined":_typeof(r))!==(void 0===i?"undefined":_typeof(i)))r+="",i+="";else if("string"==typeof r&&o&&0!==(a=o.compare(r,i)))return a;if(r<i)return-1;if(i<r)return 1}return 0}}}),define("internaltypes/varscope",[],function(){return{TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0}}),define("datatypes/lambda",["utils","utils/operationutils","internaltypes/varscope","internaltypes/twineerror"],function(e,t,f,p){var d=e.toJSLiteral,o=e.insensitiveName,a=(e.plural,t.typeName,t.objectName,t.singleTypeCheck,Object.freeze({lambda:!0,TwineScript_TypeName:"a lambda",TwineScript_ObjectName:function(){return'a "'+("making"in this?"making ... ":"")+("with"in this?"with ... ":"")+("where"in this?"where ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TypeSignature:function(e){return{pattern:"lambda",innerType:a,clauses:e}},create:function(e,t,n){var r=void 0;if(p.containsError(e))return e;if(a.isPrototypeOf(e)){if(t in e&&("where"!==t||"true"!==e[t]))return p.create("syntax","This lambda has two '"+t+"' clauses.");r=e}else{if(void 0!==e&&(!e||!e.varref||!f.isPrototypeOf(e.object)||1<e.propertyChain.length))return p.create("syntax","This lambda needs to start with a single temporary variable.");(r=Object.create(this)).loop=e?e.propertyChain[0]:""}r[t]=n;var i=[r.making,r.with,r.loop].filter(function(e,t,n){return e&&n.indexOf(o(e))!==t});return i.length?p.create("syntax","This lambda has two variables named '"+i[0]+"'.","Lambdas should have all-unique parameter names."):r},apply:function(e,t){var n=t.loop,r=t.with,i=t.making,o=t.fail,a=t.pass,s=t.ignoreVia,c=Object.create(f);[[this.loop,n],[this.with,r],[this.making,i]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n&&(c[n]=r)}),e.stack.unshift(Object.assign(Object.create(null),{tempVariables:c})),e.eval("Operations").initialiseIt(!n||this.with||this.making?p.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName()):n);var u=!s&&this.via,l=e.eval("where"in this?"Operations.where("+this.where+","+(u||d(a))+","+d(o)+")":u||d(a));return e.stack.shift(),l},filter:function(i,e){var o=this;return e.reduce(function(e,t){var n=void 0;if(n=p.containsError(e))return n;var r=o.apply(i,{loop:t,pass:!0,fail:!1,ignoreVia:!0});return(n=p.containsError(r))?n:e.concat(r?[t]:[])},[])}}));return a}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/lambda","datatypes/hookset","internaltypes/twineerror"],function(e,i,t,n,o,d,r,h){function a(n){return function(e){e=e.reduce(function(e,t){if(t&&!0===t.spreader){var n=t.value;if(Array.isArray(n)||"string"==typeof n)for(var r=0;r<n.length;r++)e.push(n[r]);else n instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(n).sort(i("en")))):e.push(h.create("operation","I can't spread out "+v(n)+", because it is not a string, dataset, or array."))}else e.push(t);return e},[]);var t=h.containsError(e);return t||n.apply(void 0,_toConsumableArray(e))}}function s(u,l,f){f=[].concat(f||[]),u="("+(Array.isArray(u)&&1<u.length?u[0]:u)+":)";var p;return p=0<f.length?"The "+u+" macro must only be given "+f.map(b).reduce(function(e,t,n,r){return e+(0===n?"":n<r.length-1?", ":", and ")+t},"")+(1<f.length?", in that order":"."):"The macro must not be given any data - just write "+u+".",function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=void 0,o=function(e){var t=f[e],n=r[e];return e>=f.length&&!i?{v:h.create("datatype",r.length-f.length+" too many values were given to this "+u+" macro.",p)}:(t||(t=i),!t.innerType||"rest"!==t.pattern&&"zero or more"!==t.pattern||(i=t.innerType,"rest"===t.pattern&&(t=t.innerType)),w(n,t)?void 0:void 0===n?{v:h.create("datatype","The "+u+" macro needs "+y(f.length-e,"more value")+".",p)}:n&&n.TwineScript_Unstorable&&(t===x.TypeSignature.Any||t.innerType&&t.innerType===x.TypeSignature.Any)?{v:h.create("datatype",u+"'s "+m(e+1)+" value, "+v(n)+", is not valid data for this macro.",p)}:n&&d.isPrototypeOf(n)&&"lambda"===t.pattern?{v:h.create("datatype",u+"'s "+m(e+1)+" value (a lambda) should have "+g(["where","making","via","with"].filter(function(e){return t.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+g(["where","making","via","with"].filter(function(e){return e in n}).map(function(e){return"a '"+e+"' clause"}))+".")}:{v:h.create("datatype",u+"'s "+m(e+1)+" value is "+v(n)+", but should be "+b(t)+".",t.message||p)})},a=0,s=Math.max(r.length,f.length);a<s;a+=1){var c=o(a);if("object"===(void 0===c?"undefined":_typeof(c)))return c.v}return l.apply(void 0,[e].concat(r))}}function c(e,t){Array.isArray(e)?e.forEach(function(e){return l(f,u(e),t)}):l(f,u(e),t)}var u=t.insensitiveName,m=t.nth,y=t.plural,g=t.andList,l=t.lockProperty,v=n.objectName,b=n.typeName,w=n.singleTypeCheck,x=void 0,f={};return x={has:function(e){return e=u(e),f.hasOwnProperty(e)},get:function(e){return e=u(e),f.hasOwnProperty(e)&&f[e]},add:function e(t,n,r){return c(t,a(s(t,n,r))),e},addChanger:function e(t,n,r,i){return c(t,a(s(t,n,i))),o.register(Array.isArray(t)?t[0]:t,r),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"}},run:function(e,t){return h.containsError(e)?e:x.has(e)?x.get(e)(t):h.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")}},Object.freeze(x)}),define("datatypes/assignmentrequest",["utils"],function(e){var r=e.assertMustHave;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,create:function(e,t,n){return r(e,["varref"]),Object.assign(Object.create(this),{dest:e,src:t,operator:n})}})}),define("twinescript/operations",["state","datatypes/colour","datatypes/assignmentrequest","utils/operationutils","internaltypes/twineerror"],function(e,t,i,n,u){function r(r,i,o,a){return o=o||"do this to",function(e,t){1===i.length&&(t=e);var n;return(n=u.containsError(e,t))?n:(void 0===e?"undefined":_typeof(e))!==r||(void 0===t?"undefined":_typeof(t))!==r?u.create("operation","I can only "+o+" "+r+"s, not "+m((void 0===e?"undefined":_typeof(e))!==r?e:t)+".",a):i(e,t)}}function o(r){return function(e,t){var n;return(n=u.containsError(e,t))?n:e&&e.varref?u.create("operation","I can't give an expression a new value."):(void 0===e?"undefined":_typeof(e))!==(void 0===t?"undefined":_typeof(t))||c(e)!==c(t)?l(r,e,t)||u.create("operation",m(e)+" isn't the same type of data as "+m(t)):r(e,t)}}function a(r){return function i(o,a){var e,s,c;if(e=u.containsError(o,a))return e;if((g=o).determiner){var t=(c="all"===o.determiner,{v:o.array.reduce(function(e,t){var n,r=i(t,a);return(n=u.containsError(e,r))?n:c?e&&r:e||r},c)});if("object"===(void 0===t?"undefined":_typeof(t)))return t.v}else if(a.determiner){var n=(s="all"===a.determiner,{v:a.array.reduce(function(e,t){var n,r=i(o,t);return(n=u.containsError(e,r))?n:s?e&&r:e||r},s)});if("object"===(void 0===n?"undefined":_typeof(n)))return n.v}return r(o,a)}}var s=n.isObject,c=n.collectionType,l=n.coerceToString,f=n.is,p=n.clone,d=n.unique,h=n.contains,m=(n.typeName,n.objectName),y=void 0,g=0,v="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return y={create:function(e){var t=Object.create(this);return t.Identifiers={TwineScript_Identifiers:!0,get it(){return g},get time(){return Date.now()-e.timestamp}},t},elidedComparisonOperator:function(n,r){for(var e=arguments.length,t=Array(2<e?e-2:0),i=2;i<e;i++)t[i-2]=arguments[i];return t.reduce(function(e,t){return"boolean"==typeof t?t:y[n](e,y[r](g,t))},"and"===n)},and:r("boolean",o(function(e,t){return e&&t}),"use 'and' to join",v),or:r("boolean",o(function(e,t){return e||t}),"use 'or' to join",v),not:r("boolean",function(e){return!e},"use 'not' to invert",v),"+":o(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(p)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(void 0===e?"undefined":_typeof(e))?e+t:u.create("operation","I can't use + on "+m(e)+".")}),"-":o(function(e,n){if(Array.isArray(e))return e.filter(function(t){return!n.some(function(e){return f(t,e)})});if(e instanceof Set){var t=(r=[].concat(_toConsumableArray(n)),{v:new Set([].concat(_toConsumableArray(e)).filter(function(t){return!r.some(function(e){return f(t,e)})}))});if("object"===(void 0===t?"undefined":_typeof(t)))return t.v}var r;return"string"==typeof e?e.split(n).join(""):"number"==typeof e?e-n:u.create("operation","I can't use - on "+m(e)+".")}),"*":r("number",o(function(e,t){return e*t}),"multiply"),"/":r("number",o(function(e,t){return 0===t?u.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":r("number",o(function(e,t){return 0===t?u.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":a(r("number",o(function(e,t){return e<t}),"do < to")),">":a(r("number",o(function(e,t){return t<e}),"do > to")),"<=":a(r("number",o(function(e,t){return e<=t}),"do <= to")),">=":a(r("number",o(function(e,t){return t<=e}),"do >= to")),is:a(f),isNot:a(function(e,t){return!y.is(e,t)}),contains:a(h),isIn:a(function(e,t){return h(t,e)}),where:function(e,t,n){var r;return(r=u.containsError(e))?r:"boolean"!=typeof e?u.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){return{value:e,spreader:!0}},makeAssignmentRequest:function(e,t,n){var r=u.containsError(e,t);return r||(s(e)&&"varref"in e?i.create(e,t,n):u.create("operation","I can't store a new value inside "+m(e)+"."))},setIt:function(e){return u.containsError(e)?e:e.varref?(g=e.get(),e):u.create("operation","I can't put a new value into "+m(e)+".")},initialiseIt:function(e){g=e}},Object.freeze(y)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,VarRef,TwineError,OperationsProto){return function(section){"object"===(void 0===section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{for(var _len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return eval(args.join(""))}catch(e){return e}},section}}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("section",["jquery","utils","utils/selectors","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(p,d,h,e,n,m,t,r,y,i,g,l,f,v,b){function w(e,t,n){if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.changer){if(!this.renderInto(n.popAttr("source"),n,t)){var r=d.insensitiveName(e.attr("name"));return void(["if","elseif","unless","else"].includes(r)&&(e.addClass("false"),"elseif"!==r&&(this.stack[0].lastHookShown=!1)))}}else if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.live)(function(t,n){var r=this,i=t.popAttr("source")||"";n=void 0===n?20:n,setTimeout(function e(){r.inDOM()&&(r.renderInto(i,t,{append:"replace"}),t.find(h.expression+"[name='stop']").length||r.inDOM()&&setTimeout(e,n))},n)}).call(this,n,t.delay,t.event);else{if(!1===t)return n.attr("source")&&n.data("hiddenSource",n.popAttr("source")),e.addClass("false"),void(this.stack[0].lastHookShown=!1);!0!==t&&e.replaceWith(v.create("datatype",O(t)+" cannot be attached to this hook.","Only Booleans, changer commands, and the (live:) macro can be attached to hooks.").render(e.attr("title")))}this.stack[0].lastHookShown=!0}function x(e){var t=(e instanceof p?e[0]:e).nextSibling;if(t&&(t instanceof Text&&!t.textContent.trim()||"br"===(t.tagName||"").toLowerCase())){var n=x(t),r=n.whitespace,i=n.nextElem;return{whitespace:p(t).add(r),nextElem:i}}return{whitespace:p(),nextElem:p(t)}}function T(e){function n(e){return 0===p(this||e).parentsUntil("tw-collapsed").filter("tw-verbatim, tw-expression, [collapsing=false]").length}var t=function e(t){var n=t.first()[0],r=t.parent();if(!r.length)return null;var i=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 4&t&&!(8&t)});return(i=i[i.length-1])||e(r)}(e);p(t).parents("tw-collapsed").length||(t=null);var r=function e(t){var n=t.last()[0],r=t.parent();if(!r.length)return null;var i=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 2&t&&!(8&t)})[0];return i||e(r)}(e);p(r).parents("tw-collapsed").length||(r=null),e.findAndFilter("br:not([data-raw])").filter(n).replaceWith(document.createTextNode(" "));var i=e.textNodes(),o=0;i.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(/\s+/g," ")," "!==t.textContent[0]||e&&e.textContent&&!(-1<e.textContent.search(/\s$/))||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},t),[].concat(_toConsumableArray(i)).reverse().every(function(e){return!!n(e)&&(e.textContent.match(/^\s*$/)?(o+=e.textContent.length,!(e.textContent="")):(e.textContent=e.textContent.replace(/\s+$/,function(e){return o+=e.length,""}),!1))}),0<o&&r&&(i[i.length-1].textContent+=" "),e[0]&&s()&&e[0].normalize()}var o,a,S=r.printBuiltinValue,O=r.objectName,s=(a=void 0,function(){if(void 0!==a)return a;var e=p("<p>");return e[0].normalize?(e.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),a=1===e.contents().length):a=!1});return o={create:function(e){e instanceof p&&1===e.length||d.impossible("Section.create","called with no DOM element");var t=Object.assign(Object.create(this),{timestamp:Date.now(),dom:e||d.storyElement,stack:[],enchantments:[]});return n(t)},inDOM:function(){return 0<p(d.storyElement).find(this.dom).length},evaluateTwineMarkup:function(e){var t=p("<p>");this.renderInto(e,t);var n;return 0<(n=t.find("tw-error")).length?n:t.text()},renderInto:function(e,i){for(var o=this,t=l.create({target:i,source:e,section:this}),n=arguments.length,r=Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];r.forEach(function(e){e.changer?e.run(t):Object.assign(t,e)}),i=t.target,50<=this.stack.length&&v.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(i.attr("title")).replaceAll(i);var s=function(e,t){var n=e.render();o.stack.unshift(t);var r=o;n.findAndFilter(h.hook+","+h.expression).each(function(){var e=p(this);switch(e.tag()){case h.hook:if(e.attr("hidden")&&(e.removeAttr("hidden"),e.data("hiddenSource",e.popAttr("source"))),e.attr("source")&&r.renderInto(e.popAttr("source"),e),e.find("[earlyexit]").length)return!1;break;case h.expression:if(e.attr("js")){var t=function(e){var t=this.eval(e.popAttr("js")||""),n=void 0,r=void 0,i=p();for(r=e;y.isPrototypeOf(t);){var o=x(r);if(n=o.whitespace,(r=o.nextElem)[0]instanceof Text&&"+"===r[0].textContent.trim()){var a,s=r,c=x(s);if(a=c.whitespace,(r=c.nextElem).is(h.expression)){var u=this.eval(r.popAttr("js"));if(v.containsError(u)){t=u;break}var l=m["+"](t,u);p(n).add(s).add(a).remove(),t=v.containsError(l)?v.create("operation","I can't combine "+O(t)+" with "+O(u)+"."):l;continue}}if(r.is(h.hook)){n.remove(),i=r;break}e.replaceWith(v.create("syntax","The ("+t.macroName+":) command should be assigned to a variable or attached to a hook.","Macros like this should appear to the left of a hook: "+e.attr("title")+"[Some text]").render(e.attr("title")));break}i=i.length?i:x(e).nextElem.filter(h.hook);var f=void 0;if(f=v.containsError(t))f instanceof Error&&(f=v.fromError(f)),e.replaceWith(f.render(e.attr("title"),e));else if(b.isPrototypeOf(t))e.append(t.render());else if(!i.length&&("string"==typeof t||"number"==typeof t||t instanceof Map||t instanceof Set||Array.isArray(t)||g.isPrototypeOf(t))||t&&t.TwineScript_Print&&!t.changer){if((t=S(t)).earlyExit)return"earlyexit";t instanceof p?e.append(t):v.containsError(t)?(t instanceof Error&&(t=v.fromError(t)),e.replaceWith(t.render(e.attr("title"),e))):this.renderInto(t,e)}else i.length?w.call(this,e,t,i):t.changer||"boolean"==typeof t||d.impossible("Section.runExpression","The expression evaluated to an unknown value: "+t.toSource())}.call(r,e);return"earlyexit"===t?(n.attr("earlyexit",!0),!1):t}}}),n.length&&i instanceof p&&i.is(h.hook)&&0<i.parents("tw-collapsed").length&&T(n),n.findAndFilter(h.collapsed).each(function(){T(p(this))}),o.stack.shift()},c=Object.create(this.stack.length?this.stack[0].tempVariables:f),u=i&&i.tag();return c.TwineScript_VariableStoreName=u===h.hook?i.attr("name")?"?"+i.attr("name"):"an unnamed hook":u===h.expression?"a "+i.attr("type")+" expression":u===h.passage?"this passage":"an unknown scope",Object.keys(t.loopVars).length?function(){for(var n=Object.assign({},t.loopVars),e=Math.min.apply(Math,_toConsumableArray(Object.keys(n).map(function(e){return n[e].length})));0<e;e-=1)s(t,{tempVariables:Object.keys(n).reduce(function(e,t){return e[t]=n[t].shift(),e},Object.create(c))})}():s(t,{tempVariables:c}),0===this.stack.length&&this.updateEnchantments(),t.enabled},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})}},Object.preventExtensions(o)}),define("engine",["jquery","utils","utils/selectors","state","section","passages"],function(h,m,y,g,v,b){function w(e,t){return"<tw-include type="+e+" title='"+r(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};m.assertOnlyHas(t,["stretch","transitionIn","transitionOut"]);var n=b.get(e),r=m.storyElement,i=r.parent(),o=t.stretch,a=t.transitionOut,s=t.transitionIn;if(a=a||"instant",i.is(y.enchantment)){var c=i.data("enchantedProperties");c&&r.css(c.reduce(function(e,t){return e[t]="",e},{})),i=r.unwrap().parent()}n&&n instanceof Map&&n.has("source")||x("Engine.showPassage","There's no passage with the name \""+e+'"!'),r.detach();var u=m.$(r.children(T));!o&&a&&(S(u,a),u.css("position","absolute"));var l=(n.get("tags")||[]).join(" "),f=function(){var e=h("<tw-passage><tw-sidebar>"),t=e.children(y.sidebar);j.permalink&&g.save&&t.append('<tw-icon tabindex=0 class="permalink" title="Permanent link to this passage"><a href="#'+g.save()+'">&sect;');var n=h('<tw-icon tabindex=0 class="undo" title="Undo">&#8630;</tw-icon>').click(O.goBack),r=h('<tw-icon tabindex=0 class="redo" title="Redo">&#8631;</tw-icon>').click(O.goForward);return g.pastLength<=0&&n.css("visibility","hidden"),g.futureLength<=0&&r.css("visibility","hidden"),t.append(n).append(r),e}().appendTo(r).attr({tags:l});r.attr({tags:l});var p=v.create(f),d=n.get("source");d=b.getTagged("header").map(w.bind(0,"header")).join("")+(j.debug?b.getTagged("debug-header").map(w.bind(0,"debug-header")).join(""):"")+d+b.getTagged("footer").map(w.bind(0,"footer")).join("")+(j.debug?b.getTagged("debug-footer").map(w.bind(0,"debug-footer")).join(""):""),g.pastLength<=0&&(j.debug&&(d=b.getTagged("debug-startup").map(w.bind(0,"debug-startup")).join("")+d),d=b.getTagged("startup").map(w.bind(0,"startup")).join("")+d),p.renderInto(d,f,{transition:s||"dissolve"}),i.append(r.parents().length?r.parents().last():r),scroll(0,o?f.offset().top-.05*h(window).height():r.offset().top)}var r=m.escape,x=m.impossible,T=m.passageSelector,S=m.transitionOut,O=void 0,j=Object.create(null);return O={goBack:function(){g.rewind()&&n(g.passage)},goForward:function(){g.fastForward()&&n(g.passage)},goToPassage:function(e,t){g.play(e),n(e,{stretch:t})},showPassage:n,options:j},Object.freeze(O)}),define("debugmode",["jquery","utils","state","internaltypes/varref","utils/operationutils","engine"],function(c,e,u,i,t,l){var f=t.objectName;return t.typeName,function(){function o(e,t,n){var r=s.children('[data-name="'+e+'"]'),i=f(t);r.length||(r=c('<div class="variable-row" data-name="'+e+'" data-value="'+i+'"></div>').appendTo(s)),r.empty().append("<span class='variable-name "+(n?"temporary":"")+"'>"+e+(n?"<span class='temporary-variable-scope'>"+n+"</span>":"")+"</span><span class='variable-value'>"+f(t)+"</span>");var o=s.children();a.text(o.length+" Variable"+(1!==o.length?"s":""))}function e(){var i=[];for(var e in s.children().each(function(e,t){var n=(t=c(t)).attr("data-name"),r=t.attr("data-value");n.startsWith("TwineScript")||(n in u.variables?(i.push(n),f(u.variables[n])!==r&&o(n,u.variables[n])):t.remove())}),u.variables)e.startsWith("TwineScript")||i.includes(e)||o(e,u.variables[e])}var t=c("<tw-debugger><div class='variables'></div>Turns: <select disabled></select><button class='show-invisibles'>Debug View</button><button class='show-variables enabled'>0 Variables</button></tw-debugger>"),n=t.find(".show-invisibles");n.click(function(){c(document.documentElement).toggleClass("debug-mode"),n.toggleClass("enabled")});var a=t.find(".show-variables"),s=t.find(".variables");a.click(function(){s[a.is(".enabled")?"attr":"removeAttr"]("hidden",""),a.toggleClass("enabled")});var r=t.find("select");r.change(function(e){var t=e.target.value-u.pastLength;0!==t&&(u[t<0?"rewind":"fastForward"](Math.abs(t)),l.showPassage(u.passage))}),u.on("forward",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=u.pastLength;1<n&&r.removeAttr("disabled"),t||(r.children().each(function(e,t){n<=e&&c(t).remove()}),r.append("<option value="+n+">"+(n+1)+": "+e+"</option>").val(n))}).on("back",function(){u.pastLength<=1&&r.attr("disabled"),r.find("[selected]").removeAttr("selected"),r.val(u.pastLength)}).on("load",function(e){r.empty(),r[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return r.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})}),u.on("forward",e).on("back",e),i.on("set",function(e,t,n){(e===u.variables||e.TwineScript_VariableStore)&&o(t,n,e===u.variables?"":e.TwineScript_VariableStoreName)}).on("delete",function(e,t){e===u.variables&&s.find('[data-name="'+t+'"]:not(.temporary)').remove()}),c(document.body).append(t)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","internaltypes/twineerror"],function(i,e,t,a,s){function n(t){return function(){var e=t.apply(void 0,arguments);return"number"!=typeof e||isNaN(e)?s.create("macrocall","This mathematical expression doesn't compute!"):e}}var r=e.realWhitespace,o=e.anyRealLetter,c=t.subset,u=t.objectName,l=i.TypeSignature,f=l.rest,p=l.zeroOrMore,d=l.Any;i.add(["text","string"],function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.join("")},[p(i.TypeSignature.either(String,Number,Boolean,Array))])("substring",function(e,t,n,r){return c(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(new RegExp(o+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(new RegExp(o+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(new RegExp(r+"+")).filter(Boolean)},[String])(["num","number"],function(e,t){return Number.isNaN(+t)?s.create("macrocall","I couldn't convert "+u(t)+" to a number."):+t},[String])("rgb",function(){for(var e,t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1)if((e=arguments.length<=t+1?void 0:arguments[t+1])<0||255<e)return s.create("macrocall","RGB values must be whole numbers between 0 and 255, not "+u(e)+".");return a.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3]})},[parseInt,parseInt,parseInt])("rgba",function(){for(var e,t=0;t<3;t+=1)if((e=arguments.length<=t+1?void 0:arguments[t+1])<0||255<e)return s.create("macrocall","RGB values must be whole numbers between 0 and 255, not "+u(e)+".");return(arguments.length<=4?void 0:arguments[4])<0||1<(arguments.length<=4?void 0:arguments[4])?s.create("macrocall","Alpha values must be numbers between 0 and 1 inclusive, not "+u(arguments.length<=4?void 0:arguments[4])+"."):a.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[parseInt,parseInt,parseInt,Number])("hsl",function(e,t,n,r){var i=" values must be numbers between 0 and 1 inclusive, not ";return n<0||1<n?s.create("macrocall","Saturation"+i+u(n)+"."):r<0||1<r?s.create("macrocall","Lightness"+i+u(r)+"."):((t=Math.round(t)%360)<0&&(t+=360),a.create({h:t,s:n,l:r}))},[Number,Number,Number])("hsla",function(e,t,n,r,i){var o=" values must be numbers between 0 and 1 inclusive, not ";return n<0||1<n?s.create("macrocall","Saturation"+o+u(n)+"."):r<0||1<r?s.create("macrocall","Lightness"+o+u(r)+"."):i<0||1<i?s.create("macrocall","Alpha"+o+u(r)+"."):((t=Math.round(t)%360)<0&&(t+=360),a.create({h:t,s:n,l:r,a:i}))},[Number,Number,Number,Number]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[Math.min,f(Number)],max:[Math.max,f(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[Math.floor,Number],round:[Math.round,Number],ceil:[Math.ceil,Number],pow:[n(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[n(Math.sqrt),Number],log:[n(Math.log),Number],log10:[n(Math.log10),Number],log2:[n(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=Math.min(e,t),r=Math.max(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,i.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},f(d)],"":function(){var n=this;Object.keys(this).forEach(function(e){var r,t;e&&(r=n[e][0],t=n[e][1],i.add(e,function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.apply(void 0,t)},t))})}}[""]()}),Woa=window,function(){if(!Woa.requestAnimationFrame){if(Woa.webkitRequestAnimationFrame)return Woa.requestAnimationFrame=Woa.webkitRequestAnimationFrame,Woa.cancelAnimationFrame=Woa.webkitCancelAnimationFrame||Woa.webkitCancelRequestAnimationFrame;var i=0;Woa.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-i)),r=Woa.setTimeout(function(){e(t+n)},n);return i=t+n,r},Woa.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),"function"==typeof define&&define("requestAnimationFrame",[],function(){return Woa.requestAnimationFrame}),define("macrolib/commands",["requestAnimationFrame","macros","utils","state","passages","engine","internaltypes/twineerror","datatypes/hookset","utils/operationutils"],function(r,e,t,i,o,a,s,n,c){function u(e){return"("+e+" "+a.options.ifid+") "}var l=t.toJSLiteral,f=t.unescape,p=c.printBuiltinValue,d=e.TypeSignature,h=d.Any,m=d.rest,y=d.optional,g=!!localStorage&&function(){try{return localStorage.setItem("test","1"),localStorage.removeItem("test"),!0}catch(e){return!1}}();e.add("display",function(e,t){return{TwineScript_ObjectName:"a (display: "+l(t)+") command",TwineScript_TypeName:"a (display:) command",TwineScript_Print:function(){return o.has(t)?f(o.get(t).get("source")):s.create("macrocall","I can't (display:) the passage '"+t+"' because it doesn't exist.")}}},[String])("print",function(e,t){return{TwineScript_ObjectName:"a (print:) command",TwineScript_TypeName:"a (print:) command",TwineScript_Print:function(){return p(t)}}},[h])("show",function(n){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return{TwineScript_ObjectName:"a (show:) command",TwineScript_TypeName:"a (show:) command",TwineScript_Print:function(){return t.forEach(function(e){return e.forEach(n,function(e){var t=e.data("hiddenSource");return void 0===t?s.create("operation","I can't reveal a hook which is already visible."):void n.renderInto(t,e)})}),""}}},[m(n)])("goto",function(e,t){return{TwineScript_ObjectName:"a (go-to: "+l(t)+") command",TwineScript_TypeName:"a (go-to:) command",TwineScript_Print:function(){return o.has(t)?(r(function(){return a.goToPassage(t)}),{earlyExit:1}):s.create("macrocall","I can't (go-to:) the passage '"+t+"' because it doesn't exist.")}}},[String])("goto-transition",function(e,t,n){return{TwineScript_ObjectName:"a (goto-transition: "+l(t)+","+l(n)+") command",TwineScript_TypeName:"a (goto-transition:) command",TwineScript_Print:function(){return o.has(t)?(r(function(){return a.goToPassage(t,{transitionIn:n,transitionOut:n})}),{earlyExit:1}):s.create("macrocall","I can't (goto-transition:) the passage '"+n+"' because it doesn't exist.")}}},[String,String])("undo",function(){return{TwineScript_ObjectName:"a (undo:) command",TwineScript_TypeName:"a (undo:) command",TwineScript_Print:function(){return i.pastLength<1?s.create("macrocall","I can't (undo:) on the first turn."):(r(function(){return a.goBack()}),{earlyExit:1})}}},[])("live",function(e,t){return{TwineScript_ObjectName:"a (live: "+t+") command",TwineScript_TypeName:"a (live:) command",live:!0,delay:t}},[y(Number)])("stop",function(){return{TwineScript_ObjectName:"a (stop:) command",TwineScript_TypeName:"a (stop:) command",TwineScript_Print:function(){return""}}},[])("savegame",function(e,t,n){if(n=n||"",!g)return!1;var r=i.serialise();if(s.containsError(r))return r;try{return localStorage.setItem(u("Saved Game")+t,r),localStorage.setItem(u("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,y(String)])("loadgame",function(e,t){return{TwineScript_ObjectName:"a (load-game:) command",TwineScript_TypeName:"a (load-game:) command",TwineScript_Print:function(){var e=localStorage.getItem(u("Saved Game")+t);return e?(i.deserialise(e),r(a.showPassage.bind(a,i.passage,!1)),{earlyExit:1}):s.create("saving","I can't find a save slot named '"+t+"'!")}}},[String])("alert",function(e,t){return{TwineScript_ObjectName:"an (alert:) command",TwineScript_TypeName:"an (alert:) command",TwineScript_Print:function(){return window.alert(t),""}}},[String])("prompt",function(e,t,n){return window.prompt(t,n)||""},[String,String])("confirm",function(e,t){return window.confirm(t)},[String])("openURL",function(e,t){return{TwineScript_ObjectName:"an (open-url:) command",TwineScript_TypeName:"an (open-url:) command",TwineScript_Print:function(){return window.open(t,""),""}}},[String])("reload",function(){return{TwineScript_ObjectName:"a (reload:) command",TwineScript_TypeName:"a (reload:) command",TwineScript_Print:function(){return i.pastLength<1?s.create("infinite","I mustn't (reload:) the page in the starting passage."):(window.location.reload(),{earlyExit:1})}}},[])("gotoURL",function(e,t){return{TwineScript_ObjectName:"a (goto-url:) command",TwineScript_TypeName:"a (goto-url:) command",TwineScript_Print:function(){return window.location.assign(t),{earlyExit:1}}}},[String])("pageURL",function(){return window.location.href},[])}),define("macrolib/datastructures",["jquery","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/assignmentrequest","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,r,t,n,i,a,o,s,c,u,l){var f=n.objectName,p=(n.typeName,n.subset),d=n.collectionType,h=n.isValidDatamapName,m=n.is,y=n.unique,g=n.clone,v=t.TypeSignature,b=v.optional,w=v.rest,x=v.either,T=v.zeroOrMore,S=v.Any;t.add("set",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"===n.operator)return u.create("macrocall","Please say 'to' when using the (set:) macro.");var r=void 0;if(n.src&&n.src.varref){var i,o=n.src.get();if(i=u.containsError(o))return i;r=n.dest.set(o)}else r=n.dest.set(n.src);if(u.isPrototypeOf(r))return r;a.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (set:) operation",TwineScript_ObjectName:"a (set:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(c)])("put",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return u.create("macrocall","Please say 'into' when using the (put:) macro.");var r=n.dest.set(n.src);if(u.isPrototypeOf(r))return r;a.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (put:) operation",TwineScript_ObjectName:"a (put:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(c)])("move",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return u.create("macrocall","Please say 'into' when using the (move:) macro.");var r=void 0,i=void 0;if(n.src&&n.src.varref){var o=n.src.get();if(i=u.containsError(o))return i;if(r=n.dest.set(o),i=u.containsError(r))return i;n.src.delete()}else if(r=n.dest.set(n.src),i=u.containsError(r))return i;a.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(c)])(["a","array"],function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t},T(S))("range",function e(t,n,r){if(r<n)return e(t,r,n);var i=[n];for(r-=n;0<r--;)i.push(++n);return i},[parseInt,parseInt])("subarray",function(e,t,n,r){return p(t,n,r)},[Array,parseInt,parseInt])("shuffled",function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[]).map(g)},[S,w(S)])("sorted",function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.sort(r("en"))},[x(Number,String),w(x(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===(t*=-1)?u.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?u.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(g)},[parseInt,S,w(S)])("repeated",function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t<=0)return u.create("macrocall","I can't repeat these values "+t+" times.");for(var o=[];0<t--;)o.push.apply(o,r);return o.map(g)},[parseInt,w(S)])("interlaced",function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];for(var r=Math.min.apply(Math,_toConsumableArray(t.map(function(e){return e.length}))),i=[],o=0;o<r;o+=1)for(var a=0;a<t.length;a+=1)i.push(g(t[a][o]));return i},[Array,w(Array)]),t.add("altered",function(t,n){for(var e=arguments.length,r=Array(2<e?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];return r.map(function(e){return n.apply(t,{loop:e})})},[s.TypeSignature("via"),w(S)])("find",function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.filter(e,r)},[s.TypeSignature("where"),w(S)])("all-pass",function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return u.containsError(o)||o.length===r.length},[s.TypeSignature("where"),w(S)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return u.containsError(o)||0<o.length},[s.TypeSignature("where"),w(S)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return u.containsError(o)||0===o.length},[s.TypeSignature("where"),w(S)])("folded",function(n,r){for(var e=arguments.length,t=Array(2<e?e-2:0),i=2;i<e;i++)t[i-2]=arguments[i];return"where"in r&&(t=r.filter(n,t)),u.containsError(t)||t.reduce(function(e,t){return r.apply(n,{making:e,loop:t})})},[x(s.TypeSignature("where via making"),s.TypeSignature("via making")),w(S)]),t.add("datanames",function(e,t){return Array.from(t.keys()).sort(r("en"))},[Map])("datavalues",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(r("en"))[0]===e[0]?-1:1}).map(function(e){return g(e[1])})},[Map])("dataentries",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(r("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",g(e[1])]])})},[Map])("history",function(){return i.pastPassageNames()},[])("passage",function(e,t){return g(o.get(t||i.passage))||u.create("macrocall","There's no passage named '"+t+"' in this story.")},[b(String)])("savedgames",function(){function e(e){return"("+e+" "+a.options.ifid+") "}var t=0,n=void 0,r=new Map;do{n=localStorage.key(t),t+=1;var i=e("Saved Game");n&&n.startsWith(i)&&(n=n.slice(i.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var r=void 0,i=new Map,o=t.reduce(function(e,t){var n=void 0;if(u.containsError(e))return e;if(void 0===r)r=t;else{if(n=u.containsError(h(i,r)))return n;if(i.has(r))return u.create("macrocall","You used the same data name ("+f(r)+") twice in the same (datamap:) call.");i.set(r,g(t)),r=void 0}return e},!0);return u.containsError(o)?o:void 0!==r?u.create("macrocall","This datamap has a data name without a value."):i},T(S))(["dataset","ds"],function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return new Set(t.filter(y).map(g))},T(S))("count",function t(n,r){for(var e=arguments.length,i=Array(2<e?e-2:0),o=2;o<e;o++)i[o-2]=arguments[o];if(1<i.length){var a,s=i.map(function(e){return t(n,r,e)});return(a=u.containsError(s))?a:s.reduce(function(e,t){return e+t},0)}var c=i[0];switch(d(r)){case"dataset":case"datamap":return u.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof c?u.create("macrocall",f(r)+" can't contain  "+f(c)+" because it isn't a string."):c?r.split(c).length-1:0;case"array":return r.reduce(function(e,t){return e+m(t,c)},0);default:return u.create("macrocall",f(r)+" can't contain values, let alone "+f(c)+".")}},[S,w(S)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/selectors","datatypes/colour","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(r,e,i,t,o,a,n,s,c){var u=e.TypeSignature,l=u.either,f=u.wrapped,p=u.rest,d=u.Any,h=[f(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];r(function(){return r(i.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var e=r(this),t=e.data("hoverChanger");e.data({mouseoutStyle:e.attr("style")||""}),s.create({target:e},t).update(),e.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var e=r(this),t=e.data("mouseoutStyle");e.attr("style",t).removeData("mouseoutStyle").attr("hover",!1)})});var m,y,g=["dissolve","shudder","pulse"];e.addChanger("if",function(e,t){return a.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},h)("unless",function(e,t){return a.create("unless",[!t])},function(e,t){return e.enabled=e.enabled&&t},h)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?a.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):c.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},h)("else",function(e){return"lastHookShown"in e.stack[0]?a.create("else",[!1===e.stack[0].lastHookShown]):c.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return a.create("hidden")},function(e){return e.enabled=!1},null)("hook",function(e,t){return a.create("hook",[t])},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.loop?a.create("for",[t,r]):c.create("macrocall","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t,n){return e.loopVars[t.loop]=t.filter(e.section,n)},[n.TypeSignature("where"),p(d)])(["transition","t8n"],function(e,t){return t=i.insensitiveName(t),-1===g.indexOf(t)?c.create("macrocall","'"+t+"' is not a valid (transition:)","Only the following names are recognised (capitalisation and hyphens ignored): "+g.join(", ")):a.create("transition",[t])},function(e,t){return e.transition=t,e},[String])(["transition-time","t8n-time"],function(e,t){return t<=0?c.create("macrocall","(transition-time:) should be a positive number of (milli)seconds, not "+t):a.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e},[Number])("font",function(e,t){return a.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return c.create("macrocall",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var i=Math.round(r/(t.length-2)*50);n=Object.assign({"text-align":"center","max-width":"50%"},25===i?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":i+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="block",a.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return o.isPrototypeOf(t)&&(t=t.toRGBAString(t)),a.create("text-colour",[t])},function(e,t){return e.styles.push({color:t}),e},[l(String,o)])("text-rotate",function(e,t){return a.create("text-rotate",[t])},function(e,t){return e.styles.push({display:"inline-block",transform:function(){var e=r(this).css("transform")||"";return"none"===e&&(e=""),e+" rotate("+t+"deg)"}}),e},[Number])("background",function(e,t){return o.isPrototypeOf(t)&&(t=t.toRGBAString(t)),a.create("background",[t])},function(e,t){var n;return n=o.isHexString(t)||o.isCSS3Function(t)?{"background-color":t}:{"background-size":"cover","background-image":"url("+t+")"},e.styles.push(n,{display:function(){return i.childrenProbablyInline(r(this))?"initial":"block"}}),e},[l(String,o)]).apply(void 0,_toConsumableArray((m={color:"transparent"},y=Object.assign(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},strike:{"text-decoration":"line-through"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite",display:"inline-block"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var e=r(this).css("color");return"-1px -1px 0 "+e+", 1px -1px 0 "+e+",-1px  1px 0 "+e+", 1px  1px 0 "+e}},{color:function(){for(var e=r(this);e.length&&e[0]!==document;e=e.parent()){var t=e.css("background-color");if("transparent"!==t&&!t.match(/^\w+a\(.+?,\s*0\s*\)$/))return t}return"#fff"}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+r(this).css("color")}},emboss:{"text-shadow":function(){return"0.08em 0.08em 0em "+r(this).css("color")}},smear:[{"text-shadow":function(){var e=r(this).css("color");return"0em   0em 0.02em "+e+",-0.2em 0em  0.5em "+e+", 0.2em 0em  0.5em "+e}},m],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+r(this).css("color")}},m],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+r(this).css("color")},"user-select":"none"},m],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite",display:"inline-block"}}),["text-style",function(e,t){return(t=i.insensitiveName(t))in y?a.create("text-style",[t]):c.create("macrocall","'"+t+"' is not a valid (text-style:)","Only the following names are recognised (capitalisation and hyphens ignored): "+Object.keys(y).join(", "))},function(e,t){return i.assertMustHave(y,[t]),e.styles="none"===t?[]:e.styles.concat(y[t]),e}])).concat([[String]]))("hover-style",function(e,t){var n=s.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?a.create("hover-style",[t]):c.create("macrocall","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:!1}),e},[a])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),a.create("css",[t])},function(e,t){return e.attr.push({style:function(){return(r(this).attr("style")||"")+t}}),e},[String])}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor"],function(n,l,f){var e={create:function(e){return l.assertOnlyHas(e,["scope","section","attr","data","changer","functions"]),Object.assign(Object.create(this),{enchantments:n()},e)},enchantScope:function(){var i=this,o=this.attr,a=this.data,s=this.functions,c=this.section,u=this.changer,e=this.scope;e instanceof n&&(e=Array.prototype.map.call(e,function(e){return n(e)})),this.enchantments=n(),e.forEach(c,function(e){var t=e.wrapAll("<tw-enchantment>").parent();if(o&&t.attr(o),a&&t.data(a),s&&s.forEach(function(e){return e(t)}),u){var n=f.create({section:c,target:t});if(u.run(n),n.update(),e.is(l.storyElement)){var r=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(n.styles))));e.css(r.reduce(function(e,t){return e[t]="inherit",e},{})),t.data({enchantedProperties:r})}}e.is(l.storyElement)&&t.css({width:"100%",height:"100%"}),i.enchantments=i.enchantments.add(t)})},disenchant:function(){this.enchantments.each(function(){var e=n(this).contents();e.unwrap();var t=n(this).data("enchantedProperties");t&&e.has(l.storyElement)&&l.storyElement.css(t.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(e)}),define("macrolib/enchantments",["jquery","utils","utils/selectors","utils/operationutils","macros","datatypes/hookset","datatypes/changercommand","internaltypes/enchantment","internaltypes/twineerror"],function(a,e,t,n,i,s,c,o,u){function l(r,i){return a(function(){e.storyElement.on(r.event+".enchantment","."+r.classList.replace(/ /g,"."),function(){var e=a(this),t=e.data("enchantmentEvent");t&&t(e)})}),[function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.every(Boolean)?c.create(i,t.map(s.from)):u.create("datatype","A string given to this ("+i+":) macro was empty.")},function(t,e){t.enabled=!1,r.rerender&&(t.newTargets=(t.newTargets||[]).concat({target:e,append:r.rerender}));var n=o.create({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")?r.blockClassList:r.classList)}],attr:(r.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){if(r.once){var e=t.section.enchantments.indexOf(n);t.section.enchantments.splice(e,1),n.disenchant()}t.section.renderInto(t.source,null,Object.assign({},t,{enabled:!0}))}},scope:e,section:t.section});return t.section.enchantments.push(n),n.enchantScope(),t},p(s,String)]}var f=n.is,r=i.TypeSignature,p=r.either,d=r.rest;i.add("enchant",function(n,r,i){return{TwineScript_ObjectName:"an (enchant:) command",TwineScript_TypeName:"an (enchant:) command",TwineScript_Print:function(){var e=i.summary();if(e.includes("newTargets")||e.includes("target"))return u.create("macrocall","The changer given to (enchant:) can't include a revision command like (replace:) or (append:).");var t=o.create({scope:s.from(r),changer:i,section:n});return n.enchantments.push(t),t.enchantScope(),""}}},[p(s,String),c]);var h=["replace","append","prepend"];h.forEach(function(o){i.addChanger(o,function(){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.every(Boolean)?c.create(o,t.map(s.from)):u.create("datatype","A string given to this ("+o+":) macro was empty.")},function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return 0<a(e.target).parents().filter("tw-collapsed").length||(e.attr=[].concat(_toConsumableArray(e.attr),[{collapsing:!1}])),e.newTargets=e.newTargets||[],(t=e.newTargets).push.apply(t,_toConsumableArray(r.filter(function(r){return!e.newTargets.some(function(e){var t=e.target,n=e.append;return f(r,t)&&o===n})}).map(function(e){return{target:e,append:o}}))),e},d(p(s,String)))}),a(function(){e.storyElement.on("click.enchantment",function(){Array.from(a(this).parents(".enchantment-clickblock")).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1}).forEach(function(e){var t=a(e).data("enchantmentEvent");t&&t()})})});var m=[{name:"click",enchantDesc:{event:"click",once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:"mouseenter",once:!0,rerender:"",classList:"enchantment-mouseover"}},{name:"mouseout",enchantDesc:{event:"mouseleave",once:!0,rerender:"",classList:"enchantment-mouseout"}}];m.forEach(function(e){return i.addChanger.apply(i,[e.name].concat(_toConsumableArray(l(e.enchantDesc,e.name))))}),h.forEach(function(r){m.forEach(function(e){var t=Object.assign({},e.enchantDesc,{rerender:r}),n=e.name+"-"+r;i.addChanger.apply(i,[n].concat(_toConsumableArray(l(t,n))))})})}),define("macrolib/links",["jquery","macros","utils","utils/selectors","state","passages","engine","datatypes/changercommand","internaltypes/twineerror"],function(i,e,o,t,a,s,r,c,u){var n=e.TypeSignature.optional,l="Links can't have empty strings for their displayed text.";i(function(){return i(o.storyElement).on("click.passage-link",t.internalLink,function(){var e=i(this),t=e.parent().data("clickEvent");if(!t){var n=e.attr("passage-name");return n?void r.goToPassage(n,!1):e.is("[undo]")?void r.goBack():void 0}t(e)})}),[["link","link-replace"],["link-reveal"],["link-repeat"]].forEach(function(n){return e.addChanger(n,function(e,t){return t?c.create(n[0],[t]):u.create("macrocall",l)},function(t,e){t.innerSource||(t.innerSource=t.source),t.source="<tw-link tabindex=0>"+e+"</tw-link>",t.append="link"===n[0]?"replace":"append",t.data.clickEvent=function(e){t.source=t.innerSource,t.section.renderInto(t.innerSource+"",null,t),"link-reveal"===n[0]&&e.contents().unwrap()}},[String])}),e.add(["link-goto"],function(t,n,r){return n?{TwineScript_TypeName:"a (link-goto: "+o.toJSLiteral(n)+", "+o.toJSLiteral(r)+") command",TwineScript_ObjectName:"a (link-goto:) command",TwineScript_Print:function(){var e=t.evaluateTwineMarkup(o.unescape(r||n));return e instanceof i?e:s.has(e)?"<tw-link tabindex=0 "+(0<a.passageNameVisited(e)?'class="visited" ':"")+'passage-name="'+o.escape(e)+'">'+(n||r)+"</tw-link>":'<tw-broken-link passage-name="'+o.escape(e)+'">'+(n||r)+"</tw-broken-link>"}}:u.create("macrocall",l)},[String,n(String)])("link-undo",function(e,t){return t?{TwineScript_ObjectName:"a (link-undo:"+o.toJSLiteral(t)+") command",TwineScript_TypeName:"a (link-undo:) command",TwineScript_Print:function(){return a.pastLength<1?u.create("macrocall","I can't use (link-undo:) on the first turn."):"<tw-link tabindex=0 undo>"+t+"</tw-link>"}}:u.create("macrocall",l)},[String])}),define("repl",["utils","markup","twinescript/compiler","twinescript/environ"],function(e,r,i,o){window.REPL=function(e){var t=i(r.lex("(print:"+e+")"));console.log(t);var n=o({}).eval(t);return n.TwineScript_Print?n.TwineScript_Print():n},window.LEX=function(e){var t=r.lex(e);return 1===t.length?t[0]:t}}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",requestAnimationFrame:"../node_modules/requestanimationframe/app/requestAnimationFrame",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["jquery","es6-shim","jqueryplugins"]}),require(["jquery","debugmode","renderer","state","engine","passages","utils/selectors","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/links","repl"],function($,DebugMode,Renderer,State,Engine,Passages,Selectors){function _eval(text){return eval(text+"")}var _installHandlers=function(){$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug&&DebugMode(),_installHandlers=null},kxa;kxa=window.onerror,window.onerror=function(e,t,n,r,i){var o=i&&i.stack&&"\n"+i.stack.replace(/\([^\)]+\)/g,"")+"\n"||"("+e+")\n";alert("Sorry to interrupt, but this page's code has got itself in a mess. "+o+"(This is probably due to a bug in the Harlowe game engine.)"),"function"==typeof(window.onerror=kxa)&&kxa.apply(void 0,arguments)},$(function(){var e=$(Selectors.storyData);if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");return Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($(Selectors.passageData),function(e,t){var n=t.getAttribute("pid");return n<e?n:e},1/0)),n=$(Selectors.passageData+"[pid="+n+"]").attr("name"),_installHandlers(),$(Selectors.script).each(function(t){try{_eval($(this).html())}catch(e){alert("There is a problem with this story's script (#"+(t+1)+"):\n\n"+e.message)}}),$(Selectors.stylesheet).each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())}),window.location.hash&&!window.location.hash.includes("stories")&&State.load(window.location.hash)?void Engine.showPassage(State.passage):void Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();